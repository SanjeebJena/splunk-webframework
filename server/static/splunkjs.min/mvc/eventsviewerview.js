define("views/shared/delegates/Modalize",["jquery","underscore","views/shared/delegates/Base"],function(e,t,n){return n.extend({initialize:function(){var e={tbody:"> tbody",parentContainerSelector:"div",overlayZIndex:404};t.defaults(this.options,e),n.prototype.initialize.apply(this,arguments)},show:function(n,r){this.cleanup();if(!t.isNumber(n))return;this.rowIdx=n,this.optArg=r;var i=this.$(this.options.tbody).children(':not(".field-row")').eq(this.rowIdx),s={topHeight:0,bottomHeight:0,tableHeaderHeight:0,dockedThead:0,width:this.$el[0].scrollWidth+"px"};this.$el.append(this.$top=e('<div class="modalize-table-top" />')),this.$el.append(this.$bottom=e('<div class="modalize-table-bottom" />')),e(".main-section-body").append(this.$overlay=e('<div class="modalize-table-overlay" />')),this.addEventHandlers(t.debounce(function(e,t){this.show(e,t)}.bind(this),100)),i.prevAll(":visible").each(function(t,n){s.topHeight+=e(n).outerHeight(!0)}),i.nextAll(":visible").each(function(t,n){if(!r||t!=0)s.bottomHeight+=e(n).outerHeight(!0)}),this.$el.find("> table:not(.table-expanded, .table-embed)").each(function(t,n){s.tableHeaderHeight+=e(n).find("tr").first().height()}),this.applycss(s)},addEventHandlers:function(t){var n=function(){this.$top.remove(),this.$bottom.remove(),this.$overlay.remove(),this.trigger("unmodalize",this.rowIdx),this.$el.closest(this.options.parentContainerSelector).css({"z-index":0})}.bind(this);this.$top.on("click",n),this.$bottom.on("click",n),this.$overlay.on("click",n),this.lastHeight=e(window).height(),this.lastWidth=e(window).width(),e(window).on("resize."+this.cid,function(){var n=e(window).height(),r=e(window).width();if(n!=this.lastHeight||r!=this.lastWidth)this.lastHeight=n,this.lastWidth=r,t(this.rowIdx,this.optArg)}.bind(this))},cleanup:function(){this.rowIdx&&delete this.rowIdx,this.$top&&this.$top.remove(),this.$bottom&&this.$bottom.remove(),this.$overlay&&this.$overlay.remove(),e(window).off("."+this.cid),this.$el.closest(this.options.parentContainerSelector).css({"z-index":0})},applycss:function(e){this.$el.closest(this.options.parentContainerSelector).css({"z-index":this.options.overlayZIndex+1}),this.$top.css({width:e.width,height:e.topHeight+e.tableHeaderHeight+"px"}),this.$bottom.css({width:e.width,height:e.bottomHeight+"px"}),this.$overlay.css({"z-index":this.options.overlayZIndex})},remove:function(){return n.prototype.remove.apply(this),e(window).off("resize."+this.cid),this}})}),define("views/shared/eventsviewer/shared/TableHead",["underscore","jquery","module","views/Base","splunk.util","helpers/user_agent"],function(e,t,n,r,i,s){return r.extend({moduleId:n.id,tagName:"thead",initialize:function(){var e={allowLineNum:!0};this.options=t.extend(!0,e,this.options),r.prototype.initialize.apply(this,arguments)},render:function(){return this.$el.html(this.compiledTemplate({_:e,is_ie7:s.isIE7()||s.isIE()&&s.isInIE7DocumentMode()?"ie7":"",labels:this.options.labels||[],allowRowExpand:this.options.allowRowExpand,allowLineNum:this.options.allowLineNum})),this},template:'                <tr>                    <% if (allowRowExpand) { %>                        <th class="col-info"><i class="icon-info"></i></th>                    <% } %>                    <% if (allowLineNum) { %>                        <th class="line-num <%- is_ie7 %>">&nbsp;</i></th>                    <% } %>                    <% _.each(labels, function(label, index) { %>                        <th class="col-<%- index %> <%- is_ie7 %>"><%- _(label).t() %></th>                    <% }) %>                </tr>            '})}),define("views/shared/PopTart",["underscore","module","views/Base","views/shared/delegates/PopdownDialog"],function(e,t,n,r){return n.extend({moduleId:t.id,className:"popdown-dialog",initialize:function(t){t=t||{};var i={direction:"auto",adjustPosition:!0};e.defaults(t,i),n.prototype.initialize.apply(this,arguments),this.children.popdownDialogDelegate=new r({el:this.el,ignoreClasses:this.options.ignoreClasses,adjustPosition:this.options.adjustPosition,show:this.options.show,mode:this.options.mode,direction:this.options.direction,arrow:this.options.arrow,minMargin:this.options.minMargin,allowPopUp:this.options.allowPopUp,scrollContainer:this.options.scrollContainer}),this.children.popdownDialogDelegate.on("all",function(){this.trigger.apply(this,arguments)},this),this.options.onHiddenRemove&&this.on("hidden",this.remove,this),this.on("shown",function(e){this.shown=!0},this),this.on("hidden",function(e){this.shown=!1},this)},toggle:function(){return this.children.popdownDialogDelegate.toggle()},show:function(e){this.children.popdownDialogDelegate.show(e)},hide:function(){this.children.popdownDialogDelegate.hide()},render:function(){return this.el.innerHTML=this.template,this},remove:function(){this.shown&&this.hide(),n.prototype.remove.apply(this,arguments)},template:'                <div class="arrow"></div>                <div class="popdown-dialog-body popdown-dialog-padded"></div>            ',template_menu:'                <div class="arrow"></div>            '})}),define("contrib/text!views/shared/FieldInfo.html",[],function(){return'<% if (field) { %>\n    <a href="#" class="close"><i class="icon-close"></i></a>\n    <h2 class="field-info-header"><%- field.get(\'name\') %></h2>\n    <div class="divider"></div>\n    <% if (selectableFields) { %>\n        <div class="pull-right">\n            <label class="select-field-label"><%- _("Selected").t() %></label>\n            <div class="btn-group">\n                <% var is_selected_field = selectedFields.findWhere({\'name\': field.get(\'name\')}); %>\n                <button class="btn select <%- is_selected_field ? \'active\' : \'\' %>" data-field-name="<%- field.get(\'name\') %>"><%- _("Yes").t() %></button>\n                <button class="btn unselect <%- is_selected_field ? \'\' : \'active\' %>" data-field-name="<%- field.get(\'name\') %>"><%- _("No").t() %></button>\n            </div>\n        </div>\n    <% } %>\n    <p><%- field.get("is_exact") ? "" : ">" %><%- field.get("distinct_count") %> <%- (field.get("distinct_count")>1) ?  _("Values").t(): _("Value").t() %>, <%= i18n.format_percent(summary.frequency(field.get(\'name\'))) %> <%- _("of events").t() %></p>\n    <h3 class="reports-header"><%- _("Reports").t() %></h3>\n    <% if (field.isNumeric()) { %>\n        <ul class="fields-numeric inline">\n            <li><a href="#" data-visualization="line" data-report="avgbytime" data-field="<%- field.get(\'name\') %>"><%- _("Average over time").t() %></a></li>\n            <li><a href="#" data-visualization="line" data-report="maxbytime" data-field="<%- field.get(\'name\') %>"><%- _("Maximum value over time").t() %></a></li>\n            <li><a href="#" data-visualization="line" data-report="minbytime" data-field="<%- field.get(\'name\') %>"><%- _("Minimum value over time").t() %></a></li>\n        </ul>\n    <% } %>\n    <ul class="fields-values inline">\n        <li><a href="#" data-visualization="bar" data-report="top" data-field="<%- field.get(\'name\') %>"><%- _("Top values").t() %></a></li>\n        <li><a href="#" data-visualization="line" data-report="topbytime" data-field="<%- field.get(\'name\') %>"><%- _("Top values by time").t() %></a></li>\n        <li><a href="#" data-visualization="line" data-report="rare" data-field="<%- field.get(\'name\') %>"><%- _("Rare values").t() %></a></li>\n    </ul>\n    <ul class="fields-events inline">\n        <li><a href="#" data-report="fieldvalue" data-field="<%- field.get(\'name\') %>" data-field-value="*"><%- _("Events with this field").t() %></a></li>\n    </ul>\n    <% if (field.isNumeric()) { %>\n        <ul class="field-stats inline">\n            <li>\n                <strong class="stats-label"><%- _("Avg").t() %>:</strong>\n                <span class="val numeric"><%- field.get("mean") %></span>\n            </li>\n            <li>\n                <strong class="stats-label"><%- _("Min").t() %>:</strong>\n                <span class="val numeric"><%- field.get("min") %></span>\n            </li>\n            <li>\n                <strong class="stats-label"><%- _("Max").t() %>:</strong>\n                <span class="val numeric"><%- field.get("max") %></span>\n            </li>\n            <li>\n                <strong class="stats-label"><%- _("Std").t() %>&nbsp;<%- _("Dev").t() %>:</strong>\n                <span class="val numeric"><%- field.get("stdev") %></span>\n            </li>\n        </ul>\n    <% } %>\n    <table class="table table-condensed table-dotted">\n        <thead>\n            <tr>\n            <% if (field.get(\'modes\').length >= 10) { %>\n                <th class="value"><strong><%- _("Top 10 Values").t() %></strong></th>\n            <% } else { %>\n                <th class="value"><strong><%- _("Values").t() %></strong></th>\n            <% } %>\n            <td class="count"><%- _("Count").t() %></td>\n                <td class="percent">%</td>\n                <td class="bar">&nbsp;</td>\n            </tr>\n        </thead>\n        <tbody>\n            <% _.each(field.get(\'modes\'), function(mode) { %>\n                <tr>\n                    <td class="value"><a href="#" data-report="fieldvalue" data-field="<%- field.get(\'name\') %>" data-value="<%- mode.value %>"><%- mode.value %></a></td>\n                    <td class="count"><%- format_decimal(mode.count || -1) %></td>\n                    <% percent = mode.count/field.get(\'count\') %>\n                    <td class="percent"><%- format_percent(percent) %></td>\n                    <td class="bar">\n                        <div style="width:<%- Math.round(percent * 100) %>%;" class="graph-bar"></div>\n                    </td>\n                </tr>\n            <% }); %>\n        </tbody>\n    </table>\n<% } %>\n'}),define("views/shared/FieldInfo",["underscore","module","views/shared/PopTart","splunk.i18n","models/services/search/IntentionsParser","contrib/text!views/shared/FieldInfo.html"],function(e,t,n,r,i,s){return n.extend({moduleId:t.id,initialize:function(){n.prototype.initialize.apply(this,arguments);var e={selectableFields:!0};this.options=$.extend(!0,e,this.options),this.model.intentionsParser=new i,this.model.intentionsParser.on("change",function(){var e=this.model.intentionsParser.fullSearch();this.model.intentionsParser.has("visualization")?this.model.report.entry.content.set({search:e,"display.general.type":"visualizations","display.visualizations.charting.chart":this.model.intentionsParser.get("visualization")}):this.model.report.entry.content.set("search",e),this.model.report.trigger("eventsviewer:drilldown")},this),this.model.summary.fields.on("reset",this.render,this),this.collection.selectedFields.on("add remove reset",this.render,this),this.model.field.on("change",this.render,this)},events:{"click .unselect":function(e){this.collection.selectedFields.remove(this.collection.selectedFields.findWhere({name:$(e.currentTarget).data().fieldName})),e.preventDefault()},"click .select":function(e){this.collection.selectedFields.push({name:$(e.currentTarget).data().fieldName}),e.preventDefault()},"click .close":function(e){this.hide(),e.preventDefault()},"click ul.fields-values > li > a[data-field]":function(e){var t=$(e.currentTarget),n=t.data(),r=n.field,i=n.report;this.model.intentionsParser.clear({silent:!0}),this.model.intentionsParser.set({visualization:n.visualization},{silent:!0}),this.model.intentionsParser.fetch({data:{q:this.model.report.entry.content.get("search"),action:i,field:r,app:this.model.application.get("app"),owner:this.model.application.get("owner")}}),e.preventDefault()},"click ul.fields-events > li >  a[data-field]":function(e){var t=$(e.currentTarget),n=t.data(),r=n.field,i=n.report;this.model.intentionsParser.clear({silent:!0}),this.model.intentionsParser.fetch({data:{q:this.model.report.entry.content.get("search"),action:i,field:r,value:"*",app:this.model.application.get("app"),owner:this.model.application.get("owner")}}),e.preventDefault()},"click ul.fields-numeric > li >  a[data-field]":function(e){var t=$(e.currentTarget),n=t.data(),r=n.field,i=n.report;this.model.intentionsParser.clear({silent:!0}),this.model.intentionsParser.set({visualization:n.visualization},{silent:!0}),this.model.intentionsParser.fetch({data:{q:this.model.report.entry.content.get("search"),action:i,field:r,app:this.model.application.get("app"),owner:this.model.application.get("owner")}}),e.preventDefault()},"click td.value >  a":function(e){var t=$(e.currentTarget),n=t.data();this.model.intentionsParser.clear({silent:!0}),this.model.intentionsParser.fetch({data:{q:this.model.report.entry.content.get("search"),stripReportsSearch:!1,action:n.report,field:n.field,value:n.value,app:this.model.application.get("app"),owner:this.model.application.get("owner")}}),e.preventDefault()}},render:function(){var t=this.compiledTemplate({field:this.model.summary.fields.findWhere({name:this.model.field.get("name")}),summary:this.model.summary,selectedFields:this.collection.selectedFields,i18n:r,_:e,selectableFields:this.options.selectableFields});return this.$el.html(n.prototype.template),this.$(".popdown-dialog-body").html(t),this},template:s})}),define("views/shared/eventsviewer/shared/fieldactions/TagDialog",["underscore","module","models/services/saved/FVTags","views/shared/Modal","views/shared/controls/ControlGroup","views/shared/FlashMessages"],function(e,t,n,r,i,s){return r.extend({moduleId:t.id,initialize:function(){r.prototype.initialize.apply(this,arguments),this.children.flashMessage=new s({model:this.model.tags}),this.children.field=new i({className:"field-value control-group",controlType:"Textarea",controlOptions:{modelAttribute:"name",model:this.model.tags.entry.content,save:!1,placeholder:"Optional",enabled:!1},label:e("Field Value").t()}),this.children.tags=new i({className:"tags control-group",controlType:"Textarea",controlOptions:{modelAttribute:"ui.tags",model:this.model.tags.entry.content,save:!1,placeholder:""},label:e("Tag(s)").t(),help:e("Comma or space separated list of tags.").t()})},events:$.extend({},r.prototype.events,{"click .btn-primary":function(t){var r=this.model.application.getPermissions("private"),i=n.tagStringtoArray(e.escape(this.model.tags.entry.content.get("ui.tags")));this.model.tags.resetTags(i),this.model.tags.entry.content.unset("ui.tags");if(this.model.tags.id){r={};if(!i.length){this.model.tags.destroy(),this.trigger("tags_saved"),this.hide(),t.preventDefault();return}}this.model.tags.save({},{data:r,success:function(e,t){this.trigger("tags_saved"),this.hide()}.bind(this)}),t.preventDefault()}}),render:function(){return this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(e("Create Tags").t()),this.$(r.BODY_SELECTOR).prepend(this.children.flashMessage.render().el),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL),this.$(r.BODY_FORM_SELECTOR).append(this.children.field.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.children.tags.render().el),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_CANCEL),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_SAVE),this}})}),define("views/shared/eventsviewer/shared/fieldactions/Master",["underscore","module","views/Base","models/SplunkDBase","models/services/saved/FVTags","views/shared/eventsviewer/shared/fieldactions/TagDialog"],function(e,t,n,r,i,s){return n.extend({moduleId:t.id,tagName:"li",initialize:function(){n.prototype.initialize.apply(this,arguments),this.model.tags=new i,this.fieldName=this.options.fieldName,this.fieldValue=this.options.fieldValue},events:{"click .editTag":function(e){this.trigger("hide"),this.model.tags.entry.content.set("name",this.fieldName+"="+this.fieldValue),this.children.tagDialog=new s({model:{tags:this.model.tags,application:this.model.application},onHiddenRemove:!0}),this.children.tagDialog.on("tags_saved",function(){this.model.result.setTags(this.fieldName,this.fieldValue,this.model.tags.entry.content.get("tags"))},this),this.model.tags.setId(this.model.application.get("app"),this.model.application.get("owner"),this.fieldName,this.fieldValue),this.model.clonedTags=new r,this.model.clonedTags.setFromSplunkD(this.model.tags.toSplunkD()),this.model.clonedTags.id=this.model.tags.id,this.model.clonedTags.fetch({success:function(){$("body").append(this.children.tagDialog.render().el),this.model.tags.setFromSplunkD(this.model.clonedTags.toSplunkD()),this.model.tags.entry.content.set("ui.tags",i.tagArraytoString(this.model.tags.entry.content.get("tags"))),this.children.tagDialog.show()}.bind(this),error:function(){$("body").append(this.children.tagDialog.render().el),this.model.tags.setFromSplunkD(this.model.clonedTags.toSplunkD()),this.model.tags.unset("id"),this.children.tagDialog.show()}.bind(this)}),e.preventDefault()}},render:function(){return this.el.innerHTML=this.compiledTemplate({_:e}),this},template:'                    <a href="#" class="editTag"><%- _("Edit Tags").t() %></a>            '})}),define("views/shared/eventsviewer/shared/WorkflowActions",["jquery","underscore","backbone","module","views/shared/PopTart","views/shared/eventsviewer/shared/fieldactions/Master","splunk.util","uri/route"],function(e,t,n,r,i,s,o,u){return i.extend({className:"dropdown-menu",moduleId:r.id,initialize:function(){i.prototype.initialize.apply(this,arguments),this.children.editTagsActivator=new s({model:this.model,fieldValue:this.options.fieldValue,fieldName:this.options.fieldName}),this.isFieldAction=this.options.fieldName&&this.options.fieldValue,this.children.editTagsActivator.on("hide",this.remove,this)},events:{"click a.actions":function(r){var i,s={},o=e(r.target).data("offset"),u=this.collection.at(o),a=u.entry.content.get("display_location")=="event_menu",f=e.extend({},this.model.event.toJSON()),l=this.model.searchJob.get("id"),c=this.model.result.offset(this.options.index),h=this.model.application.get("app"),p=this.model.event.get("_time");return t(u.entry.content.toJSON()).each(function(e,t){s[t]=typeof e=="string"?u.fieldSubstitute(u.systemSubstitute(e,l,c,h,p,this.options.fieldName,this.options.fieldValue),f):e},this),i=new n.Model(s),this.hide(),u.entry.content.get("type")==="link"?this.link(i):this.search(i)}},uri:function(e){return e.indexOf("/")===0?u.encodeRoot(this.model.application.get("root"),this.model.application.get("locale"))+e:e},link:function(n){var r=this.uri(n.get("link.uri"));if(n.get("link.method").toLowerCase()==="get")return n.get("link.target")==="self"?window.location.href=r:window.open(r,"_blank"),!0;var i=e('<form class="workflow-action"/>');return i.attr("target","_"+n.get("link.target")),i.attr("action",r),i.attr("method","post"),t(n.get("link.payload")).each(function(t,n){i.append(e("<input/>").attr({type:"hidden",name:n,value:t}))},this),e("body").append(i),e("form.workflow-action").submit().remove(),!1},search:function(e){var t={data:{}};o.normalizeBoolean(e.get("search.preserve_timerange"))&&(this.model.report.entry.content.get("dispatch.earliest_time")&&(t.data.earliest=this.model.report.entry.content.get("dispatch.earliest_time")),this.model.report.entry.content.get("dispatchu.latest_time")&&(t.data.latest=this.model.report.entry.content.get("dispatch.latest_time")));if(e.get("search.earliest")||e.get("search.latest"))t.data.earliest=e.get("search.earliest"),t.data.latest=e.get("search.latest");t.data.q=e.get("search.search_string");var n=u.page(this.model.application.get("root"),this.model.application.get("locale"),e.get("eai:appName"),this.model.application.get("page"),t);return e.get("search.target")==="self"?window.location.href=n:window.open(n,"_blank"),!1},render:function(){return this.$el.html(i.prototype.template_menu),this.$el.append(this.compiledTemplate({collection:this.collection,actions:this.options.actions,event:e.extend({},this.model.event.toJSON()),isField:this.isFieldAction,trim:o.smartTrim,_:t})),this.options.tags&&this.$("ul").prepend(this.children.editTagsActivator.render().el),this},template:'                <ul>                    <% _.each(actions, function(i) { %>                        <% var model = collection.at(i); %>                        <% if(model) {%>                            <li>                                <a class="actions" href="#" data-offset="<%-i%>"> <%- trim(_(model.fieldSubstitute(model.entry.content.get("label"), event)).t(), 100)  %></a>                            </li>                        <% } %>                    <% }); %>                </ul>            '})}),define("views/shared/eventsviewer/shared/TimeInfo",["underscore","jquery","module","util/time_utils","splunk.util","views/shared/PopTart","strftime"],function(e,t,n,r,i,s){return s.extend({moduleId:n.id,initialize:function(){s.prototype.initialize.apply(this,arguments)},events:{"click td > a.et-lt":function(e){var n=t(e.currentTarget),r=n.data().time;if(r==="before")this.model.report.entry.content.set("dispatch.latest_time",this.options.time);else if(r=="after")this.model.report.entry.content.set("dispatch.earliest_time",this.options.time);else{var s=parseFloat(i.getEpochTimeFromISO(this.options.time)),o=s+.001;this.model.report.entry.content.set({"dispatch.latest_time":o,"dispatch.earliest_time":s})}this.model.report.trigger("eventsviewer:drilldown"),e.preventDefault()},"click td > a.time-range":function(e){var n=t(e.currentTarget),i=r.rangeFromIsoAndOffset(this.options.time,n.data().timeUnit);this.model.report.entry.content.set({"dispatch.latest_time":i.upperRange.strftime("%s.%Q"),"dispatch.earliest_time":i.lowerRange.strftime("%s.%Q")}),this.model.report.trigger("eventsviewer:drilldown"),e.preventDefault()}},render:function(){return this.$el.html(s.prototype.template),this.$(".popdown-dialog-body").html(this.template),this},template:'                <h3>_time</h3>                <table>                    <thead>                        <tr><th>Events Before or After</th><th>Nearby Events</th></tr>                    </thead>                    <tbody>                        <tr>                            <td>                                <a class="et-lt" data-time="before" href="#">Before this time</a><br>                                <a class="et-lt" data-time="after" href="#">After this time</a><br>                                <a class="et-lt" data-time="at" href="#">At this time</a><br>                            </td>                            <td>                                <a class="time-range" data-time-unit="w" href="#">+/- 1 week</a><br>                                <a class="time-range" data-time-unit="d" href="#">+/- 1 day</a><br>                                <a class="time-range" data-time-unit="h" href="#">+/- 1 hour</a><br>                                <a class="time-range" data-time-unit="m" href="#">+/- 1 minute</a><br>                                <a class="time-range" data-time-unit="s" href="#">+/- 1 second</a><br>                                <a class="time-range" data-time-unit="ms" href="#">+/- 1 milliseconds</a><br>                            </td>                        </tr>                    </tbody>                </table>            '})}),define("collections/UIWorkflowActions",["backbone","underscore","models/UIWorkflowAction","collections/Base"],function(e,t,n,r){return r.extend({url:"/<%- locale %>/api/field/actions/<%-clientApp%>/<%-sid%>/<%-offset%>",model:n,initialize:function(){r.prototype.initialize.apply(this,arguments)},sync:function(n,r,i){return i||(i={}),i.data||(i.data={}),i.url=t(this.url).template({locale:i.data.locale||"en-US",clientApp:i.data.clientApp,sid:i.data.sid,offset:i.data.offset}),delete i.data.locale,delete i.data.clientApp,delete i.data.sid,delete i.data.offset,e.sync.call(this,n,this,i)},parse:function(e){return e.data}})}),define("views/shared/eventsviewer/shared/BaseFields",["jquery","underscore","backbone","module","views/Base","views/shared/FieldInfo","views/shared/eventsviewer/shared/WorkflowActions","views/shared/eventsviewer/shared/fieldactions/Master","views/shared/eventsviewer/shared/TimeInfo","collections/UIWorkflowActions","models/services/search/IntentionsParser","models/DateInput"],function(e,t,n,r,i,s,o,u,a,f,l,c){return i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments),this.model.intentionsParser=new l,this.model.intentionsParser.on("change",function(){this.model.report.entry.content.set("search",this.model.intentionsParser.fullSearch()),this.model.report.trigger("eventsviewer:drilldown")},this),this.model.event.on("change",this.render,this),this.collection.selectedFields.on("reset add remove",function(){this.options.idx===this.model.state.get("modalize")&&this.render()},this)},events:{"click .field-value a.f-v":function(t){var n=e(t.target),r=e.trim(n.text()),i=e.trim(n.data().fieldName);this.model.intentionsParser.clear({silent:!0}),this.model.intentionsParser.fetch({data:{q:this.model.report.entry.content.get("search"),stripReportsSearch:!1,action:"fieldvalue",field:i,value:r,app:this.model.application.get("app"),owner:this.model.application.get("owner")}}),t.preventDefault()},"click .tag":"tagClick","click .field-value .tag":"tagClick","click ._time":function(e){e.preventDefault()},"click .field-info":function(e){e.preventDefault()},"click .field-actions":function(e){e.preventDefault()},"click .event-actions":function(e){e.preventDefault()},"mousedown ._time":"openTimeInfo","mousedown .field-info":"openFieldInfo","mousedown .field-actions":"openFieldActions","mousedown .event-actions":"openEventActions","keydown ._time":function(e){e.keyCode==13&&this.openTimeInfo(e)},"keydown .field-info":function(e){e.keyCode==13&&this.openFieldInfo(e)},"keydown .field-actions":function(e){e.keyCode==13&&this.openFieldActions(e)},"keydown .event-actions":function(e){e.keyCode==13&&this.openEventActions(e)}},tagClick:function(t){var n=e(t.target),r=e.trim(n.text()),i=e.trim(n.data().taggedFieldName);this.model.intentionsParser.clear({silent:!0}),this.model.intentionsParser.fetch({data:{q:this.model.searchJob.getStrippedEventSearch(),action:"fieldvalue",field:i,value:r,app:this.model.application.get("app"),owner:this.model.application.get("owner")}}),t.preventDefault()},openTimeInfo:function(t){var n=e(t.currentTarget),r=n.data().time;this.children.time&&this.children.time.shown&&this.children.time.hide(),this.children.time=new a({model:{report:this.model.report},time:r,onHiddenRemove:!0}),e("body").append(this.children.time.render().el),this.children.time.show(n),t.preventDefault()},openFieldInfo:function(n){var r=e(n.currentTarget),i=this.model.summary.fields.findWhere({name:r.attr("data-field-name")}),o=i.get("name");if(this.children.fieldInfo&&this.children.fieldInfo.shown){this.children.fieldInfo.hide();if(this.lastMenu==o+"-field-info")return!0}i||alert(t("This event is no longer within the results window.").t()),this.children.fieldInfo=new s({model:{field:i,summary:this.model.summary,report:this.model.report,application:this.model.application},collection:{selectedFields:this.collection.selectedFields},onHiddenRemove:!0,selectableFields:this.options.selectableFields}),this.lastMenu=o+"-field-info",t.isNumber(this.model.state.get("modalize"))||this.model.state.set({modalize:this.options.idx,sleep:!0}),e("body").append(this.children.fieldInfo.render().el),this.children.fieldInfo.show(r),n.preventDefault()},openFieldActions:function(n){var r=e(n.currentTarget),i=r.attr("data-field-name"),s=e.trim(r.closest("tr").find(".f-v").text());if(this.children.fieldActions&&this.children.fieldActions.shown){this.children.fieldActions.hide();if(this.lastMenu==i+"-field-actions")return!0}this.children.fieldActions=new o({model:this.model,collection:this.collection.workflowActions,actions:this.collection.workflowActions.getFieldActions(i,this.model.event),fieldName:i,fieldValue:s,tags:!0,mode:"menu",onHiddenRemove:!0}),this.lastMenu=i+"-field-actions",t.isNumber(this.model.state.get("modalize"))||this.model.state.set({modalize:this.options.idx,sleep:!0}),e("body").append(this.children.fieldActions.render().el),this.children.fieldActions.show(r),n.preventDefault()},openEventActions:function(t){var n=e(t.currentTarget),r=this.model.result.results.indexOf(this.model.event);if(this.children.eventActions&&this.children.eventActions.shown)return this.children.eventActions.hide(),!0;this.children.eventActions=new o({model:this.model,collection:this.collection.workflowActions,actions:this.collection.workflowActions.getEventActions(this.model.event),index:r,tags:!1,mode:"menu",onHiddenRemove:!0}),e("body").append(this.children.eventActions.render().el),this.children.eventActions.show(n),t.preventDefault()},_partial:t.template('                <%  _(fields).each(function(field, i) { %>                    <% var fieldlist = m.get(field) %>                    <% if(fieldlist.length > 1){ %>                        <%  _(fieldlist).each(function(mv_field, j) { %>                            <tr>                               <% if(i==0 && j==0 && label) { %>                                   <td rowspan="<%= m.getFieldsLength(fields) %>" class="field-type"><%- label %></td>                               <% } %>                               <% if(selectableFields && j==0) { %>                                   <td rowspan="<%= fieldlist.length %>" class="col-visibility"><label class="checkbox">                                   <a href="#" data-name="Everyone.read" class="btn <%- iconVisibility ? "hide" : "show" %>-field">                                   <% if(iconVisibility) { %>                                    <i class="icon-check"></i>                                    <% } %>                                   </label></td>                               <% } %>                               <% if(j==0 && slen>0) {%>                                    <td rowspan="<%=fieldlist.length %>" class="field-key">                                        <a class="popdown-toggle field-info" href="#" data-field-name="<%- field %>">                                            <span><%- field %></span><span class="caret"></span>                                        </a>                                    </td>                               <% } else if(j==0 && slen==0) { %>                                    <td rowspan="<%=fieldlist.length %>" class="field-key">                                        <span  data-field-name="<%- field %>"><%- field %></span>                                    </td>                               <% } %>                               <td class="field-value">                                   <a data-field-name="<%- field %>"  class="f-v" href="#"><%- mv_field %></a>                                   <% var tags = r.getTags(field, mv_field); %>                                   <% if (tags.length) { %>                                       (<% _(tags).each(function(tag, idx){ %><a data-tagged-field-name="tag::<%- field %>" class="tag" href="#"><%- tag %><%if(idx!=tags.length-1){%> <%}%></a><% }); %>)                                   <% } %>                               </td>                               <td  class="actions popdown">                                       <a class="popdown-toggle field-actions" href="#" data-field-name="<%- field %>">                                           <span class="caret"></span>                                       </a>                               </td>                            </tr>                        <% }) %>                    <% } else { %>                        <tr>                           <% if(i==0 && label) { %>                               <td rowspan="<%= m.getFieldsLength(fields) %>" class="field-type"><%- label %></td>                           <% } %>                           <% if(selectableFields) { %>                               <td rowspan="<%= fieldlist.length %>" class="col-visibility"><label class="checkbox">                               <a href="#" data-name="Everyone.read" class="btn <%- iconVisibility ? "hide" : "show" %>-field">                               <% if(iconVisibility) { %>                                <i class="icon-check"></i>                                <% } %>                               </a></label></td>                           <% } %>                           <% if(slen >0) { %>                               <td class="field-key">                                   <a class="popdown-toggle field-info" href="#" data-field-name="<%- field %>">                                       <span><%- field %></span><span class="caret"></span>                                   </a>                               </td>                           <% } else { %>                                <td class="field-key">                                    <span  data-field-name="<%- field %>"><%- field %></span>                                </td>                           <% } %>                           <td class="field-value">                               <a data-field-name="<%- field %>"  class="f-v" href="#"><%- m.get(field)[0] %></a>                               <% var tags = r.getTags(field, m.get(field)); %>                               <% if (tags.length > 0) { %>                                   (<% _(tags).each(function(tag, idx){ %><a data-field-name="<%- field %>" data-tagged-field-name="tag::<%- field %>" class="tag" href="#"><%- tag %><%if(idx!=tags.length-1){%> <%}%></a><% }); %>)                               <% } %>                           </td>                           <td  class="actions">                                   <a class="popdown-toggle field-actions" href="#" data-field-name="<%- field %>">                                       <i class="icon-triangle-down-small"></i>                                   </a>                           </td>                       </tr>                   <% } %>               <% }); %>           ')})}),define("views/shared/eventsviewer/shared/EventFields",["jquery","underscore","backbone","module","views/Base","views/shared/delegates/PopdownDialog","views/shared/FieldInfo","views/shared/eventsviewer/shared/WorkflowActions","views/shared/eventsviewer/shared/fieldactions/Master","views/shared/eventsviewer/shared/BaseFields","collections/UIWorkflowActions","models/services/search/IntentionsParser"],function(e,t,n,r,i,s,o,u,a,f,l,c){return f.extend({moduleId:r.id,initialize:function(){f.prototype.initialize.apply(this,arguments),this.swappingKey=this.options.swappingKey,this.showAllLines=this.options.showAllLines,this.model.event.on("change",function(e,t){t.swap&&(this.isSwapping=!1),this.render()},this),this.model.event.on("failed-swap",function(){this.$(".event-fields-loading").text(t("We were unable to provide the correct event").t())},this),this.model.state.on("change:timeExpanded",this.render,this),this.isSwapping=!0,this.model.state.on("change:"+this.showAllLines,function(){this.isSwapping=!0},this),this.model.state.on("unmodalize"+this.options.idx,function(){this.isSwapping=!0},this),this.model.result.on(this.swappingKey,function(){this.isSwapping=!0},this)},events:e.extend({},f.prototype.events,{"click ._time-expand":function(e){this.model.state.set("timeExpanded",!this.model.state.get("timeExpanded")),e.preventDefault()},"click a.show-field":function(t){var n=e(t.currentTarget),r=e.trim(n.closest("td").siblings(".field-key").text());this.collection.selectedFields.push({name:r}),t.preventDefault()},"click a.hide-field":function(t){var n=e(t.currentTarget),r=e.trim(n.closest("td").siblings(".field-key").text());this.collection.selectedFields.remove(this.collection.selectedFields.find(function(e){return e.get("name")===r},this)),t.preventDefault()},"click a.btn.disabled":function(e){e.preventDefault()}}),setMaxWidth:function(){if(!this.el.innerHTML||!this.$el.is(":visible"))return!1;var t=e("#"+this.cid+"-styles");t&&t.remove();var n=this.$el.closest("table").parent(),r=n.width(),i=n.offset().left-n.scrollLeft(),s=20,o=this.$el.offset().left,u=r-(o-i)-s,a=(u>500?u:500)+"px";this.$("table").css("maxWidth",a)},reflow:function(){this.setMaxWidth()},render:function(){var e=this.model.event.strip(),n=t.intersection(e,this.collection.selectedFields.pluck("name")).sort(),r=t.difference(t.intersection(e,this.model.event.notSystemOrTime()),n).sort(),i=t.difference(this.model.event.time(),n).sort(),s=t.difference(i,["_time"]),o=t.difference(this.model.event.system(),n).sort();return this.$el.html(this.compiledTemplate({selectedfields:n,eventfields:r,timefields:this.model.state.get("timeExpanded")?s:[],systemfields:o,expanded:i.length===1?"":this.model.state.get("timeExpanded")?"icon-minus-circle":"icon-plus-circle",selectableFields:this.options.selectableFields,hideEventActions:this.model.searchJob.isRealtime(),r:this.model.result,m:this.model.event,slen:this.model.summary.fields.length,_partial:this._partial,isSwapping:!1,_:t})),this.setMaxWidth(),this},template:'                <% if (!isSwapping) { %>                    <% if (!hideEventActions) { %>                        <a class="btn popdown-toggle event-actions" href="#"><span><%-_("Event Actions").t()%></span><span class="caret"></span></a>                    <% } %>                    <table class="table table-condensed table-embed table-expanded table-dotted">                        <thead>                            <th class="col-field-type"><%- _("Type").t() %></th>                            <% if(selectableFields){ %> <th class="col-visibility"><label class="checkbox"><a href="#" class="btn disabled"><i class="icon-check"></i></a></label></th><% } %>                            <th class="col-field-name"><%- _("Field").t() %></th>                            <th class="col-field-value"><%- _("Value").t() %></th>                            <th class="col-field-action"><%- _("Actions").t() %></th>                        </thead>                        <tbody>                        <%= _partial({fields: selectedfields, slen: slen, iconVisibility: true, m: m, r:r, label: _("Selected").t(), selectableFields: selectableFields}) %>                        <%= _partial({fields: eventfields, slen: slen, iconVisibility: false, m: m, r:r, label: _("Event").t(), selectableFields: selectableFields}) %>                        <tr>                            <td rowspan="<%- timefields.length+1 %>" class="field-type"><%- _("Time").t() %><a class="_time-expand <%= expanded %>" href=""></a></td>                            <% if (selectableFields) { %>                                <td></td>                            <% } %>                           <td class="time">                               <a class="popdown-toggle _time" href="#" data-time="<%- m.get("_time")[0] %>">                                   <span>_time</span><span class="caret"></span>                               </a>                           </td>                           <td class="field-value f-v"><%- m.get("_time")[0] %>                               <% var tags = r.getTags("_time", m.get("_time")); %>                               <% if (tags.length > 0) { %>(<% _(tags).each(function(tag, idx){ %><a data-field-name="_time" data-tagged-field-name="tag::_time" class="tag" href="#"><%- tag %><%if(idx!=tags.length-1){%> <%}%></a><% }); %>)<% } %>                           </td>                           <td class="actions"></td>                        </tr>                        <%= _partial({fields: timefields, slen: slen, iconVisibility: false, m: m, r:r, label: null, selectableFields: selectableFields}) %>                        <%= _partial({fields: systemfields, slen: slen, iconVisibility: false, m: m, r:r, label: _("Default").t(), selectableFields: selectableFields}) %>                        </tbody>                    </table>                <% } else { %>                    <div class="event-fields-loading">Loading...</div>                <% } %>            '})}),define("keyboard/SearchModifier",["underscore"],function(e){function t(n){n||(n={});var r=n.defaults||e.extend({},t.defaults),i=n.custom||e.extend([],t.custom);this.map=this.parse(r,i)}return t.prototype={isNegation:function(e){return!!e[this.map.negate]},isReplacement:function(e){return!!e[this.map.replace]},parse:function(e,t){var n=navigator.userAgent||"",r=null;for(var i=t.length-1;i>-1;i--){var s=t[i];n.search(s.userAgentRex)!=-1&&(r=s)}return r||(r=e),r}},t.custom=[{userAgentRex:/Macintosh/,negate:"altKey",replace:"metaKey"},{userAgentRex:/Linux.*Chrome/,negate:"ctrlKey",replace:"shiftKey"},{userAgentRex:/Linux/,negate:"ctrlKey",replace:"metaKey"},{userAgentRex:/Windows/,negate:"altKey",replace:"ctrlKey"}],t.defaults={userAgentRex:/.*/,negate:"altKey",replace:"metaKey"},t}),define("views/shared/JSONTree",["jquery","underscore","module","views/Base"],function(e,t,n,r){return r.extend({moduleId:n.id,className:"json-tree",initialize:function(){r.prototype.initialize.apply(this,arguments);var t={isValidJSON:!1,json:"{}"};this.options=e.extend(!0,t,this.options),this.setJSON(this.options.json,this.options.isValidJSON)},setJSON:function(e,t){var n;if(t)return!(this._json=e);typeof e!="string"&&(e=JSON.stringify(e));try{n=JSON.parse(e)}catch(r){}this._json=n},isJSON:function(){return!!this._json},events:{"click .jsexpands":function(t){var n=e(t.currentTarget);this.trigger("interaction"),this.interacted=!0,n.removeClass("jsexpands").addClass("jscollapse").text("[-]"),n.next().show(),t.preventDefault()},"click .jscollapse":function(t){var n=e(t.currentTarget);this.trigger("interaction"),this.interacted=!0,n.removeClass("jscollapse").addClass("jsexpands").text("[+]"),n.next().hide(),t.preventDefault()}},printJSON:function(e,n,r){var i=n+2,s=[],o=i/2,u=typeof e;if(!t.isObject(e))return[r._type({type:u,obj:e})];var a=!(e instanceof Array),f=a?t.keys(e).sort():e.sort();s.push(r._bracket({isObj:a})),f.length>0&&s.push(r._state({expands:!(o<2),level:o}).trim()),s.push(o!==1?'<span style="display: none;">':"<span>");for(var l=0;l<f.length;l++)s.push(r._indent({newIndent:i})),a?s.push(r._key({val:f[l],level:o,pjson:r.printJSON,obj:e,nIndent:i,view:r})):s.push(r.printJSON(f[l],i,r));return s.push(r._closeIndent({closingIndent:i-1}),r._closeBracket({isObj:a})),t.flatten(s).join("")},render:function(){return this.interacted||this.$el.html(this.printJSON(this._json,0,this)),this},_type:t.template('<span class="t <%- type %>"><%- obj %></span>'),_bracket:t.template("<span><%if(isObj){%>{<%}else{%>[<%}%></span>"),_state:t.template('                <% if(expands) { %>                    <a class="jsexpands level-<%-level%>">[+]</a>                <% } else { %>                    <a class="jscollapse level-<%-level%>">[-]</a>                <% } %>            '),_indent:t.template('<br><span><%-Array(newIndent+1).join(" ")%></span>'),_key:t.template('<span class="key level-<%-level%>"><span class="key-name"><%-val%></span>:<%= pjson(obj[val], nIndent, view) %></span>'),_closeIndent:t.template('</span><br><span class="level-<%-closingIndent%>"><%-Array(closingIndent).join(" ")%>'),_closeBracket:t.template("<%if(isObj){ %><span>}</span><%}else{%><span>]</span><%}%></span>")})}),define("views/shared/eventsviewer/shared/RawField",["underscore","module","keyboard/SearchModifier","splunk.util","views/Base","models/services/search/IntentionsParser","models/services/search/jobs/Result","views/shared/JSONTree"],function(e,t,n,r,i,s,o,u){return i.extend({moduleId:t.id,tagName:"div",initialize:function(){i.prototype.initialize.apply(this,arguments),this.keyboardSearchModifier=new n,this.rowExpanded="rowExpanded"+this.options.idx,this.jsonInteraction="interaction"+this.options.idx,this.isSyntaxHighlighted="isSyntaxHighlighted"+this.options.idx,this.showAllLines="showAllLines"+this.options.idx,this.children.json=new u({json:this.model.event.rawToText()}),this._isJSON=this.children.json.isJSON(),this.model.state.set(this.isSyntaxHighlighted,this._isJSON),this.model.state.on("change:"+this.isSyntaxHighlighted,this.render,this),this.model.intentionsParser=new s,this.model.intentionsParser.on("change",function(){this.model.report.entry.content.set("search",this.model.intentionsParser.fullSearch()),this.model.report.trigger("eventsviewer:drilldown")},this),this.model.resultWorking=new o,this.model.resultWorking.results.on("reset",function(){var e=this.model.resultWorking.results.at(0);e&&this.model.event.replace(e.toJSON())},this),this.model.event.on("change",function(){this.children.json.setJSON(this.model.event.rawToText(),!1),this.render()},this),this.model.report.entry.content.on("change:display.events.type",function(){var e=r.normalizeBoolean(this.model.report.entry.content.get("display.events.list.wrap")),t=this.$(".raw-event");t.removeClass("wrap"),(this.model.report.entry.content.get("display.events.type")==="raw"||e)&&t.addClass("wrap")},this),this.model.report.entry.content.on("change:display.events.list.wrap",function(){var e=r.normalizeBoolean(this.model.report.entry.content.get("display.events.list.wrap")),t=this.$(".raw-event");e&&!t.hasClass("wrap")?t.addClass("wrap"):t.removeClass("wrap")},this),this.children.json.on("interaction",function(){this.model.state.get(this.rowExpanded)||this.model.state.trigger(this.jsonInteraction)},this)},visibility:function(){this.model.state.get(this.isSyntaxHighlighted)?this.$(".toggle-raw-json").text(e("Show as raw text").t()):this.$(".toggle-raw-json").text(e("Show syntax highlighted").t())},events:{"mouseover .t":function(e){var t=this.getSegmentParent(e.target);t.addClass("h"),e.preventDefault()},"mouseout .t":function(e){var t=this.getSegmentParent(e.target);t.removeClass("h")},"click .t":function(e){var t=this.getSegmentRoot($(e.currentTarget)),n;return t||(t=this.getSegmentParent(e.currentTarget)),n={value:t.text(),app:this.model.application.get("app"),owner:this.model.application.get("owner"),stripReportsSearch:!1},this.model.intentionsParser.clear({silent:!0}),t.hasClass("a")?n=$.extend(n,{q:this.model.report.entry.content.get("search"),action:"removeterm"}):n=$.extend(n,{q:this.keyboardSearchModifier.isReplacement(e)?"*":this.model.report.entry.content.get("search"),action:"addterm",negate:this.keyboardSearchModifier.isNegation(e)}),this.model.intentionsParser.fetch({data:n}),!1},"click .hideinline":function(e){this.model.state.set(this.showAllLines,!1),e.preventDefault()},"click .showinline":function(e){this.model.state.set(this.showAllLines,!0),e.preventDefault()},"click .toggle-raw-json":function(e){this.model.state.set(this.isSyntaxHighlighted,!this.model.state.get(this.isSyntaxHighlighted)),e.preventDefault()}},getSegmentParent:function(e){var t=e.parentNode;return t.childNodes[t.childNodes.length-1]==e&&$(t).hasClass("t")&&(e=t),$(e)},getSegmentRoot:function(e){return e.hasClass("event")?void 0:e.hasClass("a")?e:this.getSegmentRoot(e.parent())},render:function(){var t=!0,n=this.model.report.entry.content,i=n.get("display.events.type"),s=parseInt(this.model.event.get("_fulllinecount"),10),o={decoration_audit_valid:{msg:"Valid",label:"label-success",icon:"icon-check-circle"},decoration_audit_gap:{msg:"Gap",label:"label-warning",icon:"icon-minus-circle"},decoration_audit_tampered:{msg:"Tampered!",label:"label-important",icon:"icon-alert-circle"},decoration_audit_cantvalidate:{msg:"Can't validate!",label:"label-info",icon:"icon-question-circle"}};i==="list"&&(t=r.normalizeBoolean(n.get("display.events.list.wrap"))),this.el.innerHTML=this.compiledTemplate({_:e,isTable:this.model.report.entry.content.get("display.events.type")==="table",isJSON:this._isJSON,model:this.model.event,linecount:s,wrap:t,expanded:this.model.state.get(this.showAllLines),decorations:o,rawTextOnly:this.options.noSegmentation});var u=this.$(".raw-event");if(!this.options.noSegmentation&&this._isJSON)if(this.model.state.get(this.isSyntaxHighlighted))this.$(".json-event").append(this.children.json.render().el);else{var a=this.model.event.getRaw();u.removeClass("raw-event").hide(),u[0].innerHTML=a,u.addClass("raw-event").show()}else this.options.noSegmentation?this.$(".raw-event").append(e.escape(this.model.event.rawToText())):this.$(".raw-event").append(this.model.event.getRaw());return this.visibility(),this},template:'                <% if(model.has("_decoration") && decorations[model.get("_decoration")]) { %>                    <% var decoration = decorations[model.get("_decoration")]; %>                    <span class="audit label  <%- decoration.label %>"><i class="<%- decoration.icon %>"></i> <%- decoration.msg %></span>                <% } %>                <pre class="json-event"></pre>                <div class="raw-event normal <% if(wrap){ %> wrap <% } %>"></div>                <% if(isJSON && !isTable) { %><a href="#" class="toggle-raw-json"><%- _("Show as raw text").t() %></a> <% } %>                <% if (expanded) { %>                    <a href="#" class="hideinline">Collapse</a>                <% } else if (model.isTruncated()) { %>                    <a href="#" class="showinline">Show all <%= linecount %> lines</a>                <% } %>            '})}),define("views/shared/eventsviewer/raw/body/Row",["jquery","underscore","backbone","module","views/Base","views/shared/eventsviewer/shared/EventFields","views/shared/eventsviewer/shared/RawField"],function(e,t,n,r,i,s,o){return i.extend({moduleId:r.id,tagName:"tr",initialize:function(){i.prototype.initialize.apply(this,arguments),this.rowExpanded="rowExpanded"+this.options.idx,this.jsonInteraction="interaction"+this.options.idx,this.swappingKey="swapResult"+this.options.idx,this.showAllLines="showAllLines"+this.options.idx,this.pendingRemove="pendingRemove"+this.options.idx,this.model.renderer=this.collection.eventRenderers.getRenderer(this.model.event.get("eventtype")),this.children.raw=new o({model:{event:this.model.event,state:this.model.state,result:this.model.result,report:this.model.report,searchJob:this.model.searchJob,application:this.model.application},idx:this.options.idx}),this.model.state.on("change:"+this.rowExpanded,this.visibility,this),this.model.state.on(this.jsonInteraction,this.clickToExpandRow,this),this.model.state.on("change:"+this.showAllLines,function(){this.clickToExpandRow()},this),this.model.state.on("unmodalize"+this.options.idx,function(){this.clickToExpandRow(!0)},this),this.model.result.on("tags-updated",function(){this.model.state.get(this.rowExpanded)&&this.render()},this),this.model.report.entry.content.on("change:display.prefs.events.offset",this.collapseState,this)},events:{"click td.expands":function(e){this.eventFieldsFactory();if(this.model.state.get(this.pendingRemove)){this.model.state.get(this.rowExpanded)?this.collapseState():this.expandState(),e.preventDefault();return}this.clickToExpandRow(!0),e.preventDefault()}},eventFieldsFactory:function(){this.children.eventFields&&this.children.eventFields.remove(),this.children.eventFields=new s({model:{event:this.model.event,state:this.model.state,result:this.model.result,summary:this.model.summary,application:this.model.application,report:this.model.report,searchJob:this.model.searchJob},collection:{selectedFields:this.collection.selectedFields,workflowActions:this.collection.workflowActions},selectableFields:this.options.selectableFields,allowRowExpand:this.options.allowRowExpand,idx:this.options.idx,swappingKey:this.swappingKey,showAllLines:this.showAllLines}),this.$(".event").find(this.children.raw.el).after(this.children.eventFields.render().el)},clickToExpandRow:function(e){var t={index:this.options.idx,rtindex:this.model.result.results.length-this.options.idx-1,showAllLines:this.model.state.get(this.showAllLines)};this.children.eventFields||this.eventFieldsFactory(),this.model.state.get(this.rowExpanded)?this.model.state.get(this.rowExpanded)&&e?(this.model.state.unset(this.showAllLines,{silent:!0}),t.showAllLines=this.model.state.get(this.showAllLines),this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t),this.collapseState()):(this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t)):(this.expandState(),this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t)),this.model.state.unset("timeExpanded",{silent:!0})},expandState:function(){this.model.state.set(this.rowExpanded,!0),this.model.state.set("sleep",!0)},collapseState:function(){this.model.state.unset("modalize"),this.model.state.unset(this.rowExpanded),this.model.state.unset("sleep")},debouncedRemove:function(){return this.model.state.set(this.pendingRemove,!0),i.prototype.debouncedRemove.apply(this,arguments),this},visibility:function(){var e=this.$("td.expands > a > i").removeClass("icon-triangle-right-small icon-triangle-down-small");this.model.state.get(this.rowExpanded)&&this.options.allowRowExpand?(e.addClass("icon-triangle-down-small"),this.eventFieldsFactory()):(e.addClass("icon-triangle-right-small"),this.children.eventFields&&this.children.eventFields.remove()),this.children.raw.visibility(),this.reflow()},render:function(){var e=this.el;return this.$el.find("> td").each(function(t,n){e.removeChild(n)}),this.$el.append(this.compiledTemplate({expanded:this.model.state.get(this.rowExpanded),colorClass:this.model.renderer?this.model.renderer.entry.content.get("css_class"):"",allowRowExpand:this.options.allowRowExpand})),this.$(".event").append(this.children.raw.render().el),this.visibility(),this},reflow:function(){this.model.state.get(this.rowExpanded)?this.model.state.set("modalize",this.options.idx):this.model.state.unset("modalize")},template:'                <% if (allowRowExpand) { %>                    <td class="expands <%- colorClass %>">                        <a href="#"><i class="icon-triangle-<%- expanded ? "down" : "right" %>-small"></i></a>                    </td>                <% } %>                <td class="event"></td>            '})}),define("views/shared/eventsviewer/raw/body/Master",["underscore","module","models/Base","views/Base","views/shared/eventsviewer/raw/body/Row","util/console"],function(e,t,n,r,i,s){return r.extend({moduleId:t.id,tagName:"tbody",type:"raw",initialize:function(){r.prototype.initialize.apply(this,arguments),this.model.result.results.on("reset",this.debouncedRender,this),this.model.report.entry.content.on("change:display.events.rowNumbers",this.debouncedRender,this),this.model.state.on("change:sleep",function(){this.model.state.get("sleep")?this.sleep({lite:!0}):this.wake({lite:!0})},this)},sleep:function(e){return e&&e.lite?this.awake=!1:r.prototype.sleep.apply(this),this},wake:function(e){return e&&e.lite?(this.awake=!0,this.touch&&this.render()):r.prototype.wake.apply(this),this},isSelected:function(){return this.model.report.entry.content.get("display.events.type")===this.type},cleanup:function(){this.$el.empty(),e.chain(this.children).values().invoke("debouncedRemove",{detach:!0}).values(),this.children={}},render:function(){this.trigger("rows:pre-remove"),this.cleanup();var t=document.createDocumentFragment(),n=this.model.searchJob?this.model.searchJob.entry.content.get("isRealTimeSearch"):!1,r=n?this.model.result.results.reverse({mutate:!1}):this.model.result.results.models;return s.debug("Events Raw: rendering",r.length,"events",n?"in real-time mode":"in historical mode"),e.each(r,function(e,n){this.children["row_"+n]=new i({model:{event:e,result:this.model.result,report:this.model.report,state:this.model.state,summary:this.model.summary,application:this.model.application,searchJob:this.model.searchJob},collection:{workflowActions:this.collection.workflowActions,eventRenderers:this.collection.eventRenderers,selectedFields:this.collection.selectedFields},idx:n,selectableFields:this.options.selectableFields,allowRowExpand:this.options.allowRowExpand}),t.appendChild(this.children["row_"+n].render().el)},this),this.el.appendChild(t),e(this.model.state.toJSON()).each(function(e,t){t.indexOf("pendingRemove")===0&&this.model.state.unset(t)},this),this.trigger("rows:added"),this}})}),define("views/shared/eventsviewer/raw/Master",["jquery","underscore","backbone","module","models/Base","views/Base","views/shared/delegates/Modalize","views/shared/eventsviewer/shared/TableHead","views/shared/eventsviewer/raw/body/Master"],function(e,t,n,r,i,s,o,u,a){return s.extend({className:"scrolling-table-wrapper",moduleId:r.id,initialize:function(){s.prototype.initialize.apply(this,arguments),this.model.state=this.model.state||new i,this.children.modalize=new o({el:this.el,tbody:"> table > tbody"}),this.children.head=new u({labels:["Event"],allowRowExpand:this.options.allowRowExpand,allowLineNum:!1}),this.children.body=new a({model:{result:this.model.result,state:this.model.state,summary:this.model.summary,searchJob:this.model.searchJob,report:this.model.report,application:this.model.application},collection:{workflowActions:this.collection.workflowActions,eventRenderers:this.collection.eventRenderers,selectedFields:this.collection.selectedFields},selectableFields:this.options.selectableFields,allowRowExpand:this.options.allowRowExpand});var e=t.debounce(this.modalize);this.model.state.on("change:modalize",e,this),this.collection.selectedFields.on("reset add remove",e,this),this.children.modalize.on("unmodalize",function(e){this.model.state.trigger("unmodalize"+e)},this),this.children.body.on("rows:pre-remove",function(){this.$el.css("minHeight",this.$el.height())},this),this.children.body.on("rows:added",function(){this.$el.css("minHeight","")},this)},modalize:function(){this.children.modalize.show(this.model.state.get("modalize"))},render:function(){return this.$el.html(this.template),this.$("> table.events-results").append(this.children.head.render().el),this.$("> table.events-results").append(this.children.body.render().el),this},template:'                <table class="table table-chrome table-row-expanding events-results events-results-table"></table>            '})}),define("views/shared/TableHead",["underscore","backbone","module","views/Base"],function(e,t,n,r){return r.extend({moduleId:n.id,tagName:"thead",initialize:function(){r.prototype.initialize.apply(this,arguments);var t={columns:[]};e.defaults(this.options,t),this.model.on("change:sortKey change:sortDirection",this.debouncedRender,this)},events:{"click th":function(e){var t=$(e.currentTarget),n=t.attr("data-key"),r=t.hasClass("asc")?"desc":"asc";if(!n)return!0;this.model.set({sortKey:n,sortDirection:r}),e.preventDefault()},"click th > a":function(e){e.preventDefault()}},render:function(){var t=this.compiledTemplate({_:e,columns:this.options.columns,model:this.model});return this.$el.html(t),this},template:'                <tr class="">                    <% _.each(columns, function(value, sortKey) { %>                        <% var sortableClassName = (value.sortKey) ? "sorts" : "" %>                        <% var activeClassName = model.get("sortKey") && value.sortKey==model.get("sortKey") ? "active " + model.get("sortDirection") : "" %>                        <th data-key="<%- value.sortKey || "" %>" class="<%- sortableClassName %> <%- activeClassName %> <%- value.className || "" %>" <%- value.colSpan ? "colspan=" + value.colSpan : "" %> >                        <% if (value.html) { %>                            <%= value.html %>                        <% } else if (value.sortKey) { %>                            <a href="#"><%- value.label %><i class="icon-sorts <%- activeClassName %>"></i></a>                        <% } else { %>                            <%- value.label %>                        <% } %>                        </th>                    <% }) %>                </tr>            '})}),define("views/shared/eventsviewer/list/body/row/SelectedFields",["jquery","underscore","backbone","module","views/Base","views/shared/delegates/Popdown","views/shared/FieldInfo","views/shared/eventsviewer/shared/WorkflowActions","views/shared/eventsviewer/shared/BaseFields"],function(e,t,n,r,i,s,o,u,a){return a.extend({moduleId:r.id,initialize:function(){a.prototype.initialize.apply(this,arguments),this.rowExpanded="rowExpanded"+this.options.idx},render:function(){var e=this.model.event.strip(),n=t.intersection(e,this.collection.selectedFields.pluck("name")).sort();return this.$el.html(this.compiledTemplate({selectedfields:n,selectableFields:this.options.selectableFields,m:this.model.event,slen:this.model.summary.fields.length,r:this.model.result,_partial:this._partial,_condensedSelectedFields:this._condensedSelectedFields,selected:n.length,_:t})),this},_condensedSelectedFields:t.template('                <ul class="condensed-selected-fields">                <%  _(fields).each(function(field, i) { %>                    <% var values = m.get(field) %>                    <li>                        <% _(values).each(function(value, idx) { %>                            <span class="field"><%- field %> =</span>                            <span class="field-value"><a class="f-v" data-field-name="<%-field %>" title="<%= value ? value : "&nbsp;"%>"><% if(value) {%><%- value %><% } else { %>&nbsp;<% } %></a></span>                            <% var tags = r.getTags(field, value); %>                            <% if (tags.length) { %>                                  <% _(tags).each(function(tag, idx){ %><a data-tagged-field-name="tag::<%- field %>" class="tag" href="#"><%- tag %>                                        <%if(idx!=tags.length-1){%> <%}%>                                    </a><% }); %>                            <% } %>                        <% }) %>                    </li>                <% }) %>              </ul>            '),_noncondensedSelectedFields:t.template('                <table class="table table-condensed table-embed outer-template table-dotted">                    <tbody>                        <!-- FIXME: this should be inside the row below -->                        <tr class="row-more-fields">                            <td></td>                            <td></td>                            <td></td>                            <td class="col-more-fields" rowspan="4">                                <a href="#" class="more-fields"><%- selected %> of <%- total %> fields</a>                            </td>                        </tr>                        <%= _partial({fields: selectedfields, slen: slen, m: m, r:r, label: void(0), selectableFields: false}) %>                    </tbody>                </table>            '),template:"                <% if (selected) { %>                    <%= _condensedSelectedFields({ fields: selectedfields, m: m, r:r, _:_ }) %>                <% } %>           "})}),define("views/shared/eventsviewer/list/body/row/Master",["jquery","underscore","backbone","module","views/Base","views/shared/TableHead","views/shared/eventsviewer/list/body/row/SelectedFields","views/shared/eventsviewer/shared/EventFields","views/shared/eventsviewer/shared/RawField","splunk.util"],function(e,t,n,r,i,s,o,u,a,f){return i.extend({moduleId:r.id,tagName:"tr",initialize:function(){i.prototype.initialize.apply(this,arguments),this.rowExpanded="rowExpanded"+this.options.idx,this.jsonInteraction="interaction"+this.options.idx,this.swappingKey="swapResult"+this.options.idx,this.showAllLines="showAllLines"+this.options.idx,this.pendingRemove="pendingRemove"+this.options.idx,this.model.renderer=this.collection.eventRenderers.getRenderer(this.model.event.get("eventtype")),this.children.raw=new a({model:{event:this.model.event,state:this.model.state,result:this.model.result,report:this.model.report,searchJob:this.model.searchJob,application:this.model.application},collection:{eventRenderers:this.collection.eventRenderers},idx:this.options.idx}),this.children.selectedFields=new o({model:{event:this.model.event,state:this.model.state,result:this.model.result,summary:this.model.summary,application:this.model.application,report:this.model.report,searchJob:this.model.searchJob},collection:{selectedFields:this.collection.selectedFields,workflowActions:this.collection.workflowActions},idx:this.options.idx,selectableFields:this.options.selectableFields}),this.model.state.on("change:"+this.rowExpanded,this.visibility,this),this.model.state.on(this.jsonInteraction,this.clickToExpandRow,this),this.model.state.on("change:"+this.showAllLines,function(){this.clickToExpandRow()},this),this.model.state.on("unmodalize"+this.options.idx,function(){this.clickToExpandRow(!0)},this),this.model.result.on("tags-updated",function(){this.model.state.get(this.rowExpanded)&&this.render()},this),this.model.report.entry.content.on("change:display.prefs.events.offset",this.collapseState,this)},events:{"click td.expands":function(e){this.eventFieldsFactory();if(this.model.state.get(this.pendingRemove)){this.model.state.get(this.rowExpanded)?this.collapseState():this.expandState(),e.preventDefault();return}this.clickToExpandRow(!0),e.preventDefault()},"keyup ._time":function(t){t.preventDefault(),t.which===13&&this.drilldown(e(t.currentTarget).find("span.formated-time"))},"click .formated-time":function(t){t.preventDefault(),this.drilldown(e(t.currentTarget))}},drilldown:function(e){var t=f.getEpochTimeFromISO(e.data().timeIso);this.model.report.entry.content.set({"dispatch.earliest_time":t,"dispatch.latest_time":""+(parseFloat(t)+1)}),this.model.report.trigger("eventsviewer:drilldown")},eventFieldsFactory:function(){this.children.eventFields&&this.children.eventFields.remove(),this.children.eventFields=new u({model:{event:this.model.event,state:this.model.state,result:this.model.result,summary:this.model.summary,application:this.model.application,report:this.model.report,searchJob:this.model.searchJob},collection:{selectedFields:this.collection.selectedFields,workflowActions:this.collection.workflowActions},selectableFields:this.options.selectableFields,allowRowExpand:this.options.allowRowExpand,idx:this.options.idx,swappingKey:this.swappingKey,showAllLines:this.showAllLines}),this.$(".event").find(this.children.raw.el).after(this.children.eventFields.render().el)},clickToExpandRow:function(e){var t={index:this.options.idx,rtindex:this.model.result.results.length-this.options.idx-1,showAllLines:this.model.state.get(this.showAllLines)};this.children.eventFields||this.eventFieldsFactory(),this.model.state.get(this.rowExpanded)?this.model.state.get(this.rowExpanded)&&e?(this.model.state.unset(this.showAllLines,{silent:!0}),t.showAllLines=this.model.state.get(this.showAllLines),this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t),this.collapseState()):(this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t)):(this.expandState(),this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t)),this.model.state.unset("timeExpanded",{silent:!0})},expandState:function(){this.model.state.set(this.rowExpanded,!0),this.model.state.set("sleep",!0)},collapseState:function(){this.model.state.unset("modalize"),this.model.state.unset(this.rowExpanded),this.model.state.unset("sleep")},debouncedRemove:function(){return this.model.state.set(this.pendingRemove,!0),i.prototype.debouncedRemove.apply(this,arguments),this},visibility:function(){var e=this.$("td.expands > a > i").removeClass("icon-triangle-right-small icon-triangle-down-small");this.model.state.get(this.rowExpanded)&&this.options.allowRowExpand?(e.addClass("icon-triangle-down-small"),this.eventFieldsFactory()):(e.addClass("icon-triangle-right-small"),this.children.selectedFields.wake().$el.css("display",""),this.children.eventFields&&this.children.eventFields.remove()),this.children.raw.visibility(),this.reflow()},render:function(){var t=this.el;return this.$el.find("> td").each(function(e,n){t.removeChild(n)}),this.$el.append(this.compiledTemplate({$:e,event:this.model.event,lineNum:this.options.lineNum,application:this.model.application,expanded:this.model.state.get(this.rowExpanded),formattedTime:this.model.event.formattedTime(),colorClass:this.model.renderer?this.model.renderer.entry.content.get("css_class"):"",allowRowExpand:this.options.allowRowExpand})),this.$(".event").append(this.children.raw.render().el),this.$(".event").append(this.children.selectedFields.render().el),this.visibility(),this},reflow:function(){this.model.state.get(this.rowExpanded)?this.model.state.set("modalize",this.options.idx):this.model.state.unset("modalize"),i.prototype.reflow.apply(this,arguments)},template:'                <% if (allowRowExpand) { %>                <td class="expands <%- colorClass %>">                    <a href="#"><i class="icon-triangle-<%- expanded ? "down" : "right" %>-small"></i></a>                </td>                <% } %>                <td class="line-num"><span><%- lineNum %></span></td>                <td class="_time" tabindex="0">                    <span class="formated-time" data-time-iso="<%- event.get("_time") %>">                    <% if(application.get("locale").indexOf("en") > -1){ %>                         <span><%- $.trim(formattedTime.slice(0, formattedTime.indexOf(" "))) %></span>                         <br>                         <span><%- $.trim(formattedTime.slice(formattedTime.indexOf(" "))) %></span>                    <% } else { %>                         <%- formattedTime %>                    <% } %>                    </span>                </td>                <td class="event"></td>            '})}),define("views/shared/eventsviewer/list/body/Master",["module","underscore","models/Base","views/Base","views/shared/eventsviewer/list/body/row/Master","util/console"],function(e,t,n,r,i,s){return r.extend({moduleId:e.id,tagName:"tbody",type:"list",initialize:function(){r.prototype.initialize.apply(this,arguments),this.model.result.results.on("reset",this.debouncedRender,this),this.model.state.on("change:sleep",function(){this.model.state.get("sleep")?this.sleep({lite:!0}):this.wake({lite:!0})},this)},sleep:function(e){return e&&e.lite?this.awake=!1:r.prototype.sleep.apply(this),this},wake:function(e){return e&&e.lite?(this.awake=!0,this.touch&&this.render()):r.prototype.wake.apply(this),this},isSelected:function(){return this.model.report.entry.content.get("display.events.type")===this.type},cleanup:function(){t.chain(this.children).values().invoke("debouncedRemove",{detach:!0}).values(),this.children={}},render:function(){this.trigger("rows:pre-remove"),this.cleanup();var e=document.createDocumentFragment(),n=this.model.searchJob.entry.content.get("isRealTimeSearch"),r=n?this.model.result.results.reverse({mutate:!1}):this.model.result.results.models;return s.debug("Events Lister: rendering",r.length,"events",n?"in real-time mode":"in historical mode"),t.each(r,function(t,n){var r,s="row_"+n;this.model.searchJob.entry.content.get("isRealTimeSearch")?r=this.model.result.endOffset()-n:r=this.model.result.get("init_offset")+n+1,this.children[s]=new i({lineNum:r,model:{state:this.model.state,event:t,result:this.model.result,summary:this.model.summary,report:this.model.report,application:this.model.application,searchJob:this.model.searchJob},collection:{selectedFields:this.collection.selectedFields,eventRenderers:this.collection.eventRenderers,workflowActions:this.collection.workflowActions},idx:n,selectableFields:this.options.selectableFields,allowRowExpand:this.options.allowRowExpand}),e.appendChild(this.children[s].render().el)},this),this.el.appendChild(e),t(this.model.state.toJSON()).each(function(e,t){t.indexOf("pendingRemove")===0&&this.model.state.unset(t)},this),this.trigger("rows:added"),this}})}),define("views/shared/eventsviewer/list/Master",["underscore","module","models/Base","splunk.i18n","util/time_utils","views/Base","views/shared/delegates/Modalize","views/shared/delegates/TableDock","views/shared/eventsviewer/shared/TableHead","views/shared/eventsviewer/list/body/Master","splunk.util"],function(e,t,n,r,i,s,o,u,a,f,l){return s.extend({moduleId:t.id,className:"scrolling-table-wrapper",initialize:function(){s.prototype.initialize.apply(this,arguments),this.model.state=this.model.state||new n,this.children.modalize=new o({el:this.el,tbody:"> table > tbody"}),this.children.head=new a({model:this.model.report,labels:["Time","Event"],allowRowExpand:this.options.allowRowExpand}),this.children.body=new f({model:{result:this.model.result,summary:this.model.summary,state:this.model.state,searchJob:this.model.searchJob,report:this.model.report,application:this.model.application},collection:{selectedFields:this.collection.selectedFields,eventRenderers:this.collection.eventRenderers,workflowActions:this.collection.workflowActions},selectableFields:this.options.selectableFields,allowRowExpand:this.options.allowRowExpand}),this.options.headerMode==="dock"&&(this.children.tableDock=new u({el:this.el,offset:36,defaultLayout:"fixed"}));var t=e.debounce(this.modalize);this.model.state.on("change:modalize",t,this),this.collection.selectedFields.on("reset add remove",t,this),this.model.report.entry.content.on("change:display.events.rowNumbers",function(){this.$("table:not(.table-embed)").toggleClass("hide-line-num"),this.deferUpdateDock()},this),this.model.report.entry.content.on("change:display.events.list.wrap",function(){this.deferUpdateDock()},this),this.model.result.results.on("reset",function(){e.isNumber(this.model.state.get("modalize"))||this.deferUpdateDock()},this),this.children.modalize.on("unmodalize",function(e){this.model.state.trigger("unmodalize"+e),this.children.tableDock&&this.children.tableDock.enable()},this),this.model.state.on("change:modalize",function(t){this.children.tableDock&&(e.isNumber(t.get("modalize"))?this.children.tableDock.disable():this.children.tableDock.enable())},this),this.children.body.on("rows:pre-remove",function(){this.$el.css("minHeight",this.$el.height())},this),this.children.body.on("rows:added",function(){this.$el.css("minHeight","")},this)},remove:function(){s.prototype.remove.apply(this,arguments),$(window).off("."+this.cid)},modalize:function(){this.children.modalize.show(this.model.state.get("modalize")),this.model.state.get("modalize")&&this.children.tableDock&&this.children.tableDock.disable()},deferUpdateDock:function(){this.children.tableDock&&e.defer(this.children.tableDock.update.bind(this.children.tableDock))},render:function(){return this.$el.html(this.compiledTemplate({hidelinenums:!l.normalizeBoolean(this.model.report.entry.content.get("display.events.rowNumbers")),cid:this.cid})),this.$("> table.events-results").append(this.children.head.render().el),this.$("> table.events-results").append(this.children.body.render().el),this},reflow:function(){this.children.tableDock&&this.children.tableDock.update()},template:'                <table class="table table-chrome <% if(hidelinenums){ %> hide-line-num <% } %> table-row-expanding events-results events-results-table" id="<%= cid %>-table"></table>            '})}),define("views/shared/eventsviewer/table/TableHead",["underscore","module","views/Base","splunk.util","helpers/user_agent"],function(e,t,n,r,i){return n.extend({moduleId:t.id,tagName:"thead",initialize:function(){n.prototype.initialize.apply(this,arguments),this.collection.intersectedFields.on("reset",this.render,this),this.model.report.entry.content.on("change:display.events.rowNumbers change:display.events.table.sortDirection change:display.events.table.sortColumn",this.render,this)},events:{"click th":function(e){var t=$(e.currentTarget);this.model.report.entry.content.set({"display.events.table.sortDirection":t.hasClass("asc")?"desc":"asc","display.events.table.sortColumn":t.attr("data-name")}),e.preventDefault()}},render:function(){return this.$el.html(this.compiledTemplate({collection:this.collection.intersectedFields,hasRowNum:r.normalizeBoolean(this.model.report.entry.content.get("display.events.rowNumbers")),allowRowExpand:this.options.allowRowExpand,content:this.model.report.entry.content,reorderableHandle:this.options.selectableFields?"on":"off",isRealTime:this.model.searchJob.entry.content.get("isRealTimeSearch"),is_ie7:i.isIE7()?"ie7":"",_:e})),this},template:'                <tr class="">                    <% if (allowRowExpand) { %>                        <th class="col-info"><i class="icon-info"></i></th>                    <% } %>                    <% if(hasRowNum) { %>                        <th class="line-num <%- is_ie7 %>">&nbsp;</th>                    <% }%>                    <th class="col-time <%- content.get("display.events.table.sortColumn") ? "sorts" : "" %> <%- is_ie7 %>">_time</th>                    <% collection.each(function(model) { %>                        <% var active = (!isRealTime && (content.get("display.events.table.sortColumn") == model.get("name"))) ? "active": ""%>                        <% var dir = (!isRealTime && (active==="active")) ? content.get("display.events.table.sortDirection") : ""%>                        <% var sorts = (!isRealTime) ? "sorts" : ""; %>                        <% var reorderable = (!isRealTime) ? "reorderable" : ""; %>                        <% var reorderableLabel = (!isRealTime) ? "reorderable-label" : ""; %>                        <th class=" <%- reorderable %> <%- sorts %> <%-active%> <%-dir%>" data-name="<%- model.get("name") %>"><span class="<%- reorderableLabel %> <%- reorderableHandle %>"><%- _(model.get("name")).t() %></span></th>                    <% }) %>                </tr>            '})}),define("views/shared/eventsviewer/table/body/PrimaryRow",["jquery","underscore","backbone","module","models/services/search/IntentionsParser","views/Base","splunk.util"],function(e,t,n,r,i,s,o){return s.extend({moduleId:r.id,tagName:"tr",initialize:function(){s.prototype.initialize.apply(this,arguments),this.$el.addClass(this.options.idx%2?"even":"odd"),this.model.renderer=this.collection.eventRenderers.getRenderer(this.model.event.get("eventtype")),this.rowExpanded="rowExpanded"+this.options.idx,this.jsonInteraction="interaction"+this.options.idx,this.swappingKey="swapResult"+this.options.idx,this.showAllLines="showAllLines"+this.options.idx,this.pendingRemove="pendingRemove"+this.options.idx,this.model.intentionsParser=new i,this.model.intentionsParser.on("change",function(){this.model.report.entry.content.set("search",this.model.intentionsParser.fullSearch()),this.model.report.trigger("eventsviewer:drilldown")},this),this.model.report.entry.content.on("change:display.events.table.drilldown",this.render,this),this.model.state.on("change:"+this.rowExpanded,this.debouncedRender,this),this.model.state.on(this.jsonInteraction,this.clickToExpandRow,this),this.model.state.on("change:"+this.showAllLines,function(){this.clickToExpandRow()},this),this.model.state.on("unmodalize"+this.options.idx,function(){this.clickToExpandRow(!0)},this),this.collection.selectedFields.on("reset add remove",this.render,this),this.model.report.entry.content.on("change:display.prefs.events.offset",this.collapseState,this),this.model.report.entry.content.on("change:display.events.list.wrap",function(){var e=o.normalizeBoolean(this.model.report.entry.content.get("display.events.list.wrap")),t=this.$("a.field-val").parents("td");e?t.removeClass("no-wrap"):t.addClass("no-wrap")},this)},events:{"click td.expands":function(e){if(this.model.state.get(this.pendingRemove)){this.model.state.get(this.rowExpanded)?this.collapseState():this.expandState(),e.preventDefault();return}this.clickToExpandRow(!0),e.preventDefault()},"click ._time-drilldown > a":function(e){e.preventDefault()},"click ._time-drilldown":function(t){t.preventDefault(),this.drilldown(e(t.currentTarget).find("a"))},"click .one-value-drilldown > a.field-val":function(e){e.preventDefault()},"click .one-value-drilldown":function(t){t.preventDefault(),this.drilldown(e(t.currentTarget).find("a"))},"click .multi-value-drilldown > a.field-val":function(t){t.preventDefault(),this.drilldown(e(t.currentTarget))},"keypress td ":function(t){t.preventDefault(),t.which===13&&this.drilldown(e(t.currentTarget).find("a"))}},clickToExpandRow:function(e){var t={index:this.options.idx,rtindex:this.model.result.results.length-this.options.idx-1,showAllLines:this.model.state.get(this.showAllLines)};this.model.state.get(this.rowExpanded)?this.model.state.get(this.rowExpanded)&&e?(this.model.state.unset(this.showAllLines,{silent:!0}),t.showAllLines=this.model.state.get(this.showAllLines),this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t),this.collapseState()):(this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t)):(this.expandState(),this.model.result.stopReset=!0,this.model.result.trigger("swap-single-event "+this.swappingKey,t)),this.model.state.unset("timeExpanded",{silent:!0})},debouncedRemove:function(){return this.model.state.set(this.pendingRemove,!0),s.prototype.debouncedRemove.apply(this,arguments),this},drilldown:function(t){var n=t.data();if(n.timeIso){if(o.normalizeBoolean(this.model.report.entry.content.get("display.events.table.drilldown"))){var r=o.getEpochTimeFromISO(n.timeIso);this.model.report.entry.content.set({"dispatch.earliest_time":r,"dispatch.latest_time":""+(parseFloat(r)+1)}),this.model.report.trigger("eventsviewer:drilldown")}}else{var i=n.name,s=e.trim(t.text());this.model.intentionsParser.clear({silent:!0}),this.model.intentionsParser.fetch({data:{q:this.model.report.entry.content.get("search"),action:"fieldvalue",field:i,value:s,app:this.model.application.get("app"),owner:this.model.application.get("owner")}})}},expandState:function(){this.model.state.set(this.rowExpanded,!0),this.model.state.set("sleep",!0)},collapseState:function(){this.model.state.unset("modalize"),this.model.state.unset(this.rowExpanded),this.model.state.unset("sleep")},render:function(){var n=this.el;return this.$el.find("> td").each(function(e,t){n.removeChild(t)}),this.$el.append(this.compiledTemplate({$:e,_:t,event:this.model.event,lineNum:this.options.lineNum,expanded:this.model.state.get(this.rowExpanded),drilldown:o.normalizeBoolean(this.model.report.entry.content.get("display.events.table.drilldown")),application:this.model.application,selectedFields:this.collection.selectedFields,colorClass:this.model.renderer?this.model.renderer.entry.content.get("css_class"):"",formattedTime:this.model.event.formattedTime(),allowRowExpand:this.options.allowRowExpand,wrap:o.normalizeBoolean(this.model.report.entry.content.get("display.events.table.wrap")),splunkutil:o})),this},reflow:function(){this.model.state.get(this.rowExpanded)?this.model.state.set("modalize",this.options.idx):this.model.state.unset("modalize")},template:'                <% if (allowRowExpand) { %>                    <td <%if(expanded) {%>rowspan=2<%}%> class="expands <%- colorClass %>">                        <a href="#"><i class="icon-triangle-<%- expanded ? "down" : "right" %>-small"></i></a>                    </td>                <% } %>                <td class="line-num"><span><%- lineNum %></span></td>                <td class="_time <%= drilldown ? "_time-drilldown" : ""  %>" tabindex="0">                    <% if(drilldown) { %>                        <a data-time-iso="<%- event.get("_time") %>">                    <% } else { %>                        <span data-time-iso="<%- event.get("_time") %>">                    <% } %>                        <% if(application.get("locale").indexOf("en") > -1){ %>                             <span><%- $.trim(formattedTime.slice(0, formattedTime.indexOf(" "))) %></span>                             <br>                             <span><%- $.trim(formattedTime.slice(formattedTime.indexOf(" "))) %></span>                        <% } else { %>                             <%- formattedTime %>                        <% } %>                    <% if(drilldown) { %>  </a>  <% } else { %> </span> <% } %>                </td>                <% selectedFields.each(function(model) { %>                    <% var fields = event.get(model.get("name")); %>                    <% if (drilldown) { %>                        <td class="<% if(!wrap) { %>no-wrap<% } %> <%= drilldown && fields && fields.length > 1 ? "multi-value-drilldown" : ""  %> <%= drilldown && fields && fields.length == 1 ? "one-value-drilldown" : ""  %>"  tabindex="0"><% _(fields).each(function(field) { %><a class="field-val" data-name="<%- model.get("name") %>"><%- field %></a><% }) %></td>                    <% } else { %>                        <td class="<% if(!wrap) { %>no-wrap<% } %>"  tabindex="0"><% _(fields).each(function(field) { %><span class="field-val" data-name="<%- model.get("name") %>"><%- field %></span><% }) %></td>                    <% } %>                <% }) %>            '})}),define("views/shared/eventsviewer/table/body/SecondaryRow",["module","underscore","views/Base","views/shared/eventsviewer/shared/EventFields","views/shared/eventsviewer/shared/RawField","splunk.util"],function(e,t,n,r,i,s){return n.extend({moduleId:e.id,tagName:"tr",className:"field-row",initialize:function(){n.prototype.initialize.apply(this,arguments),this.$el.addClass(this.options.idx%2?"even":"odd"),this.children.eventFields=new r({model:{event:this.model.event,report:this.model.report,summary:this.model.summary,result:this.model.result,state:this.model.state,application:this.model.application,searchJob:this.model.searchJob},collection:{workflowActions:this.collection.workflowActions,selectedFields:this.collection.selectedFields},selectableFields:this.options.selectableFields,idx:this.options.idx}),this.children.raw=new i({model:{event:this.model.event,state:this.model.state,result:this.model.result,report:this.model.report,searchJob:this.model.searchJob,application:this.model.application},noSegmentation:!0,idx:this.options.idx}),this.rowExpanded="rowExpanded"+this.options.idx,this.model.state.on("change:"+this.rowExpanded,this.visibility,this),this.model.result.on("tags-updated",function(){this.model.state.get(this.rowExpanded)&&this.render()},this),this.model.state.on("unmodalize"+this.options.idx,this.collapseState,this),this.collection.selectedFields.on("reset add remove",function(){!t.isNumber(this.model.state.get("modalize"))&&this.model.state.get(this.rowExpanded)&&this.$(".event").attr("colspan",this.getCalculatedColSpan())},this)},visibility:function(){var e=this.$("td.expands > a > i").removeClass("icon-triangle-right-small icon-triangle-down-small");this.model.state.get(this.rowExpanded)?(this.$el.css("display",""),e.addClass("icon-triangle-down-small"),this.children.raw.wake().$el.show(),this.children.eventFields.touch=!0,this.children.eventFields.wake({syncRender:!0}).$el.show()):(this.$el.hide(),e.addClass("icon-triangle-right-small"),this.children.raw.sleep().$el.hide(),this.children.eventFields.sleep().$el.hide()),this.reflow()},getCalculatedColSpan:function(){return this.collection.selectedFields.length+1+(s.normalizeBoolean(this.model.report.entry.content.get("display.events.rowNumbers"))?1:0)},collapseState:function(){this.model.state.unset("modalize"),this.model.state.unset(this.rowExpanded),this.model.state.unset("sleep")},render:function(){var e=this.el;return this.$el.find("> td").each(function(t,n){e.removeChild(n)}),this.$el.append(this.compiledTemplate({cspan:this.getCalculatedColSpan(),raw:this.model.event.rawToText()})),this.$(".event").append(this.children.raw.render().el),this.$(".event").append(this.children.eventFields.render().el),this.visibility(),this},reflow:function(){this.model.state.get(this.rowExpanded)?this.model.state.set("modalize",this.options.idx):this.model.state.unset("modalize"),n.prototype.reflow.apply(this,arguments)},template:'                <td class="event" colspan="<%- cspan %>"></td>            '})}),define("views/shared/eventsviewer/table/body/Master",["jquery","underscore","backbone","module","models/Base","views/Base","views/shared/eventsviewer/table/body/PrimaryRow","views/shared/eventsviewer/table/body/SecondaryRow","util/console"],function(e,t,n,r,i,s,o,u,a){return s.extend({moduleId:r.id,tagName:"tbody",type:"table",initialize:function(){s.prototype.initialize.apply(this,arguments),this.model.result.results.on("reset",this.debouncedRender,this),this.model.state.on("change:sleep",function(){this.model.state.get("sleep")?this.sleep({lite:!0}):this.wake({lite:!0})},this),this.collection.intersectedFields.on("reset",this.debouncedRender,this)},sleep:function(e){return e&&e.lite?this.awake=!1:s.prototype.sleep.apply(this),this},wake:function(e){return e&&e.lite?(this.awake=!0,this.touch&&this.render()):s.prototype.wake.apply(this),this},isSelected:function(){return this.model.report.entry.content.get("display.events.type")===this.type},cleanup:function(){this.$el.empty(),t.chain(this.children).values().invoke("debouncedRemove",{detach:!0}).values(),this.children={}},render:function(){this.trigger("rows:pre-remove"),this.cleanup();var e=document.createDocumentFragment(),n=this.model.searchJob.entry.content.get("isRealTimeSearch"),r=n?this.model.result.results.reverse({mutate:!1}):this.model.result.results.models;return a.debug("Events Table: rendering",r.length,"events",n?"in real-time mode":"in historical mode"),t.each(r,function(t,n){var r;this.model.searchJob.entry.content.get("isRealTimeSearch")?r=this.model.result.endOffset()-n:r=this.model.result.get("init_offset")+n+1,this.children["masterRow_"+n]=new o({model:{event:t,report:this.model.report,application:this.model.application,searchJob:this.model.searchJob,result:this.model.result,state:this.model.state},collection:{eventRenderers:this.collection.eventRenderers,selectedFields:this.collection.intersectedFields},lineNum:r,idx:n,allowRowExpand:this.options.allowRowExpand}),e.appendChild(this.children["masterRow_"+n].render().el),this.children["fieldRow_"+n]=new u({model:{event:t,report:this.model.report,result:this.model.result,summary:this.model.summary,state:this.model.state,application:this.model.application,searchJob:this.model.searchJob},collection:{workflowActions:this.collection.workflowActions,selectedFields:this.collection.selectedFields},idx:n,selectableFields:this.options.selectableFields}),e.appendChild(this.children["fieldRow_"+n].render().el)},this),this.el.appendChild(e),t(this.model.state.toJSON()).each(function(e,t){t.indexOf("pendingRemove")===0&&this.model.state.unset(t)},this),this.trigger("rows:added"),this.reflow(),this},reflow:function(){this.model.state.trigger("init-draggable")}})}),define("views/shared/eventsviewer/table/Master",["module","underscore","splunk.i18n","splunk.util","util/time_utils","jquery.ui.draggable","models/Base","views/Base","views/shared/delegates/Modalize","views/shared/delegates/TableDock","views/shared/eventsviewer/table/TableHead","views/shared/eventsviewer/table/body/Master"],function(e,t,n,r,i,s,o,u,a,f,l,c){return u.extend({moduleId:e.id,className:"scrolling-table-wrapper",initialize:function(){u.prototype.initialize.apply(this,arguments),this.drag={},this.collection.intersectedFields=this.collection.selectedFields.deepClone(),this.model.state=this.model.state||new o,this.children.modalize=new a({el:this.el,tbody:"> table > tbody"}),this.children.head=new l({model:{report:this.model.report,searchJob:this.model.searchJob},collection:{intersectedFields:this.collection.intersectedFields,selectedFields:this.collection.selectedFields},selectableFields:this.options.selectableFields,allowRowExpand:this.options.allowRowExpand,isRealTime:this.model.searchJob.entry.content.get("isRealTimeSearch")}),this.children.body=new c({model:{result:this.model.result,state:this.model.state,summary:this.model.summary,searchJob:this.model.searchJob,report:this.model.report,application:this.model.application},collection:{workflowActions:this.collection.workflowActions,intersectedFields:this.collection.intersectedFields,eventRenderers:this.collection.eventRenderers,selectedFields:this.collection.selectedFields},selectableFields:this.options.selectableFields,allowRowExpand:this.options.allowRowExpand}),this.model.state.on("init-draggable",this.initDraggable,this),this.options.headerMode==="dock"&&(this.children.tableDock=new f({el:this.el,offset:36,defaultLayout:"fixed"}));var e=t.debounce(function(e,t){this.modalize(e,t)}.bind(this),0);this.model.state.on("change:modalize",function(n){this.children.tableDock&&(t.isNumber(n.get("modalize"))?this.children.tableDock.disable():this.children.tableDock.enable()),e(this.model.state.get("modalize"),"table")},this),this.children.modalize.on("unmodalize",function(e){this.model.state.trigger("unmodalize"+e),this.children.tableDock.enable(),this.updateIntersectedFields()},this),this.collection.selectedFields.on("reset add remove",function(n,r,i){if(t.isNumber(this.model.state.get("modalize")))return;n.get("name")===this.model.report.entry.content.get("display.events.table.sortColumn")&&this.model.report.entry.content.set({"display.events.table.sortColumn":"","display.events.table.sortDirection":""}),this.updateIntersectedFields(),e(this.model.state.get("modalize"),"table")},this),this.model.result.results.on("reset",function(){t.isNumber(this.model.state.get("modalize"))||this.updateIntersectedFields()},this),this.collection.intersectedFields.on("reset",this.updateDock,this),this.model.report.entry.content.on("change:display.events.rowNumbers",function(){this.$("table:not(.table-embed)").toggleClass("hide-line-num")},this),this.model.report.entry.content.on("change:display.events.table.wrap",this.updateDock,this),this.model.report.entry.content.on("change:display.page.search.showFields change:display.prefs.events.offset",this.updateDock,this),this.options.selectableFields&&this.children.tableDock&&this.children.tableDock.on("updated",this.initDraggable,this),this.children.body.on("rows:pre-remove",function(){this.$el.css("minHeight",this.$el.height())},this),this.children.body.on("rows:added",function(){this.$el.css("minHeight","")},this)},updateIntersectedFields:function(){var e=[],n=[];!this.model.result.results.length||(t.each(t(this.collection.selectedFields.pluck("name")).intersection(this.model.result.fields.pluck("name")),function(e){n.push({name:e})}),this.collection.intersectedFields.reset(n))},remove:function(){u.prototype.remove.apply(this,arguments),$(window).off("."+this.cid)},reflow:function(){u.prototype.reflow.apply(this,arguments),this.isAttachedToDocument()&&this.children.head.$el.is(":visible")&&this.updateDock()},style:function(){var e=this.$el.width();return"#"+this.cid+"-table .table-expanded{max-width:"+(e?e-80:500)+"px}"},modalize:function(e,t){this.children.modalize.show(e,t)},render:function(){return this.$el.html(this.compiledTemplate({hidelinenums:!r.normalizeBoolean(this.model.report.entry.content.get("display.events.rowNumbers")),cid:this.cid})),this.$("> table.events-results").append(this.children.head.render().el).append(this.children.body.render().el),this},initDraggable:function(){this.options.selectableFields&&(this.drag.$theads=this.$el.find(".reorderable"),this.drag.$theads.draggable({helper:this.dragHelper.bind(this),start:this.startDrag.bind(this),stop:this.stopDrag.bind(this),drag:this.dragged.bind(this),containment:this.el,distance:5,scroll:!0}))},updateDock:function(){this.children.tableDock&&this.children.tableDock.update()},dragHelper:function(e,t){return this.drag.$th=$(e.currentTarget).addClass("moving"),this.drag.thOffsetTop=this.drag.$th.offset().top,this.drag.containerLeft=this.$el.position().left,this.drag.$insertionCursor=this.$(".table-insertion-cursor"),this.drag.$insertionCursor.show(),this.drag.$helper=$("<div class='reorderable-helper'><span class='reorderable-label'>"+this.drag.$th.text()+"</span></div>").appendTo(this.$el),this.drag.$helper.width(this.drag.$th.width()),this.drag.$helper.css("marginRight",-this.drag.$th.width()+"px"),this.findInsertionPoints(),this.drag.$helper[0]},findInsertionPoints:function(){this.drag.insertionPoints=[];var e=this.$("> table > thead > tr > th.reorderable"),t=e.filter("[data-name="+this.drag.$th.data("name")+"]")[0],n=this.drag.originalIndex=e.index(t);e.each(function(e,t){var r=$(t),i=r.position().left+this.$el.scrollLeft();e<n?this.drag.insertionPoints.push({left:i,index:e}):e==n?(this.drag.insertionPoints.push({left:i,index:e}),this.drag.insertionPoints.push({left:i+r.outerWidth(),index:e})):this.drag.insertionPoints.push({left:i+r.outerWidth(),index:e})}.bind(this))},findClosestInsertion:function(e,t){if(t.helper.offset().top-this.drag.thOffsetTop>100)return-1;var n=-1,r=1e7,i=e.pageX-this.drag.containerLeft+this.$el.scrollLeft();return $.each(this.drag.insertionPoints,function(t,s){var o=Math.abs(s.left-i);o<r&&(n=s,r=o)}),n},startDrag:function(e,t){},stopDrag:function(e,t){var n=this.findClosestInsertion(e,t),r=this.collection.selectedFields.findWhere({name:this.drag.$th.data().name});n==-1?this.collection.selectedFields.remove(r):n.index!==this.drag.originalIndex&&(this.collection.selectedFields.remove(r,{silent:!0}),this.collection.selectedFields.add(r,{at:n.index})),this.drag.$th.removeClass("moving"),this.drag.$insertionCursor.hide()},dragged:function(e,t){var n=this.findClosestInsertion(e,t);n===-1?(this.drag.$insertionCursor.hide(),t.helper.addClass("reorderable-remove")):(this.drag.$insertionCursor.show().css("left",n.left),t.helper.removeClass("reorderable-remove"))},template:'                <table class="table table-chrome table-striped <% if(hidelinenums){ %> hide-line-num <% } %> table-row-expanding events-results events-results-table" id="<%= cid %>-table"></table>                <div class="table-insertion-cursor"></div>            '})}),define("views/shared/eventsviewer/Master",["jquery","underscore","module","models/Base","models/services/search/jobs/Result","views/Base","views/shared/eventsviewer/raw/Master","views/shared/eventsviewer/list/Master","views/shared/eventsviewer/table/Master"],function(e,t,n,r,i,s,o,u,a){return s.extend({moduleId:n.id,initialize:function(){s.prototype.initialize.apply(this,arguments);var t={selectableFields:!0,headerMode:"dock",allowRowExpand:!0,scrollToTopOnPagination:!1};this.options=e.extend(!0,t,this.options),this.rendered={list:!1,table:!1,raw:!1},this.model._result=new i,this.model._result.setFromSplunkD(this.model.result.responseText?JSON.parse(this.model.result.responseText):{}),this.model.result.results.on("reset",function(){this.model._result.stopReset||this.model._result.setFromSplunkD(JSON.parse(this.model.result.responseText),{clone:!0})},this),this.model.state=this.model.state||new r,this.model.listState=new r,this.model.tableState=new r,this.model.rawState=new r,this.model.resultWorking=new i,this.model._result.results.on("reset",this.wake,this),this.children.list=new u({model:{result:this.model._result,summary:this.model.summary,searchJob:this.model.searchJob,report:this.model.report,application:this.model.application,state:this.model.listState},collection:{selectedFields:this.collection.selectedFields,eventRenderers:this.collection.eventRenderers,workflowActions:this.collection.workflowActions},selectableFields:this.options.selectableFields,headerMode:this.options.headerMode,allowRowExpand:this.options.allowRowExpand}),this.children.raw=new o({model:{result:this.model._result,summary:this.model.summary,searchJob:this.model.searchJob,report:this.model.report,application:this.model.application,state:this.model.rawState},collection:{selectedFields:this.collection.selectedFields,eventRenderers:this.collection.eventRenderers,workflowActions:this.collection.workflowActions},selectableFields:!1,allowRowExpand:this.options.allowRowExpand}),this.children.table=new a({model:{result:this.model._result,summary:this.model.summary,searchJob:this.model.searchJob,report:this.model.report,application:this.model.application,state:this.model.tableState},collection:{selectedFields:this.collection.selectedFields,eventRenderers:this.collection.eventRenderers,workflowActions:this.collection.workflowActions},selectableFields:this.options.selectableFields,headerMode:this.options.headerMode,allowRowExpand:this.options.allowRowExpand}),this.model.report.entry.content.on("change:display.events.type",function(e,t,n){e.previousAttributes()["display.events.type"]!=="table"&&e.get("display.events.type")!=="table"&&this.wake()},this),this.model.listState.on("change:modalize",function(e){this.model.state.set("modalize",e.get("modalize"))},this),this.model.rawState.on("change:modalize",function(e){this.model.state.set("modalize",e.get("modalize"))},this),this.model.tableState.on("change:modalize",function(e){this.model.state.set("modalize",e.get("modalize"))},this),this.model.state.on("unmodalize",function(e){this.model.listState.trigger("unmodalize"+e),this.model.rawState.trigger("unmodalize"+e),this.model.tableState.trigger("unmodalize"+e)},this),this.model.state.on("change:fieldpicker",function(){this.children.table&&this.children.table.updateDock()},this),this.model.report.entry.content.on("change:display.page.search.showFields",function(){this.children.table.updateDock(),this.children.list.deferUpdateDock()},this),this.model._result.on("swap-single-event",function(e){this.fetchResultWithAllFields(e)},this),this.model.report.entry.content.on("change:display.prefs.events.offset",function(){if(this.options.scrollToTopOnPagination){var t=this.$el.offset().top,n=e(document).scrollTop(),r=this.$el.children(":visible").find("thead:visible").height(),i=e(".events-controls-inner").height();n>t&&e(document).scrollTop(t-(r+i))}},this)},events:{"click .header-table-docked.disabled":function(e){this.model.state.trigger("unmodalize",this.model.state.get("modalize")),this.model.state.unset("modalize"),e.preventDefault()}},wake:function(){var e=this.model.report.entry.content.get("display.events.type");this.rendered[e]||this._render(e);if(t.isNumber(this.model.state.get("modalize")))return this;switch(e){case"raw":this.children.list.sleep().$el.hide(),this.children.raw.wake().$el.show(),this.children.table.sleep().$el.hide();break;case"list":this.children.list.wake().$el.show(),this.children.raw.sleep().$el.hide(),this.children.table.sleep().$el.hide();break;case"table":this.children.list.sleep().$el.hide(),this.children.raw.sleep().$el.hide(),this.children.table.wake().$el.show();break;default:this.children.list.sleep().$el.hide(),this.children.raw.sleep().$el.hide(),this.children.table.sleep().$el.hide()}return this},fetchResultWithAllFields:function(t){var n,r,i=this.model.searchJob.entry.content.get("dispatchState"),s=this.model.searchJob.isRealtime(),o=this.model._result.results.at(s?t.rtindex:t.index);s?r=["search _serial=",o.get("_serial")[0]," AND ","splunk_server=",o.get("splunk_server")[0]," | head 1"].join(""):(n=this.model._result.offset(t.index),r=this.model.report.getSortingSearch()),this.model.resultWorking.id=this.model.searchJob.entry.links.get("events"),this.model.resultWorking.fetch({data:e.extend(!0,{},{offset:n,count:1,earliest_time:this.model.report.entry.content.get("display.events.timelineEarliestTime"),latest_time:this.model.report.entry.content.get("display.events.timelineLatestTime"),segmentation:this.model.report.entry.content.get("display.events.list.drilldown"),max_lines:t.showAllLines?0:this.model.report.getNearestMaxlines(),truncation_mode:"abstract",search:r}),success:function(e,t){var n=e.results.at(0);n?o.replace(n.toJSON(),{swap:!0}):o.trigger("failed-swap"),this.manageState(i)}.bind(this),error:function(e,t){o.trigger("failed-swap"),this.manageState(i)}.bind(this)})},manageState:function(e){this.model._result.stopReset=!1,this.model.searchJob.entry.content.get("dispatchState")!==e&&this.model.result.trigger("forcefetch")},_render:function(e){this.$el.append(this.children[e].render().el),this.rendered[e]=!0},render:function(){return this._render(this.model.report.entry.content.get("display.events.type")),this.wake(),this}})}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/events-viewer.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/eventsviewerview",["require","exports","module","jquery","underscore","backbone","splunk.util","collections/SelectedFields","collections/services/configs/EventRenderers","collections/services/data/ui/WorkflowActions","models/Job","models/services/search/jobs/Result","models/services/search/jobs/Summary","uri/route","util/console","views/shared/eventsviewer/Master","./basesplunkview","./messages","./mvc","./paginatorview","./utils","./sharedmodels","splunk.util","./tokenawaremodel","models/Report","css!../css/events-viewer"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("backbone"),o=e("splunk.util"),u=e("collections/SelectedFields"),a=e("collections/services/configs/EventRenderers"),f=e("collections/services/data/ui/WorkflowActions"),l=e("models/Job"),c=e("models/services/search/jobs/Result"),h=e("models/services/search/jobs/Summary"),p=e("uri/route"),d=e("util/console"),v=e("views/shared/eventsviewer/Master"),m=e("./basesplunkview"),g=e("./messages"),y=e("./mvc"),b=e("./paginatorview"),w=e("./utils"),E=e("./sharedmodels"),S=e("splunk.util"),x=e("./tokenawaremodel"),T=e("models/Report");e("css!../css/events-viewer");var N=/(["'].*?["']|[^"',\s]+)(?=\s*|\s*,|\s*$)/g,C=/^["']|["|']$/g,k=m.extend({className:"splunk-events-viewer",options:{managerid:null,data:"events",showPager:!0,pagerPosition:"bottom",drilldownRedirect:!0},reportDefaults:{"display.events.fields":'["host", "source", "sourcetype"]',"display.events.type":"list","display.prefs.events.count":10,"display.events.rowNumbers":"1","display.events.maxLines":5,"display.events.histogram":"0","display.events.raw.drilldown":"full","display.events.list.wrap":"1","display.events.list.drilldown":"full","display.events.table.wrap":"1","display.events.table.drilldown":"0","display.events.table.sortDirection":"asc"},omitFromSettings:["el","id","name","manager","reportModel","displayRowNumbers","segmentation","softWrap"],normalizeOptions:function(e,t){t.hasOwnProperty("rowNumbers")?e.set("rowNumbers",o.normalizeBoolean(t.rowNumbers)?"1":"0"):t.hasOwnProperty("displayRowNumbers")&&e.set("rowNumbers",o.normalizeBoolean(t.displayRowNumbers)?"1":"0"),t.hasOwnProperty("raw.drilldown")?e.set("raw.drilldown",t["raw.drilldown"]):t.hasOwnProperty("segmentation")&&e.set("raw.drilldown",t.segmentation),t.hasOwnProperty("list.drilldown")?e.set("list.drilldown",t["list.drilldown"]):t.hasOwnProperty("segmentation")&&e.set("list.drilldown",t.segmentation),t.hasOwnProperty("table.drilldown")?e.set("table.drilldown",o.normalizeBoolean(t["table.drilldown"])?"1":"0"):t.hasOwnProperty("segmentation")&&e.set("table.drilldown",t.segmentation!=="none"?"1":"0"),t.hasOwnProperty("list.wrap")?e.set("list.wrap",o.normalizeBoolean(t["list.wrap"])?"1":"0"):t.hasOwnProperty("softWrap")&&e.set("list.wrap",o.normalizeBoolean(t.softWrap)?"1":"0"),t.hasOwnProperty("table.wrap")?e.set("table.wrap",o.normalizeBoolean(t["table.wrap"])?"1":"0"):t.hasOwnProperty("softWrap")&&e.set("table.wrap",o.normalizeBoolean(t.softWrap)?"1":"0"),!t.hasOwnProperty("count")&&!e.has("count")&&e.set("count",this.reportDefaults["display.prefs.events.count"])},initialize:function(e){this.configure(),this.model=this.options.reportModel||x._createReportModel(this.reportDefaults),this.settings._sync=w.syncModels({source:this.settings,dest:this.model,prefix:"display.events.",include:["fields","type","count","rowNumbers","maxLines","raw.drilldown","list.drilldown","list.wrap","table.drilldown","table.wrap","table.sortDirection","table.sortColumn"],exclude:["drilldownRedirect","managerid"],auto:!0,alias:{count:"display.prefs.events.count"}}),this.settings.on("change",this.onSettingsChange,this),this.model.on("change",this.onReportChange,this),this.normalizeOptions(this.settings,e),this.resultModel=new c,this.summaryModel=new h,this.searchJobModel=new l,this.reportModel=new T,this.reportModel.entry={content:this.model},this.reportModel.on("eventsviewer:drilldown",this.onReportDrilldown,this),this.applicationModel=E.get("app"),this.selectedFieldsCollection=new u,this.workflowActionsCollection=new f,this.workflowActionsCollection.fetch({data:{app:this.applicationModel.get("app"),owner:this.applicationModel.get("owner"),count:-1,sort_key:"name"},success:i.bind(function(){this._isWorkflowActionsCollectionReady=!0,this.render()},this)}),this.eventRenderersCollection=new a,this.eventRenderersCollection.fetch({success:i.bind(function(){this._isEventRenderersCollectionReady=!0,this.render()},this)}),this._lastJobFetched=null,this.updateSelectedFields(),this.bindToComponentSetting("managerid",this.onManagerChange,this),this.manager||this.onManagerChange(y.Components,null)},onManagerChange:function(e,t){this.manager&&(this.manager.off(null,null,this),this.manager=null),this.eventData&&(this.eventData.off(),this.eventData.destroy(),this.eventData=null),this.summaryData&&(this.summaryData.off(),this.summaryData.destroy(),this.summaryData=null),this._searchStatus=null,this._eventCount=0,this._isSummaryModelReady=!1,this._isSearchJobModelReady=!1,this._lastJobFetched=null,this.resultModel.setFromSplunkD({}),this.summaryModel.setFromSplunkD({});if(!t){this._searchStatus={state:"nomanager"},this.render();return}this._searchStatus={state:"start"},this.manager=t,this.manager.on("search:start",this.onSearchStart,this),this.manager.on("search:progress",this.onSearchProgress,this),this.manager.on("search:done",this.onSearchDone,this),this.manager.on("search:cancelled",this.onSearchCancelled,this),this.manager.on("search:error",this.onSearchError,this),this.manager.on("search:fail",this.onSearchFailed,this),this.eventData=this.manager.data("events",{autofetch:!1,output_mode:"json",truncation_mode:"abstract"}),this.eventData.on("data",this.onEventData,this),this.eventData.on("error",this.onSearchError,this),this.summaryData=this.manager.data("summary",{autofetch:!1,output_mode:"json",top_count:10,output_time_format:"%d/%m/%y %l:%M:%S.%Q %p"}),this.summaryData.on("data",this.onSummaryData,this),this.summaryData.on("error",this.onSearchError,this);var n=this.manager.get("data");n&&n.eventAvailableCount?(this.onSearchStart(n),this.onSearchProgress({content:n}),n.isDone&&this.onSearchDone({content:n})):this.render(),t.replayLastSearchEvent(this)},_fetchJob:function(e){this._isRealTimeSearch=e.isRealTimeSearch,this._lastJobFetched!==e.sid&&(this._lastJobFetched=e.sid,this.searchJobModel.set("id",e.sid),this.searchJobModel.fetch({success:i.bind(function(){this._isSearchJobModelReady||(this._isSearchJobModelReady=!0,this.render())},this)}))},onSearchStart:function(e){this._searchStatus={state:"running"},this._eventCount=0,this._statusBuckets=undefined,this._lastJobFetched=null,this._isSummaryModelReady=!1,this._isSearchJobModelReady=!1,this.resultModel.setFromSplunkD({}),this.summaryModel.setFromSplunkD({}),this._fetchJob(e),this.render()},onSearchProgress:function(e){this._searchStatus={state:"running"},e=e||{};var t=e.content||{},n=t.eventAvailableCount||0,r=this._statusBuckets=t.statusBuckets||0,i=e.name;this._fetchJob(t),i&&(i=o.stripLeadingSearchCommand(i),this.reportModel.entry.content.set("search",i,{silent:!0})),this._eventCount=n,n>0&&this.updateEventData(),r>0&&this.updateSummaryData(),this.render()},onSearchDone:function(e){this._searchStatus={state:"done"},e=e||{};var t=e.content||{},n=t.eventAvailableCount||0;this._fetchJob(t),this._eventCount=n,this.updateEventData(),this.updateSummaryData(),this.render()},onSearchCancelled:function(){this._searchStatus={state:"cancelled"},this.render()},onSearchError:function(e,t){var n=g.getSearchErrorMessage(t)||e;this._searchStatus={state:"error",message:n},this.render()},onSearchFailed:function(e){var t=g.getSearchFailureMessage(e);this._searchStatus={state:"error",message:t},this.render()},onEventData:function(e,t){this.resultModel.setFromSplunkD(t),this.render()},onSummaryData:function(e,t){this.summaryModel.setFromSplunkD(t),this._isSummaryModelReady||(this._isSummaryModelReady=!0,this.render())},onSettingsChange:function(e){e.hasChanged("fields")&&this.updateSelectedFields(),(e.hasChanged("showPager")||e.hasChanged("pagerPosition")||e.hasChanged("count")||e.hasChanged("fields"))&&this.render(),(e.hasChanged("showPager")||e.hasChanged("type")||e.hasChanged("count")||e.hasChanged("maxLines")||e.hasChanged("raw.drilldown")||e.hasChanged("list.drilldown"))&&this.updateEventData()},onReportChange:function(e){(e.hasChanged("display.events.table.sortColumn")||e.hasChanged("display.events.table.sortDirection"))&&this.updateEventData()},onReportDrilldown:function(){var e=this.model,t=e.get("search"),n=e.hasChanged("dispatch.earliest_time")?e.get("dispatch.earliest_time"):null,r=e.hasChanged("dispatch.latest_time")?e.get("dispatch.latest_time"):null,s=!1,o=i.once(i.bind(this.drilldown,this,t,n,r)),u=function(){s=!0};this.trigger("drilldown",{search:t,drilldown:o,preventDefault:u}),this.settings.get("drilldownRedirect")&&!s&&o()},onPageChange:function(){this.updateEventData()},drilldown:function(e,t,n){if(!e)return;var r=this.manager;if(!r)return;r.job&&(t==null&&(t=r.job.properties().searchEarliestTime),n==null&&(n=r.job.properties().searchLatestTime),!t&&r.job.properties().earliestTime&&(t=S.getEpochTimeFromISO(r.job.properties().earliestTime)),!n&&r.job.properties().latestTime&&(n=S.getEpochTimeFromISO(r.job.properties().latestTime)));var i={q:e,earliest:t||"",latest:n||""},s=w.getPageInfo(),o=p.search(s.root,s.locale,s.app,{data:i});w.redirect(o)},updateEventData:function(){if(this.eventData){var e=this.paginator?parseInt(this.paginator.settings.get("pageSize"),10):0,t=this.paginator?parseInt(this.paginator.settings.get("page"),10):0,n=this.settings.get("type"),r=e*t,s=Math.max(parseInt(this.settings.get("count"),10)||this.reportDefaults["display.prefs.events.count"],1);this._isRealTimeSearch&&(r=0-s-r);var o=parseInt(this.settings.get("maxLines"),10),u=this.settings.get("raw.drilldown"),a=this.settings.get("list.drilldown"),f=this.model.get("display.events.table.sortColumn"),l=this.model.get("display.events.table.sortDirection"),c=null,h=null;n==="raw"?c=u:n==="list"&&(c=a),c=c?c.toLowerCase():null;switch(c){case"inner":case"outer":case"full":case"none":break;default:c="full"}n==="table"&&f&&(l==="desc"?h="| sort "+(r+s)+" - "+f:h="| sort "+(r+s)+" "+f);var p=this.settings.get("fields");p=i.union(p,["_raw","_time","_audit","_decoration","eventtype","linecount","_fulllinecount"]),this._isRealTimeSearch&&(p=i.union(p,["_serial","splunk_server"])),this.eventData.set({offset:r,count:s,max_lines:o,segmentation:c,search:h,fields:p}),this.eventData.fetch()}},updateSummaryData:function(){this.summaryData&&this.summaryData.fetch()},updateSelectedFields:function(){var e=this.settings.get("fields");if(e){if(i.isString(e)){e=r.trim(e);if(e[0]==="["&&e.slice(-1)==="]")try{e=JSON.parse(e)}catch(t){}else e=i.map(e.match(N),function(e){return e.replace(C,"")}),this.settings.set("fields",JSON.stringify(e))}else this.settings.set("fields",JSON.stringify(e));e=i.map(e,function(e){return{name:e}});if(e.length===0||e[0].name==="*")e=i.filter(this.resultModel.fields.toJSON(),function(e){return e.name.charAt(0)!=="_"})}this.selectedFieldsCollection.reset(e)},render:function(){var e=this._searchStatus||null,t=this._eventCount||0,n=this._statusBuckets===undefined||this._statusBuckets>0,s=this._isSummaryModelReady===!0,u=this._isSearchJobModelReady===!0,a=this._isWorkflowActionsCollectionReady===!0,f=this._isEventRenderersCollectionReady===!0,l=s&&u&&a&&f,c=o.normalizeBoolean(this.settings.get("showPager")),h=this.settings.get("pagerPosition"),p=Math.max(parseInt(this.settings.get("count"),10),1),d=null;if(e)switch(e.state){case"nomanager":d="no-search";break;case"start":d="empty";break;case"running":if(n&&t===0||!l)d="waiting";n||(d="no-events");break;case"cancelled":d="cancelled";break;case"done":t===0&&(d="no-events");break;case"error":d={level:"error",icon:"warning-sign",message:e.message}}return d?(this.messageElement||(this.messageElement=r('<div class="msg"></div>')),g.render(d,this.messageElement),this.$el.append(this.messageElement)):this.messageElement&&(this.messageElement.remove(),this.messageElement=null),l&&e&&!d?(this.eventsViewer||(this.eventsViewer=new v({model:{result:this.resultModel,summary:this.summaryModel,searchJob:this.searchJobModel,report:this.reportModel,application:this.applicationModel},collection:{selectedFields:this.selectedFieldsCollection,workflowActions:this.workflowActionsCollection,eventRenderers:this.eventRenderersCollection},selectableFields:!1,headerMode:"none",allowRowExpand:!0}),this.eventsViewer.render()),this.$el.append(this.eventsViewer.el)):this.eventsViewer&&(this.eventsViewer.remove(),this.eventsViewer=null),l&&e&&!d&&c?(this.paginator||(this.paginator=new b({id:i.uniqueId(this.id+"-paginator")}),this.paginator.settings.on("change:page",this.onPageChange,this)),this.paginator.settings.set({pageSize:p,itemCount:t}),h==="top"?this.$el.prepend(this.paginator.el):this.$el.append(this.paginator.el)):this.paginator&&(this.paginator.settings.off("change:page",this.onPageChange,this),this.paginator.remove(),this.paginator=null),this.trigger("rendered",this),this},remove:function(){this.eventsViewer&&(this.eventsViewer.remove(),this.eventsViewer=null),this.paginator&&(this.paginator.settings.off("change:page",this.onPageChange,this),this.paginator.remove(),this.paginator=null),this.eventData&&(this.eventData.off(),this.eventData.destroy(),this.eventData=null),this.summaryData&&(this.summaryData.off(),this.summaryData.destroy(),this.summaryData=null),this.settings&&(this.settings.off(),this.settings._sync&&this.settings._sync.destroy()),this.model&&this.model.off("change",this.onReportChange,this),m.prototype.remove.call(this)}});return k}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.setBuffer('.clearfix{*zoom:1;}.clearfix:before,.clearfix:after{display:table;content:"";line-height:0;}\n.clearfix:after{clear:both;}\n.hide-text{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;}\n.input-block-level{display:block;width:100%;min-height:26px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}\n.ie7-force-layout{*min-width:0;}\n.timeline-results-wrapper{clear:both;min-height:400px;*zoom:1;}.timeline-results-wrapper:before,.timeline-results-wrapper:after{display:table;content:"";line-height:0;}\n.timeline-results-wrapper:after{clear:both;}\n.event .raw-event,.event .json-event{font-family:"Droid Sans Mono","Consolas","Monaco","Courier New",Courier,monospace;font-size:12px;color:#333333;padding:0;border:none;background-color:transparent;margin:auto;padding:auto;}.event .raw-event em,.event .json-event em{font-style:normal ;}\n.event .raw-event .a,.event .json-event .a,.event .raw-event .h,.event .json-event .h,.event .raw-event .fields .v:hover,.event .json-event .fields .v:hover,.event .raw-event .fields .tg:hover,.event .json-event .fields .tg:hover,.event .raw-event .time:hover,.event .json-event .time:hover{background-color:#fde9a8;border-top:4px solid #fde9a8;border-bottom:4px solid #fde9a8;color:#32496a;}\n.event .raw-event .key-name,.event .json-event .key-name{color:#d85d3c;font-weight:bold;}\n.event .raw-event .string,.event .json-event .string{color:#1abb97;}\n.event .raw-event .number,.event .json-event .number{color:#956d95;}\n.event .raw-event .boolean,.event .json-event .boolean{color:#f7902b;}\n.event .raw-event .null,.event .json-event .null{color:#f7902b;}\n.shared-eventsviewer{border-left:1px solid #e5e5e5;}.shared-eventsviewer th.col-0,.shared-eventsviewer th.line-num,.shared-eventsviewer th.col-time{width:1px;}\n.shared-eventsviewer th.col-time.ie7,.shared-eventsviewer th.col-0.ie7{width:150px;}\n.shared-eventsviewer th.line-num.ie7{width:50px;}\n.shared-eventsviewer th.col-0:last-child,.shared-eventsviewer th.col-time:last-child{width:auto;}\n.shared-eventsviewer td._time>span>span{white-space:nowrap;}\n.shared-eventsviewer .shared-eventsviewer-table-body-primaryrow>td.no-wrap{white-space:pre;}\n.shared-eventsviewer td.expands.et_blue{background-color:#5379af;border-right:1px solid #5379af !important;}.shared-eventsviewer td.expands.et_blue:hover{background-color:#6b8cba !important;}\n.shared-eventsviewer td.expands.et_green{background-color:#9ac23c;border-right:1px solid #9ac23c !important;}.shared-eventsviewer td.expands.et_green:hover{background-color:#a8cb57 !important;}\n.shared-eventsviewer td.expands.et_magenta{background-color:#dd86af;border-right:1px solid #dd86af !important;}.shared-eventsviewer td.expands.et_magenta:hover{background-color:#e5a2c1 !important;}\n.shared-eventsviewer td.expands.et_orange{background-color:#f7902b;border-right:1px solid #f7902b !important;}.shared-eventsviewer td.expands.et_orange:hover{background-color:#f8a24d !important;}\n.shared-eventsviewer td.expands.et_purple{background-color:#956d95;border-right:1px solid #956d95 !important;}.shared-eventsviewer td.expands.et_purple:hover{background-color:#a482a4 !important;}\n.shared-eventsviewer td.expands.et_red{background-color:#d85d3c;border-right:1px solid #d85d3c !important;}.shared-eventsviewer td.expands.et_red:hover{background-color:#de765a !important;}\n.shared-eventsviewer td.expands.et_sky{background-color:#6ab7c7;border-right:1px solid #6ab7c7 !important;}.shared-eventsviewer td.expands.et_sky:hover{background-color:#84c4d1 !important;}\n.shared-eventsviewer td.expands.et_teal{background-color:#1abb97;border-right:1px solid #1abb97 !important;}.shared-eventsviewer td.expands.et_teal:hover{background-color:#1edab0 !important;}\n.shared-eventsviewer td.expands.et_yellow{background-color:#fac51c;border-right:1px solid #fac51c !important;}.shared-eventsviewer td.expands.et_yellow:hover{background-color:#fbce3f !important;}\n.shared-eventsviewer .event-fields-loading{padding:20px 0;color:#999999;}\n.shared-eventsviewer ul.condensed-selected-fields{margin:5px 0 0 0;max-width:100%;}.shared-eventsviewer ul.condensed-selected-fields li{color:#999999;margin-right:10px;float:left;list-style:none;display:inline;max-width:100%;}.shared-eventsviewer ul.condensed-selected-fields li>:last-child{padding-right:10px;border-right:1px dashed #cccccc;}\n.shared-eventsviewer ul.condensed-selected-fields li:last-child{margin-right:0;}.shared-eventsviewer ul.condensed-selected-fields li:last-child>:last-child{padding-right:0;border-right:none;}\n.shared-eventsviewer ul.condensed-selected-fields li .field-value{display:inline-block;}\n.shared-eventsviewer ul.condensed-selected-fields li .f-v{display:inline-block;max-width:500px;word-wrap:normal;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:top;}\n.shared-eventsviewer ul.condensed-selected-fields li .f-v,.shared-eventsviewer ul.condensed-selected-fields li .more-fields{color:#333333;cursor:pointer;}.shared-eventsviewer ul.condensed-selected-fields li .f-v:hover,.shared-eventsviewer ul.condensed-selected-fields li .more-fields:hover{color:#32496a;}\n.shared-eventsviewer ul.condensed-selected-fields li>.tag{color:inherit;}.shared-eventsviewer ul.condensed-selected-fields li>.tag:hover{color:#32496a;}\n.shared-eventsviewer .formated-time:hover{color:#32496a;text-decoration:underline;cursor:pointer;}\n.shared-eventsviewer .table-embed{margin-top:10px;margin-bottom:0;background-color:transparent;width:auto;clear:left;min-width:0;}.shared-eventsviewer .table-embed th:first-child{padding-left:0;}\n.shared-eventsviewer .table-embed td>a._time-expand{display:inline;margin-left:2px;}\n.shared-eventsviewer .table-embed td>a._time-expand:hover{text-decoration:none;}\n.shared-eventsviewer .table-embed td{border-bottom:none ;line-height:20px;}\n.shared-eventsviewer .table-embed tbody:first-child tr:first-child td{border-top:none ;}\n.shared-eventsviewer .table-embed a{text-decoration:none;display:block;min-width:16px;padding:0 3px;}.shared-eventsviewer .table-embed a:hover{background:#ebebeb;color:#32496a !important;}\n.shared-eventsviewer .table-embed a._time-expand:hover,.shared-eventsviewer .table-embed a.more-fields:hover{text-decoration:underline;background:none;}\n.shared-eventsviewer .table-embed .field-actions{font-size:14px;height:20px;overflow:hidden;text-align:center;padding-right:0;}\n.shared-eventsviewer .table-embed .btn-group{font-size:inherit;}\n.shared-eventsviewer .table-embed .field-type{padding-left:0;}\n.shared-eventsviewer .table-embed .field-key{padding:0 8px 0 0;}\n.shared-eventsviewer .table-embed td.field-value{word-break:break-all;padding-left:0;}\n.shared-eventsviewer .table-embed .field-value a{display:inline-block;}\n.shared-eventsviewer tr.row-more-fields+tr>td{border-top:none;border-bottom:none;}\n.shared-eventsviewer .col-more-fields{padding-left:10px;vertical-align:middle;}\n.shared-eventsviewer .col-visibility{text-align:left;font-size:20px;padding:0 !important;width:auto;}.shared-eventsviewer .col-visibility .checkbox{padding:1px 5px 1px 0;margin:0;}.shared-eventsviewer .col-visibility .checkbox>a,.shared-eventsviewer .col-visibility .checkbox>a:hover{padding:0;color:#333333 !important;}\n.shared-eventsviewer th.col-visibility{padding-bottom:4px !important;}\n.shared-eventsviewer th.col-field-name,.shared-eventsviewer th.col-field-value{padding-left:4px;}\n.shared-eventsviewer a:hover .icon-hidden{color:inherit;}\n.shared-eventsviewer .table-expanded a{color:#5379af !important;}\n.shared-eventsviewer .table-expanded a:hover{color:#32496a !important;}\n.shared-eventsviewer .table{margin-bottom:0;}\n.shared-eventsviewer .hide-line-num th.line-num,.shared-eventsviewer .hide-line-num td.line-num{display:none;}\n.shared-eventsviewer .normal.raw-event{background-color:inherit;border:none;white-space:pre;}\n.shared-eventsviewer .normal.raw-event.wrap{white-space:pre-wrap;}\n.shared-eventsviewer .event-actions{margin-top:10px;}\n.shared-eventsviewer .showinline,.shared-eventsviewer .hideinline{white-space:nowrap;word-wrap:normal;display:block;}\n.shared-eventsviewer-list,.shared-eventsviewer-table,.shared-eventsviewer-raw{background:#ffffff;}\n.events-results-table{min-width:100%;width:auto;*width:100%;}.events-results-table>tbody>tr>td>a,.events-results-table>tbody>tr>td>span.field-val{text-decoration:none;display:block;}\n.events-results-table>tbody>tr>td.one-value-drilldown:hover,.events-results-table>tbody>tr>td._time-drilldown:hover,.events-results-table>tbody>tr>td.multi-value-drilldown>a.field-val:hover{background-color:#e4e4e4;cursor:pointer;}\n.events-results-table>tbody>tr>td.one-value-drilldown:hover>a.field-val,.events-results-table>tbody>tr>td._time-drilldown:hover>a{color:#32496a;}\n.docked-header-table>table{border-top:0;}\n.reorderable-label{position:relative;display:block;padding:4px 8px 4px 18px;}\n.sorts .reorderable-label:after{font-family:"Splunk Icons";content:"\\2195 ";padding-left:5px;color:#bbbbbb;}\n.sorts.asc .reorderable-label:after,.sorts.Asc .reorderable-label:after{content:"\\21A5 ";color:#333333;}\n.sorts.desc .reorderable-label:after,.sorts.Desc .reorderable-label:after{content:"\\21A7 ";color:#333333;}\n.reorderable-helper{background-color:#d85d3c;background-color:#ebebeb;background-image:-moz-linear-gradient(top, #f5f5f5, #dcdcdc);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#f5f5f5), to(#dcdcdc));background-image:-webkit-linear-gradient(top, #f5f5f5, #dcdcdc);background-image:-o-linear-gradient(top, #f5f5f5, #dcdcdc);background-image:linear-gradient(to bottom, #f5f5f5, #dcdcdc);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#fff5f5f5\', endColorstr=\'#ffdcdcdc\', GradientType=0);background-color:#e9e9e9;border:1px solid #aeaeae;color:#333333;text-shadow:0 1px 0 #ffffff;-webkit-box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);-moz-box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);background-color:#f5f5f5;background-image:-moz-linear-gradient(top, #ffffff, #e5e5e5);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e5e5e5));background-image:-webkit-linear-gradient(top, #ffffff, #e5e5e5);background-image:-o-linear-gradient(top, #ffffff, #e5e5e5);background-image:linear-gradient(to bottom, #ffffff, #e5e5e5);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#ffffffff\', endColorstr=\'#ffe5e5e5\', GradientType=0);background-color:#eeeeee;border-color:#aeaeae;border-top-color:#b7b7b7;border-bottom-color:#989898;background-position:0 0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;z-index:10;line-height:16px;}\n.reorderable-helper.reorderable-remove{background-color:#fdf7f5;background-image:-moz-linear-gradient(top, #ffffff, #faeae6);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#faeae6));background-image:-webkit-linear-gradient(top, #ffffff, #faeae6);background-image:-o-linear-gradient(top, #ffffff, #faeae6);background-image:linear-gradient(to bottom, #ffffff, #faeae6);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#ffffffff\', endColorstr=\'#fffaeae6\', GradientType=0);border-color:#cfb3ab;}\nth.reorderable{cursor:move;padding:0;}th.reorderable.sorts:after{display:none;}\n.on.reorderable-label:before{content:"";position:absolute;display:block;height:20px;width:7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAG0lEQVQIW2M0Njb+f/bsWUYYzciABuAyOFUAAKKMEAXhn6ySAAAAAElFTkSuQmCC) repeat;top:2px;left:4px;opacity:0.5;margin-bottom:-10px;}\nth.reorderable.moving{color:transparent;text-shadow:none;background:#cccccc;}\nth.reorderable.moving .reorderable-label:before{background:none;}\nth.reorderable.moving .reorderable-label:after{color:transparent;}\n.table-insertion-cursor{border-left:1px dashed #d85d3c;position:absolute;top:0;left:-100px;bottom:0;margin-left:-1px;display:none;}\n@media print{td.expands,td.actions,th.col-info{display:none !important;} .reorderable-label{padding-left:8px !important;}.reorderable-label:before{background:none !important;} .shared-eventsviewer pre.raw-event{word-break:break-all !important;word-wrap:break-word !important;overflow-wrap:break-word !important;white-space:normal !important;} .shared-eventsviewer,.events-viewer-wrapper{max-width:100% !important;width:100% !important;overflow:hidden !important;}}.shared-fieldinfo{width:600px;}.shared-fieldinfo .popdown-dialog-body{padding:0 20px 20px 20px;}\n.shared-fieldinfo h2{margin:-1px -21px 10px -21px;line-height:40px;font-size:16px;font-weight:normal;padding:0 60px 0 20px;background-color:#ebebeb;background-image:-moz-linear-gradient(top, #f5f5f5, #dcdcdc);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#f5f5f5), to(#dcdcdc));background-image:-webkit-linear-gradient(top, #f5f5f5, #dcdcdc);background-image:-o-linear-gradient(top, #f5f5f5, #dcdcdc);background-image:linear-gradient(to bottom, #f5f5f5, #dcdcdc);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#fff5f5f5\', endColorstr=\'#ffdcdcdc\', GradientType=0);background-color:#e9e9e9;border:1px solid #aeaeae;border-top-color:#b7b7b7;border-bottom-color:#989898;color:#333333;text-shadow:0 1px 0 #ffffff;-webkit-box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);-moz-box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);box-shadow:0px 1px 1px rgba(0, 0, 0, 0.08);-webkit-border-top-right-radius:4px;-moz-border-radius-topright:4px;border-top-right-radius:4px;-webkit-border-top-left-radius:4px;-moz-border-radius-topleft:4px;border-top-left-radius:4px;border-bottom:1px solid #a9a9a9;box-shadow:none;*zoom:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}\n.shared-fieldinfo h3{font-size:12px;font-weight:bold;margin:15px 0 0 0;}\n.shared-fieldinfo p{line-height:30px;}\n.shared-fieldinfo .select-field-label{display:inline-block;margin:0 5px 0 20px;line-height:26px;color:#999999;vertical-align:top;}\n.shared-fieldinfo .fields-values>li,.shared-fieldinfo .fields-numeric>li{width:30%;}\n.shared-fieldinfo .graph-bar{margin:0 20px 0 0;height:16px;background-color:#999999;background-color:#b8b8b8;background-image:-moz-linear-gradient(top, #cccccc, #999999);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#cccccc), to(#999999));background-image:-webkit-linear-gradient(top, #cccccc, #999999);background-image:-o-linear-gradient(top, #cccccc, #999999);background-image:linear-gradient(to bottom, #cccccc, #999999);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#ffcccccc\', endColorstr=\'#ff999999\', GradientType=0);max-width:100%;}\n.shared-fieldinfo table.table-condensed{margin:13px -20px -5px -20px;width:598px;}\n.shared-fieldinfo td.value{max-width:200px;word-wrap:break-word;padding-left:20px;}\n.shared-fieldinfo th.value{padding-left:20px;}\n.shared-fieldinfo ul.inline{line-height:20px;margin-bottom:0;}.shared-fieldinfo ul.inline li{padding-left:0;}\n.shared-fieldinfo .close{display:block;top:15px;right:20px;opacity:0.4;filter:alpha(opacity=40);overflow:hidden;position:absolute;}.shared-fieldinfo .close:hover{opacity:0.8;filter:alpha(opacity=80);}\n')}),requirejs.s.contexts._.nextTick=requirejs.nextTick;