define("contrib/text!views/shared/splunkbar/AppMenu.html",[],function(){return'<%\n    currentAppname = currentApp ? currentApp.name : \'search\';   // TODO: search fallback is not always safe assumption\n%>\n<a href="#" class="dropdown-toggle"><%- currentApp ? _(\'App\').t()+\': \' + currentApp.label : _(\'Apps\').t() %><b class="caret"></b></a>\n<div class="dropdown-menu dropdown-menu-selectable dropdown-menu-tall" id="global-apps-menu">\n    <div class="arrow"></div>\n    <ul class="menu-list">\n        <% _.each(apps, function(i) { %>\n        <li>\n            <a href="<%- i.href %>">\n                <% if (currentApp && i.name === currentApp.name) { %> <i class="icon-check"></i><% } %>\n                <% if (i.icon) { %> <img data-icosrc="<%-i.icon%>" alt="menu icon" class="menu-icon"><% } %>\n                <span class="menu-label"><%= i.label %></span>\n            </a>\n        </li>\n        <% }); %>\n    </ul>\n\n    <a class="btn nav-btn" href="<%- make_url(\'manager\', currentAppname, \'apps\',\'remote\') %>"><%- _("Find More Apps").t() %></a>\n    <a class="btn nav-btn" href="<%- make_url(\'manager\', currentAppname, \'apps\',\'local\') %>"><%- _("Manage Apps").t() %></a>\n</div>\n'}),define("views/shared/splunkbar/AppMenu",["jquery","module","views/Base","views/shared/delegates/Popdown","splunk.util","contrib/text!views/shared/splunkbar/AppMenu.html","uri/route"],function(e,t,n,r,i,s,o){return n.extend({events:{click:"setIcons"},moduleId:t.id,template:s,tagName:"li",className:"dropdown menu-apps",initialize:function(){n.prototype.initialize.apply(this,arguments),this.currentApp=this.model.application.get("app")==="launcher"?null:this.model.application.get("app"),this.collection.apps.on("change reset",this.render,this),this.collection.apps.length>0&&this.render()},render:function(){var e=this,t,n=null,s=this.collection.apps.map(function(r,s,u){var a=o.appIcon(e.model.application.get("root"),e.model.application.get("locale"),e.model.application.get("owner"),r.entry.get("name"));return t={href:i.make_url("/app/"+r.entry.get("name")),label:r.entry.content.get("label"),name:r.entry.get("name"),icon:a},r.entry.get("name")===e.currentApp&&(n=t),t}),u=this.compiledTemplate({apps:s,currentApp:n,make_url:i.make_url});return this.$el.html(u),this.popdown=new r({el:this.$("#global-apps-menu").parent(),mode:"dialog"}),this},setIcons:function(){if(this.haveIcons)return;this.haveIcons=!0;var t=this.$el.find(".menu-icon");t.each(function(t,n){n=e(n),n.attr("src",n.attr("data-icosrc"))})}})}),define("contrib/text!views/shared/splunkbar/SystemMenuSection.html",[],function(){return"\n<i class=\"icon icon-<%-this.model.get('icon')%>\"></i>\n<h5><%=this.model.get('label')%></h5>\n<ul class=\"menu\">\n    <%_.each(this.model.get('items'), function(item, i){ %>\n        <li><a href=\"<%-item.get('url')%>\"><%-_(item.entry.content.get('menu.label')).t() || _(item.entry.get('name')).t() || ''%></a></li>\n    <%});%>\n</ul>"}),define("views/shared/splunkbar/SystemMenuSection",["jquery","underscore","module","views/Base","contrib/text!views/shared/splunkbar/SystemMenuSection.html"],function(e,t,n,r,i){return r.extend({moduleId:n.id,template:i,className:"menu-section",initialize:function(){r.prototype.initialize.apply(this,arguments);var e=this.model.get("items");e.sort(function(e,t){return parseInt(e.get("order"),10)-parseInt(t.get("order"),10)})},render:function(){var e=this.compiledTemplate(this.model);return this.$el.html(e),this}})}),define("contrib/text!views/shared/splunkbar/SystemMenu.html",[],function(){return'<a href="#" class="dropdown-toggle"><%- _("Settings").t() %><b class="caret"></b></a>\n<div class="popdown-dialog mega-menu" id="global-system-menu">\n    <div class="arrow"></div>\n    <div class="popdown-dialog-body">\n    </div><!-- /.popdown-dialog-body -->\n</div><!-- /.podown -->'}),define("views/shared/splunkbar/SystemMenu",["jquery","underscore","backbone","module","splunk.util","views/Base","views/shared/delegates/Popdown","views/shared/splunkbar/SystemMenuSection","contrib/text!views/shared/splunkbar/SystemMenu.html"],function(e,t,n,r,i,s,o,u,a){return s.extend({moduleId:r.id,template:a,tagName:"li",className:"dropdown menu-system",initialize:function(){var e=this;s.prototype.initialize.apply(this,arguments),e.debouncedRender(),this.collection.sections.on("ready",function(){e.debouncedRender()},this)},render:function(){var t=this.compiledTemplate({}),n=e(t),r=n.find(".popdown-dialog-body");this.addSections(r),this.$el.html(n);var i=this.$el.find("#global-system-menu");return this.children.popdown=new o({el:i.parent(),mode:"dialog"}),this},addSections:function(e){var t=this;this.collection.sections.each(function(n){if(n.get("items")&&n.get("items").length===0)return;var r=t.children[n.get("id")]=new u({model:n});e.append(r.render().el)})}})}),define("contrib/text!views/shared/splunkbar/UserMenu.html",[],function(){return'<a href="#" class="dropdown-toggle"><span class="realname"><%-realName%></span><b class="caret"></b></a>\n<div class="dropdown-menu dropdown-menu-narrow global-user-menu">\n    <div class="arrow"></div>\n    <ul>\n        <li><a href="<%-accountLink%>" class="edit"><%- _("Edit Account").t() %></a></li>\n        <% if (logoutLink) { %>\n        <li><a href="<%-logoutLink%>" class="logout"><%- _("Logout").t() %></a></li>\n        <% } %>\n    </ul>\n</div>'}),define("views/shared/splunkbar/UserMenu",["underscore","module","views/Base","views/shared/delegates/Popdown","contrib/text!views/shared/splunkbar/UserMenu.html","uri/route"],function(e,t,n,r,i,s){return n.extend({moduleId:t.id,template:i,tagName:"li",className:"dropdown user",initialize:function(){n.prototype.initialize.apply(this,arguments),this.model.user.on("change",this.render,this),this.model.webConf.on("change",function(){this.SSOModeOn=typeof this.model.webConf.entry.content.get("trustedIP")!="undefined"&&this.model.webConf.entry.content.get("trustedIP").length>0,this.render()},this),this.model.user.entry.get("name")&&this.render()},render:function(){var e=this.model.user.entry.content.get("realname"),t=this.model.user.entry.get("name");if(!e||!e.length)e=t;var n=this.model.application.get("root"),i=this.model.application.get("locale"),o=s.manager(n,i,this.model.application.get("app"),["authentication","changepassword",t],{data:{action:"edit"}}),u=this.SSOModeOn?null:s.logout(n,i),a=this.compiledTemplate({userName:t,realName:e,accountLink:o,logoutLink:u});this.$el.html(a);var f=this.$el.find(".global-user-menu");return this.popdown=new r({el:f.parent(),mode:"dialog"}),this}})}),define("views/shared/splunkbar/messages/Message",["jquery","underscore","backbone","module","views/Base","splunk.util"],function(e,t,n,r,i,s){return i.extend({moduleId:r.id,className:"view-navbar-global navbar navbar-fixed-top",messageMap:{restart_required:t("Splunk must be restarted for changes to take effect. [[/manager/search/control|Click here to restart from the Manager]].").t()},initialize:function(){i.prototype.initialize.apply(this,arguments)},render:function(){var t=this.model.id,n=this.model.entry.get("name")||"",r,i=this.model.entry.content.get("severity")||"warn";n&&this.messageMap[n]?r=this.messageMap[n]:r=this.model.entry.content.get("message")||"";var o=this.compiledTemplate({msgId:n,msgFullId:t,msg:s.getWikiTransform(r),msgLevel:i});return this.$el=e(o),this},template:'<li class="<%- msgLevel %>" data-id="<%- msgFullId %>">            <span class="message-content"><%= msg %></span>            <a href="#" class="delete-message icon-x-circle ir">x</a>            </li>'})}),define("views/shared/splunkbar/messages/LegacyMessage",["jquery","underscore","backbone","module","views/Base","splunk.util"],function(e,t,n,r,i,s){return i.extend({moduleId:r.id,className:"view-navbar-global navbar navbar-fixed-top",messageMap:{restart_required:t("Splunk must be restarted for changes to take effect. [[/manager/search/control|Click here to restart from the Manager]].").t()},initialize:function(){i.prototype.initialize.apply(this,arguments)},render:function(){var t=(this.model.get("id")||"").toLowerCase(),n,r=this.model.get("severity")||"warn";t&&this.messageMap[t]?n=this.messageMap[t]:n=this.model.get("content")||"";var i=this.compiledTemplate({msgId:t,msg:s.getWikiTransform(n),msgLevel:r});return this.$el=e(i),this},template:'<li class="<%- msgLevel %>" data-islegacy="1" data-id="<%- msgId %>">            <span><%= msg %></span>            <a href="#" class="delete-message icon-x-circle ir">x</a>            </li>'})}),define("contrib/text!views/shared/splunkbar/messages/Master.html",[],function(){return'<a href="#" class="dropdown-toggle">\n    <span class="label label-warning" style="display: none;"><%- collection.length %></span> <%- _("Messages").t() %><b class="caret"></b>\n</a>\n<div class="dropdown-menu" id="global-messages-menu">\n\n    <div class="arrow"></div>\n    <ul class="message-list" style="display: none;">\n    </ul>\n    <div class="no-messages">\n        <%- _("You have no messages.").t() %>\n    </div>\n    <a href="#" class="delete-all-messages btn pull-right" style="display: none;"><%- _("Delete All").t() %></a>\n</div>\n'}),define("views/shared/splunkbar/messages/Master",["jquery","underscore","module","views/Base","views/shared/delegates/Popdown","views/shared/delegates/StopScrollPropagation","collections/services/Messages","views/shared/splunkbar/messages/Message","views/shared/splunkbar/messages/LegacyMessage","contrib/text!views/shared/splunkbar/messages/Master.html"],function(e,t,n,r,i,s,o,u,a,f){return r.extend({moduleId:n.id,template:f,tagName:"li",className:"dropdown messages",initialize:function(){r.prototype.initialize.apply(this,arguments),this.legacyMessages=this.collection.legacyMessages||!1,this.collection=this.collection.messages,this.collection.on("reset remove",this.renderMessages,this),this.legacyMessages&&this.legacyMessages.on("reset remove",this.renderMessages,this)},events:{"click .message-list .delete-message":"deleteMessage","click .delete-all-messages":"deleteAllMessages"},render:function(){var e=this.compiledTemplate({collection:this.collection});return this.$el.html(e),this.children.popdown=new i({el:this.el,mode:"dialog"}),this.children.stopScrollPropagation=new s({el:this.$("#global-messages-menu ul"),mode:"dialog"}),this},renderMessages:function(){var e=this.collection.length;this.legacyMessages&&(e+=this.legacyMessages.length),this.$(".label-warning").text(e),t.each(this.children,function(e,t){t.substr(0,7)=="message"&&(this.children[t].remove(),delete this.children[t])},this);var n;this.collection.each(function(e,t){n=new u({model:e}),this.children["message"+e.get("id")]=n,this.$("#global-messages-menu .message-list").append(n.render().$el)},this);var r=0;this.legacyMessages&&(r=this.legacyMessages.length,this.legacyMessages.each(function(e){n=new a({model:e}),this.children["messageLegacy"+e.get("id")]=n,this.$("#global-messages-menu .message-list").append(n.render().$el)},this)),this.collection.length>0||r>0?(this.$(".label-warning, .delete-all-messages, .message-list").show(),this.$("#global-messages-menu").addClass("dropdown-menu-wide"),this.$(".no-messages").hide(),this.$("#global-messages-menu").is(":visible")&&this.children.popdown.adjustPosition()):(this.$(".label-warning, .delete-all-messages, .message-list").hide(),this.$("#global-messages-menu").removeClass("dropdown-menu-wide"),this.$(".no-messages").show())},deleteMessage:function(t){t.preventDefault();var n=e(t.target).parent(),r=n.data("id"),i=n.data("islegacy"),s;this.legacyMessages&&i?(s=this.legacyMessages.get(r),s&&this.legacyMessages.remove(s)):(s=this.collection.get(r),s&&s.destroy()),this.collection.length===0&&this.legacyMessages!==!1&&this.legacyMessages.length===0&&this.children.popdown.hide()},deleteAllMessages:function(e){e.preventDefault(),this.collection.destroyAll(),this.legacyMessages&&this.legacyMessages.reset(),this.children.popdown.hide()}})}),define("contrib/text!views/shared/splunkbar/ActivityMenu.html",[],function(){return'<a href="#" class="dropdown-toggle"><%- _("Activity").t() %><b class="caret"></b></a>\n<div class="dropdown-menu dropdown-menu-narrow" id="global-activity-menu">\n    <div class="arrow"></div>\n    <ul>\n        <li>\n            <a class="primary-link" href="<%= jobLink %>"><%- _("Jobs").t() %></a>\n            <a class="secondary-link" href="<%= jobLink %>" target="_blank"><i class="icon-external"></i></a>\n        </li>\n        <li>\n            <a class="primary-link" href="<%= alertsLink %>"><%- _("Triggered Alerts").t() %></a>\n            <a class="secondary-link" href="<%= alertsLink %>" target="_blank"><i class="icon-external"></i></a>\n        </li>\n	<% if (typeof statusLink !== "undefined" && statusLink !== null) { %>\n		<li>\n		    <a class="primary-link" href="<%= statusLink %>"><%- _("System Activity").t() %></a>\n		    <a class="secondary-link" href="<%= statusLink %>" target="_blank"><i class="icon-external"></i></a>\n		</li>\n	<% } %>\n    </ul>\n</div>\n'}),define("views/shared/splunkbar/ActivityMenu",["underscore","jquery","module","views/Base","views/shared/delegates/Popdown","contrib/text!views/shared/splunkbar/ActivityMenu.html","splunk.util","uri/route"],function(e,t,n,r,i,s,o,u){return r.extend({moduleId:n.id,template:s,tagName:"li",className:"dropdown activity",initialize:function(){r.prototype.initialize.apply(this,arguments),this.render(),this.model.application.on("change",this.render),this.model.user.on("change",this.render)},render:function(){if(typeof this.model.application.get("app")=="undefined"||typeof this.model.user.entry.content.get("roles")=="undefined")return this;var e=this.model.application.get("app"),t=this.model.user.entry.content.get("roles").indexOf("admin")>-1,n=u.page(this.model.application.get("root"),this.model.application.get("locale"),e,"job_management"),r=u.triggeredAlerts(this.model.application.get("root"),this.model.application.get("locale"),e),s=null;e=="system"&&(n=u.page(this.model.application.get("root"),this.model.application.get("locale"),"search","job_management")),t&&(s=u.page(this.model.application.get("root"),this.model.application.get("locale"),"search","status_index"));var o=this.compiledTemplate({jobLink:n,alertsLink:r,statusLink:s});return this.$el.html(o),this.children.popdown=new i({el:this.el,mode:"dialog"}),this}})}),define("contrib/text!views/shared/splunkbar/HelpMenu.html",[],function(){return'<a href="#" class="dropdown-toggle"><%- _("Help").t() %><b class="caret"></b></a>\n<div class="dropdown-menu" id="global-help-menu">\n    <div class="arrow"></div>\n    <ul>\n        <li><a class="external" href="<%- makeDocLink(\'search_app.tutorial\') %>" target="_blank"><%- _("Tutorials").t() %></a></li>\n        <li><a class="external" href="http://splunk-base.splunk.com/" target="_blank"><%- _("Splunk Answers").t() %></a></li>\n        <li><a class="external" href="http://www.splunk.com/support" target="_blank"><%- _("Contact Support").t() %></a></li>\n        <li><a class="external" href="<%- makeDocLink(currentPageDocLocation) %>" target="_blank"><%- _("Documentation").t() %></a></li>\n    </ul>\n    <form class="form-search" action="#help" method="get">\n    </form>\n</div>\n'}),define("views/shared/splunkbar/HelpMenu",["underscore","jquery","module","views/Base","views/shared/delegates/Popdown","views/shared/controls/TextControl","contrib/text!views/shared/splunkbar/HelpMenu.html","splunk.util","uri/route"],function(e,t,n,r,i,s,o,u,a){return r.extend({moduleId:n.id,template:o,tagName:"li",className:"dropdown help",initialize:function(){r.prototype.initialize.apply(this,arguments),this.children.searchInput=new s({placeholder:e("Search Documentation").t(),inputClassName:"input-medium search-query"}),this.model.appLocal.on("change reset",this.render,this)},events:{"keypress input":"onDocsSearch"},render:function(){var e=["app",this.model.application.get("app"),this.model.application.get("page")].join("."),t=this.compiledTemplate({makeDocLink:this.makeDocLink.bind(this),currentPageDocLocation:e});this.$el.html(t);var n=this.$("#global-help-menu");return n.find(".form-search").append(this.children.searchInput.render().el),this.children.popdown=new i({el:n.parent(),mode:"dialog"}),this},onDocsSearch:function(e){if(e.keyCode===13){var n=t(e.target).val();e.preventDefault(),e.stopPropagation(),t.when(this.serverInfoDfd).then(function(){var e=a.docSearch(this.model.application.get("locale"),this.model.serverInfo.entry.content.get("version"),u.normalizeBoolean(this.model.serverInfo.entry.content.get("isFree")),u.normalizeBoolean(this.model.serverInfo.entry.content.get("isTrial")),n);window.open(e)}.bind(this)),t(e.target).val(""),this.children.popdown.hide(),e.preventDefault()}},makeDocLink:function(e){return a.docHelp(this.model.application.get("root"),this.model.application.get("locale"),e,this.model.application.get("app"),this.model.appLocal.entry.content.get("version"),this.model.appLocal.appAllowsDisable(),this.model.appLocal.entry.content.get("docs_section_override"))}})}),!function(e,t,n){function o(e,n){var r=t.createElement(e||"div"),i;for(i in n)r[i]=n[i];return r}function u(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function f(e,t,n,r){var o=["opacity",t,~~(e*100),n,r].join("-"),u=.01+n/r*100,f=Math.max(1-(1-e)/t*(100-u),e),l=s.substring(0,s.indexOf("Animation")).toLowerCase(),c=l&&"-"+l+"-"||"";return i[o]||(a.insertRule("@"+c+"keyframes "+o+"{"+"0%{opacity:"+f+"}"+u+"%{opacity:"+e+"}"+(u+.01)+"%{opacity:1}"+(u+t)%100+"%{opacity:"+e+"}"+"100%{opacity:"+f+"}"+"}",a.cssRules.length),i[o]=1),o}function l(e,t){var i=e.style,s,o;if(i[t]!==n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(o=0;o<r.length;o++){s=r[o]+t;if(i[s]!==n)return s}}function c(e,t){for(var n in t)e.style[l(e,n)||n]=t[n];return e}function h(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]===n&&(e[i]=r[i])}return e}function p(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}var r=["webkit","Moz","ms","O"],i={},s,a=function(){var e=o("style",{type:"text/css"});return u(t.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),d={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"},v=function m(e){if(!this.spin)return new m(e);this.opts=h(e||{},m.defaults,d)};v.defaults={},h(v.prototype,{spin:function(e){this.stop();var t=this,n=t.opts,r=t.el=c(o(0,{className:n.className}),{position:n.position,width:0,zIndex:n.zIndex}),i=n.radius+n.length+n.width,u,a;e&&(e.insertBefore(r,e.firstChild||null),a=p(e),u=p(r),c(r,{left:(n.left=="auto"?a.x-u.x+(e.offsetWidth>>1):parseInt(n.left,10)+i)+"px",top:(n.top=="auto"?a.y-u.y+(e.offsetHeight>>1):parseInt(n.top,10)+i)+"px"})),r.setAttribute("aria-role","progressbar"),t.lines(r,t.opts);if(!s){var f=0,l=n.fps,h=l/n.speed,d=(1-n.opacity)/(h*n.trail/100),v=h/n.lines;(function m(){f++;for(var e=n.lines;e;e--){var i=Math.max(1-(f+e*v)%h*d,n.opacity);t.opacity(r,n.lines-e,i,n)}t.timeout=t.el&&setTimeout(m,~~(1e3/l))})()}return t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=n),this},lines:function(e,t){function i(e,r){return c(o(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:r,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*n+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.corners*t.width>>1)+"px"})}var n=0,r;for(;n<t.lines;n++)r=c(o(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:s&&f(t.opacity,t.trail,n,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&u(r,c(i("#000","0 0 4px #000"),{top:"2px"})),u(e,u(r,i(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),function(){function e(e,t){return o("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}var t=c(o("group"),{behavior:"url(#default#VML)"});!l(t,"transform")&&t.adj?(a.addRule(".spin-vml","behavior:url(#default#VML)"),v.prototype.lines=function(t,n){function s(){return c(e("group",{coordsize:i+" "+i,coordorigin:-r+" "+ -r}),{width:i,height:i})}function l(t,i,o){u(a,u(c(s(),{rotation:360/n.lines*t+"deg",left:~~i}),u(c(e("roundrect",{arcsize:n.corners}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:o}),e("fill",{color:n.color,opacity:n.opacity}),e("stroke",{opacity:0}))))}var r=n.length+n.width,i=2*r,o=-(n.width+n.length)*2+"px",a=c(s(),{position:"absolute",top:o,left:o}),f;if(n.shadow)for(f=1;f<=n.lines;f++)l(f,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(f=1;f<=n.lines;f++)l(f);return u(t,a)},v.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}):s=l(t,"animation")}(),typeof define=="function"&&define.amd?define("spin",[],function(){return v}):e.Spinner=v}(window,document),define("views/shared/WaitSpinner",["underscore","module","views/Base","spin"],function(e,t,n,r){return n.extend({moduleId:t.id,tagName:"div",initialize:function(){var t={lines:8,length:2,width:2,radius:3,corners:1,rotate:0,color:"#333",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:0,top:"0",left:"0"};e.defaults(this.options,t),n.prototype.initialize.apply(this,arguments),this.spinner=new r(this.options),this.active=!1},stop:function(){return this.active=!1,this.spinner.stop(),this},start:function(){return this.active=!0,this.spinner.spin(this.el),this},render:function(){return this}})}),define("contrib/text!views/shared/splunkbar/messages/NoConnectionOverlay.html",[],function(){return'<div class="modal-backdrop fade in"></div>\n<div class="modal disconnection-warning-modal">\n	<h3>Reconnecting to Splunk server</h3>\n	<p>Your network connection may have been lost or Splunk server may be down.</p>\n</div>'}),define("views/shared/splunkbar/messages/NoConnectionOverlay",["underscore","module","views/Base","views/shared/WaitSpinner","contrib/text!views/shared/splunkbar/messages/NoConnectionOverlay.html"],function(e,t,n,r,i){return n.extend({moduleId:t.id,template:i,className:"splunk-components",initialize:function(){n.prototype.initialize.apply(this,arguments);var e={lines:9,length:6,width:3,radius:6,corners:1,color:"#569A23",className:"disconnection-warning-spinner"};this.children.spinner=new r(e),this.visible=!0,this.$el.hide()},show:function(){if(this.visible)return;this.visible=!0,this.$el.show(),this.children.spinner.start()},hide:function(){if(!this.visible)return;this.visible=!1,this.$el.hide(),this.children.spinner.stop()},render:function(){return this.$el.html(this.compiledTemplate),this.$(".modal").append(this.children.spinner.render().el),this}})}),define("models/services/configs/Web",["models/SplunkDBase"],function(e){return e.extend({url:"configs/conf-web",urlRoot:"configs/conf-web",initialize:function(){e.prototype.initialize.apply(this,arguments)}})}),define("helpers/polling_manager",["underscore","jquery","backbone"],function(e,t,n){function o(e){if(e.active()!==!0){window.clearTimeout(e.timeoutId);return}var n=function(){e.trigger("success"),e.model.off("sync",n)},r=t.extend(!0,{},e.options||{},{success:function(t,n,r){e.trigger("success"),e.options.condition(e.model)!==!0?(e.trigger("complete"),e.stop({silent:!0})):e.timeoutId=window.setTimeout(function(){o(e)},e.options.delay)},error:function(t,n,r){e.trigger("error"),e.options.stopOnError?e.stop({silent:!0}):e.timeoutId=window.setTimeout(function(){o(e)},e.options.delay)}});e.xhr=e.model.fetch(r)}var r={delay:1e3,stopOnError:!0,condition:function(){return!0}},i=["start","stop","success","error","complete"],s=function(t,n){this.set(t,n)};e.extend(s.prototype,n.Events,{set:function(t,s){return this.model=t,this.options=e.extend(e.clone(r),s||{}),e.each(i,function(e){var t=this.options[e];typeof t=="function"&&this.on(e,t,this)},this),this.model instanceof n.Model&&this.model.on("destroy",this.stop,this),this.stop({silent:!0})},start:function(e){return this.active()===!0?this:(e=e||{},e.silent||this.trigger("start"),this.options.active=!0,o(this),this)},stop:function(e){return e=e||{},e.silent||this.trigger("stop"),this.options.active=!1,clearTimeout(this.timeoutId),this.xhr&&typeof this.xhr.abort=="function"&&this.xhr.abort(),this.xhr=null,this},active:function(){return this.options.active===!0}});var u=[];return{get:function(t){return e.find(u,function(e){return e.model===t})},getPoller:function(e,t){var n=this.get(e);return n?n.set(e,t):(n=new s(e,t),u.push(n)),n},start:function(e,t){return this.getPoller(e,t).start({silent:!0})},stop:function(e){var t=this.get(e);return t?(t.stop(),!0):!1},size:function(){return u.length}}}),define("contrib/text!views/shared/splunkbar/Master.html",[],function(){return'\n<div class="navbar-inner">\n    <div class="no_connection-overlay"></div>\n    <a href="<%-homeLink%>" class="brand" title="splunk &gt; <%- _(\'listen to your data\').t() %>">splunk<strong>&gt;</strong></a>\n    <ul class="navbar-global-nav nav">\n        <li class="dropdown apps">\n            <a href="#" class="dropdown-toggle"><%- _("Apps").t() %><b class="caret"></b></a>\n        </li>\n    </ul>\n\n    <ul class="navbar-global-nav nav pull-right">\n        <li class="dropdown user"><a href="#" class="dropdown-toggle"><%- _("Admin").t() %><b class="caret"></b></a></li>\n        <li class="dropdown messages"><a href="#" class="dropdown-toggle"><%- _("Messages").t() %><b class="caret"></b></a></li>\n        <li class="dropdown system<%- options.section==\'system\' ? \' active \' : \'\'%>">\n            <a href="#" class="dropdown-toggle"><%- _("System").t() %><b class="caret"></b></a>\n        </li>\n        <li class="dropdown activity"><a href="#"><%- _("Activity").t() %></a></li>\n        <li class="dropdown help"><a href="#" class="dropdown-toggle"><%- _("Help").t() %><b class="caret"></b></a></li>\n    </ul><!-- /.user-nav -->\n</div><!-- /.navbar-inner -->\n'}),define("views/shared/splunkbar/Master",["jquery","underscore","backbone","module","splunk.util","views/Base","views/shared/delegates/Popdown","views/shared/splunkbar/AppMenu","views/shared/splunkbar/SystemMenu","views/shared/splunkbar/UserMenu","views/shared/splunkbar/messages/Master","views/shared/splunkbar/ActivityMenu","views/shared/splunkbar/HelpMenu","views/shared/splunkbar/messages/NoConnectionOverlay","models/services/data/UserPref","models/services/AppLocal","models/services/authentication/User","models/services/server/ServerInfo","models/services/configs/Web","models/Application","collections/services/authentication/CurrentContexts","collections/services/AppLocals","collections/services/Messages","collections/services/data/ui/Managers","collections/SystemMenuSections","helpers/polling_manager","contrib/text!views/shared/splunkbar/Master.html","uri/route","util/splunkd_utils"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L){var A=s.extend({moduleId:r.id,template:C,className:"navbar",initialize:function(){s.prototype.initialize.apply(this,arguments),this.MAX_RETRIES_BEFORE_FAIL=2},render:function(){var n=k.page(this.model.application.get("root"),this.model.application.get("locale"),"launcher","home"),r=0,s=this.compiledTemplate({makeUrl:i.make_url,options:this.options,homeLink:n});this.$el.html(s),this.children.apps=new u({collection:this.collection,model:this.model}),this.$(".apps.dropdown").replaceWith(this.children.apps.el),this.children.systemMenu=new a({collection:{sections:this.collection.sections},model:{application:this.model.application}}),this.$(".system.dropdown").replaceWith(this.children.systemMenu.el),this.children.userMenu=new f({collection:{currentContext:this.model.currentContext},model:{user:this.model.user,application:this.model.application,webConf:this.model.webConf}}),this.$(".user.dropdown").replaceWith(this.children.userMenu.el),this.children.messages=new l({collection:{messages:this.collection.messages,legacyMessages:this.collection.legacyMessages}}),this.children.noConnectionOverlay=new p,e("body").append(this.children.noConnectionOverlay.render().el),this.collection.messages.on("serverValidated",function(e,n,i){if(e){this.children.noConnectionOverlay.hide(),r=0;return}var s=t.find(i,function(e){return e.type==L.NETWORK_ERROR||"network_error"});s&&(r==this.MAX_RETRIES_BEFORE_FAIL?this.children.noConnectionOverlay.show():r+=1)},this),this.$(".messages.dropdown").replaceWith(this.children.messages.render().el),this.children.activityMenu=new c({model:{user:this.model.user,application:this.model.application}}),this.$(".activity").replaceWith(this.children.activityMenu.el),this.children.helpMenu=new h({model:{application:this.model.application,appLocal:this.model.appLocal,serverInfo:this.model.serverInfo}}),this.$(".help").replaceWith(this.children.helpMenu.render().el);var o=this.getActiveMenu();return o&&o.addClass("active"),this},getActiveMenu:function(){var e=n.history.location.pathname,t=e.split("/"),r=t.length,i=[t[r-2],t[r-1]],s=i.join("/"),o=this.model.application.get("locale"),u=this.model.application.get("app"),a=["search/status_index","search/search_status","search/search_detail_activity","search/search_activity_by_user","search/splunkweb_status","search/internal_messages","search/scheduler_status","search/scheduler_user_app","search/scheduler_savedsearch","search/scheduler_status_errors","search/pdf_activity"],f="authentication/changepassword",l=u+"/job_management",c=o+"/alerts",h="launcher/home",p=o+"/manager",d=null;return a.indexOf(s)>-1||e.indexOf(l)>-1||e.indexOf(c)>-1?d=this.$(".activity"):e.indexOf(f)>-1?d=this.$(".user"):e.indexOf(p)>-1?d=this.$(".menu-system"):e.indexOf(h)>-1?d=this.$(".brand"):d=this.$(".menu-apps"),d}},{create:function(n){var r=2e3;n=n||{},n.collection=n.collection||{},n.model=n.model||{};var s=e.Deferred();n.model.application||(n.model.application=new b),n.model.application.get("app")?s.resolve():n.model.application.on("change",s.resolve),n.model.appLocal||(n.model.appLocal=new v),s.done(function(){n.model.application.get("app")!=="system"&&n.model.appLocal.fetch({url:L.fullpath(n.model.appLocal.url+"/"+n.model.application.get("app")),data:{app:n.model.application.get("app"),owner:n.model.application.get("owner")}})});var o=e.Deferred();o.resolve(n.model.application.get("owner"));if(!n.collection.apps){var u=n.collection.apps=new E;e.when(o).done(function(){var t=e.Deferred();u.fetch({data:{sort_key:"name",sort_dir:"desc",app:"-",owner:n.model.application.get("owner"),search:"visible=true AND disabled=0 AND name!=launcher",count:-1}}),u.on("reset sort",t.resolve);var r=new d;r.fetch({data:{app:"user-prefs",owner:n.model.application.get("owner"),count:-1}}),r.on("change",function(){t.done(function(){u.sortWithString(r.entry.content.get("appOrder"))})})})}var a=e.Deferred();n.model.user||(n.model.user=new m,e.when(o).done(function(e){n.model.user.set("id",e),n.model.user.fetch()})),n.model.user.on("reset",function(){a.resolve(n.model.user)}),n.collection.messages||(n.collection.messages=new S);var f=N.start(n.collection.messages,{delay:r,stopOnError:!1,data:{count:1e3}});n.collection.managers||(n.collection.managers=new x,e.when(o).done(function(e){n.collection.managers.fetch({data:{app:"-",owner:e,count:0,digest:1}})}));var l=n.collection.sections=new T;return l.add({id:"knowledge_configurations",label:t("Knowledge").t(),icon:"bookmark",order:1}),l.add({id:"auth_configurations",label:t("Users and authentication").t(),icon:"user",order:6}),l.add({id:"deployment_configurations",label:t("Distributed environment").t(),icon:"distributed-environment",order:5}),l.add({id:"system_configurations",label:t("System").t(),icon:"settings",order:2}),l.add({id:"data_configurations",label:t("Data").t(),icon:"data",order:4}),n.collection.managers.on("reset",function(){n.collection.managers.each(function(e){var t=e.entry.content.get("menu.url")||"",r=e.entry.content.get("menu.name"),s=e.entry.content.get("menu.order")||1e3,o=k.encodeRoot(n.model.application.get("root"),n.model.application.get("locale")),u=o+i.sprintf(t,{namespace:n.model.application.get("app")||"NOTHING"});if(r){var a=l.get(r);if(a){var f=a.get("items");f&&f.push(e)}}e.set({url:u,order:s})}),l.trigger("ready")}),n.model.serverInfo||(n.model.serverInfo=new g,n.model.serverInfo.fetch()),n.model.webConf=new y({id:"settings"}),n.model.webConf.fetch(),new A(n)}});return A}),define("contrib/text!views/shared/appbar/NavItem.html",[],function(){return'<% var hasSubmenu = item.submenu && item.submenu.length && item.submenu.length > 0; %>\n<a href="<%-item.uri%>" title="<%-item.label%>" class="<%=hasSubmenu ? \'dropdown-toggle\' : \'\'%>" <%=hasSubmenu ? \'data-toggle="popdown"\' : \'\'%>>\n    <%=_(item.label).t()%>\n    <%if(hasSubmenu){%>\n       <b class="caret"></b>\n    <%}%>\n</a>\n<%if(hasSubmenu){%>\n    <div class="dropdown-menu">\n    	<div class="arrow"></div>\n    	<div class="slideNavPlaceHolder"></div>\n    </div>\n<%}%>\n'}),define("contrib/text!views/shared/AppNav-SlideNavTemplate.html",[],function(){return'<%if(!submenu){return "";}%>\n<ul class="slidenavList scroll-group">\n    <% _.each(submenu, function(i, index) { %>\n    <li data-index="<%=index%>" class="<%=i.divider ? \'divider\':\'\'%>">\n        <% if(!i.divider){ %>\n            <% if(i.submenu && i.submenu.length>0){ %>\n                <a href="#">\n                    <%- _(i.label).t() %>\n                </a>\n                <i class="icon-triangle-right-small"></i>\n            <%}else if (i.hasOwnProperty(\'reportUri\')) { %>\n                <a href="<%=i.reportUri%>" class="primary-link">\n                    <%- _(i.label).t() %>\n                </a>\n                <a href="<%=i.uri%>" class="secondary-link">\n                    <i class="icon-<%= i.hasOwnProperty(\'dispatchView\') && i.dispatchView === \'pivot\' ? \'pivot\' : \'search\' %>"></i>\n                </a>\n            <%} else { %>\n                <a href="<%=i.uri%>">\n                    <%- _(i.label).t() %>\n                </a>\n            <%}%>\n        <%}%>\n    </li>\n    <% }); %>\n</ul>\n'}),define("splunk.widget.slidenav",["jquery","jquery.ui.widget","jquery.ui.position"],function(e){return e.widget("splunk.slidenav",{options:{levelTemplate:"",navData:{},childPropertyName:"children"},_create:function(){var t=this;this.isAnimating=!1,this.$el=e(this.element),this.$wrap=e('<div class="auto"></div>'),this.$el.append(this.$wrap),this._chain=[this.addLevel(this.options.navData)],this.$backButton=e(t.templateBack()),this.$el.prepend(this.$backButton),this.$backButton.on("click",function(e){t.back(),e.preventDefault()}),this.$el.on("click","LI",function(n){var r=e(n.target).closest("LI");t.select(r,n)})},addLevel:function(t){var n=e(this.options.levelTemplate(t));return this.$wrap.append(n),this._chain&&n.position({of:this._chain[this._chain.length-1],my:"left top",at:"right top",collision:"none",offset:"0 0"}),n.data("slidenav",t),n},select:function(e,t){if(this.isAnimating)return!1;var n=e.closest("ul"),r=n.data("slidenav"),i=e.data("index");e=r[this.options.childPropertyName][i],e[this.options.childPropertyName]&&e[this.options.childPropertyName].length>0?(t&&t.preventDefault(),this.next(e)):this._trigger("select",t,e)},next:function(e){e.domReference=e.domReference||this.addLevel(e),this._chain.push(this.slide(e.domReference.show())),this.$backButton.show()},back:function(){if(this._chain.length<=1||this.isAnimating)return!1;this._chain.length===2&&this.$backButton.hide();var e=this._chain.pop();this.slide(this._chain[this._chain.length-1],function(){e.scrollTop(0).hide()})},slide:function(e,t){var n=this;return this.$wrap.outerHeight(e.outerHeight()),this.isAnimating=!0,this.$wrap.animate({left:-e.position().left},{duration:200,complete:function(){n.isAnimating=!1,t&&t.apply(n,arguments)}}),e},templateBack:function(){return this.options.templateBack||'<div class="backbutton" style="display: none;"><a href="#" class="slidenavback "><i class="icon-triangle-left-small"></i>Back</a></div>'}})}),define("views/shared/appbar/NavItem",["jquery","underscore","module","views/Base","views/shared/delegates/Popdown","contrib/text!views/shared/appbar/NavItem.html","contrib/text!views/shared/AppNav-SlideNavTemplate.html","views/shared/delegates/StopScrollPropagation","splunk.widget.slidenav"],function(e,t,n,r,i,s,o,u){var a=t.template(o),f=r.extend({moduleId:n.id,className:"nav-item",tagName:"li",initialize:function(){r.prototype.initialize.apply(this,arguments)},render:function(){var e;return this.options.navItemObj.divider?e=t.template(this.dividerTemplate,{}):e=t.template(s,{item:this.options.navItemObj,isActive:this.options.isActive}),this.$el.append(e),this.$el.addClass("nav-item-"+this.options.navItemObj.viewName),this.options.navItemObj.submenu&&this.options.navItemObj.submenu.length>0&&(this.$el.addClass("dropdown"),this.slideNav=this.$el.find(".slideNavPlaceHolder").slidenav({navData:this.options.navItemObj,levelTemplate:a,childPropertyName:"submenu"}),this.popdown=new i({el:this.$el,dialog:this.slidenav,mode:"dialog"}),this.children.stopScrollPropagation=new u({el:this.slideNav.find(".slidenavList")})),this},dividerTemplate:'<span class="divider" style="display: block;float: left;height: 10px;margin: 0 15px;opacity: 0.2;"></span>'});return f}),define("views/shared/appbar/AppNav",["jquery","underscore","backbone","module","views/Base","views/shared/appbar/NavItem"],function(e,t,n,r,i,s){return i.extend({moduleId:r.id,tagName:"ul",className:"nav nav-pills",initialize:function(){i.prototype.initialize.apply(this,arguments),this.model.appNav.on("change:nav",this.render,this),this.model.application.on("change:page",this.setActiveItem,this),this.render()},render:function(){var t=this,n=this.model.appNav.get("nav");return n?(e.each(n,function(e,n){var r=new s({navItemObj:n});t.$el.append(r.render().$el)}),this.setActiveItem.call(this),this):this},setActiveItem:function(){var e=this;if(this.model.application.get("page")){var t=this.model.application.get("page"),n=e.$el.find(".nav-item-"+t);n.addClass("active")}}})}),define("contrib/text!views/shared/appbar/AppLabel.html",[],function(){return'<a class="app-link" href="<%=appLink%>">\n    <div class="app-logo" style="display:none">\n        <img class="app-logo-img" src="<%=appLogo%>" alt="<%-appLabel%>" />\n    </div>\n\n    <div class="app-name" style="display:none">\n        <span class="app-label">\n            <%-_(appLabel).t()%>\n        </span>\n    </div>\n</a>\n'}),define("views/shared/appbar/AppLabel",["underscore","module","views/Base","contrib/text!views/shared/appbar/AppLabel.html"],function(e,t,n,r){return n.extend({moduleId:t.id,className:"app-bar-label-wrapper",initialize:function(){n.prototype.initialize.apply(this,arguments),this.model.appNav.on("change",this.render,this)},render:function(){var t=this,n=e.template(r,{appLink:this.model.appNav.get("link"),appLabel:this.model.appNav.get("label"),appIcon:this.model.appNav.get("icon"),appLogo:this.model.appNav.get("logo")});this.$el.html(n);if(this.model.appNav.get("logo")){var i=this.$el.find(".app-logo-img");i.load(function(){parseInt(this.width,10)>2?(t.$el.find(".app-logo").show(),t.$el.find(".app-name").hide()):(t.$el.find(".app-logo").hide(),t.$el.find(".app-name").show())})}else this.$el.find(".app-logo").hide(),this.$el.find(".app-name").show();return this}})}),define("contrib/text!views/shared/appbar/Master.html",[],function(){return'<h2 class="app-name pull-right"></h2>\n<div class="nav">\n</div>\n'}),define("helpers/AppNav",["jquery","underscore","backbone","splunk.util"],function(e,t,n,r){function c(e,t,n){return e.filter(function(e){var r=e.entry.acl.get("app"),s=e.entry.get("name");return r!=i?!1:t?t&&s.toLowerCase().indexOf(t.toLowerCase())>-1:!(n&&n.indexOf(i+"/"+s)>-1)})}function h(e){var t,n,o,u;s=s||[];for(o=0;o<s.length;o++){u=s.at(o);if(u.entry.get("name").toLowerCase()===e.toLowerCase()){if(u.entry.acl.get("app")==i){n=u;break}u.entry.acl.get("sharing")=="global"&&(n=u)}}return n?n.entry.content.get("isVisible")?(t={label:n.entry.content.get("label")||e,uri:r.make_url("app",i,e),viewName:e,app:i},t):!1:!1}function p(e){var t,n=u.find(function(t){return t.entry.get("name").toLowerCase()===e.toLowerCase()});return n?(t={uri:r.make_full_url("app/"+i+"/@go",{s:n.id}),sharing:n.get("sharing"),label:e,reportUri:r.make_full_url("app/"+i+"/report",{s:n.id})},n.entry.content.get("request.ui_dispatch_view")&&(t.dispatchView=n.entry.content.get("request.ui_dispatch_view")),t):!1}function d(n){var o=[],a;for(a=0;a<n.length;a++){var v=n[a],m=e(v),g=r.lowerTrimStr(v.nodeName),y;if(g==="collection"){y={label:m.attr("label"),uri:"#"};var b=d(m.children());if(!b.submenu.length||!t.find(b.submenu,function(e){return!e.divider}))continue;t.extend(y,b)}else if(g==="view"){var w=m.attr("name"),E=r.normalizeBoolean(m.attr("default")||"false"),S=r.lowerTrimStr(m.attr("source")),x=m.attr("match");if(w){y=h(w);if(!y)continue;E&&(y.isDefault=E),f.push(i+"/"+w)}else if(S){var T=[],N;S=="all"?T=c(s,x):S=="unclassified"&&(T=c(s,x,f));for(N=0;N<T.length;N++){w=T[N].entry.get("name"),y=h(w);if(!y)continue;if(!T[N].entry.content.get("isDashboard"))continue;f.push(i+"/"+w),o.push(y)}y=!1}}else if(g==="saved"){var C=m.attr("name");S=r.lowerTrimStr(m.attr("source")),x=m.attr("match");if(C){y=p(C);if(!y)continue;l.push(i+"/"+C)}else if(S){var k=[];S=="all"?k=c(u,x):S=="unclassified"&&(k=c(u,x,l));for(N=0;N<k.length;N++){C=k[N].entry.get("name"),y=p(C);if(!y)continue;l.push(i+"/"+C),o.push(y)}y=!1}}else if(g==="a"){var L=m.attr("href");L.indexOf("/")===0&&L[1]!=="/"&&(L=r.make_url(L)),y={label:m.text(),uri:L,viewName:m.attr("name")||""}}else g==="divider"?y={label:"",divider:!0}:y={label:"unknown node in nav"};y&&o.push(y)}return{submenu:o}}function v(t,r,a,c){var h=t.entry.content.get("eai:data").replace(/\&/g,"&amp;"),p=e(e.parseXML(h)),v=p.find("nav"),m=v.attr("search_view"),g=v.attr("color");return f=l=[],i=t.entry.content.get("eai:appName"),s=r,o=c||"",u=new n.Collection(a.filter(function(e){return e.entry.acl.get("app")==i})),{nav:d(v.children()).submenu,searchView:m,color:g}}function m(e,t,n,r){var i=[];return o=r||"",f=l=[],!e||e.length==0?null:(e.each(function(e){i.push(v(e,t,n))}),i)}var i,s,o,u,a,f=[],l=[];return{parseNavModel:v,parseNavCollection:m}}),define("util/color_utils",["underscore"],function(e){var t=function(e){var t=e[0],n=e[1],r=e[2],i=0,s=0,o=0;if(t===null||n===null||r===null||isNaN(t)||isNaN(n)||isNaN(r))return null;if(t<0||n<0||r<0||t>255||n>255||r>255)return null;t/=255,n/=255,r/=255;var u=Math.min(t,Math.min(n,r)),a=Math.max(t,Math.max(n,r)),f=a-u,l=0;f==0?l=0:a==t?l=(n-r)/f%6:a==n?l=(r-t)/f+2:a==r&&(l=(t-n)/f+4);var c=l*60;while(c<0)c+=360;while(c>360)c-=360;var h=.5*(a+u),p=0;return f==0?p=0:p=f/(1-Math.abs(2*h-1)),p<0&&(p=0),p>1&&(p=1),h<0&&(h=0),h>1&&(h=1),[c,p*100,h*100]},n=function(e){if(e.length!=3)return null;var t=e[0],n=e[1],r=e[2];n/=100,r/=100;while(t<0)t+=360;while(t>360)t-=360;if(t<0||t>360||n<0||n>1||r<0||r>1)return null;var i=(1-Math.abs(2*r-1))*n,s=t/60,o=i*(1-Math.abs(s%2-1)),u=0,a=0,f=0;s<1?(u=i,a=o):s<2?(u=o,a=i):s<3?(a=i,f=o):s<4?(a=o,f=i):s<5?(u=o,f=i):(u=i,f=o);var l=r-.5*i,c=u+l,h=a+l,p=f+l;return c*=255,h*=255,p*=255,[c,h,p]},r=function(e){var t=e.match(/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);if(t===null)return null;var n=[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)];return n},i=function(t){if(t.length!=3)return null;var n=e.map(t,Math.round),r="rgb("+n[0]+", "+n[1]+", "+n[2]+")";return r},s=function(t){if(t.length!=3)return null;var n=e.map(t,Math.round),r="hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)";return r},o=function(e){var t=e.match(/^hsl\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)$/);if(t===null)return null;var n=[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)];return n},u=function(e){var t=f(e),n=t.match(/^#?([\dA-Fa-f]{2})([\dA-Fa-f]{2})([\dA-Fa-f]{2})$/);if(n===null)return null;var r=[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)];return r},a=function(t){if(t.length!=3)return null;var n=e.map(t,Math.round),r=e.map(n,function(e){var t=e.toString(16);return t.length<2&&(t="0"+t),t.toUpperCase()}),i="#"+r[0]+r[1]+r[2];return i},f=function(e){var t="#"+e.replace("#","");t=t.toUpperCase();var n=t.match(/^#?([\dA-F])([\dA-F])([\dA-F])$/);return n!==null&&(t="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),t},l=function(e,t){var n=e.slice(0);return n[2]*=t,n[2]>100?n[2]=100:n[2]<0&&(n[2]=100),n},c=function(e,r){var i=t(e),s=l(i,r),o=n(s);return o},h=function(e,t){var n=u(e),r=c(n,t),i=a(r);return i},p=function(e,t,n,r){var i=[" -webkit-gradient(linear, 0 0, 0 100%, from(@startColor), color-stop(@colorStop, @midColor), to(@endColor)) "," -webkit-linear-gradient(@startColor, @midColor @colorStop, @endColor) "," -moz-linear-gradient(top, @startColor, @midColor @colorStop, @endColor) "," -o-linear-gradient(@startColor, @midColor @colorStop, @endColor) "," linear-gradient(@startColor, @midColor @colorStop, @endColor) "," progid:DXImageTransform.Microsoft.gradient(startColorstr='@startColor', endColorstr='@endColor', GradientType=0) "];for(var s=0;s<i.length;s++)i[s]=i[s].replace(/@startColor/g,e),i[s]=i[s].replace(/@midColor/g,t),i[s]=i[s].replace(/@colorStop/g,n),i[s]=i[s].replace(/@endColor/g,r);return i},d=function(e,t){var n=[" -moz-linear-gradient(top, @startColor, @endColor) "," -webkit-gradient(linear, 0 0, 0 100%, from(@startColor), to(@endColor))"," -webkit-linear-gradient(top, @startColor, @endColor) "," -o-linear-gradient(top, @startColor, @endColor) "," linear-gradient(to bottom, @startColor, @endColor) "," progid:DXImageTransform.Microsoft.gradient(startColorstr='@startColor', endColorstr='@endColor', GradientType=0)  "];for(var r=0;r<n.length;r++)n[r]=n[r].replace(/@startColor/g,e),n[r]=n[r].replace(/@endColor/g,t);return n};return{hslColorFromRgbColor:t,rgbColorFromHslColor:n,hslColorFromHslString:o,rgbColorFromRgbString:r,hslStringFromHslColor:s,rgbStringFromRgbColor:i,rgbColorFromHexString:u,hexStringFromRgbColor:a,normalizeHexString:f,modifyLuminosityOfHslColor:l,modifyLuminosityOfRgbColor:c,modifyLuminosityOfHexString:h,generateGradientStylesWithMidColor:p,generateGradientStyles:d}}),define("views/shared/appbar/Master",["jquery","underscore","backbone","module","views/Base","views/shared/appbar/NavItem","views/shared/appbar/AppNav","views/shared/appbar/AppLabel","models/Application","models/services/data/ui/Nav","models/services/AppLocal","collections/services/data/ui/Views","collections/services/SavedSearches","contrib/text!views/shared/appbar/Master.html","helpers/AppNav","uri/route","util/color_utils"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=i.extend({moduleId:r.id,className:"app-bar",initialize:function(){i.prototype.initialize.apply(this,arguments),this.children.appNav=new o({model:this.model,collection:this.collection}),this.children.appLabel=new u({model:this.model,collection:this.collection}),this.render(),this.setBannerColor(),this.model.appNav.on("change:color",this.setBannerColor,this)},render:function(){var e=t.template(p);return this.$el.html(e),this.$el.find(".nav").html(this.children.appNav.el),this.$el.find(".app-name").html(this.children.appLabel.el),this},setBannerColor:function(){if(!this.model.appNav)return!1;var e=this.model.appNav.get("color");if(!e)return!1;this.$el.css("background-color",e);var t=m.normalizeHexString(e),n=m.modifyLuminosityOfHexString(e,g.END_GRADIENT_LUMINOSITY),r=m.generateGradientStyles(t,n);for(var i=0;i<r.length;i++)this.$el.css("background-image",r[i]),this.$el.css("filter",r[i])}},{END_GRADIENT_LUMINOSITY:.9,createWithAppNavUrl:function(t){var n=this;t.model.application.on("change",function(r){var i=v.appNavUrl(r.get("root"),r.get("locale"),r.get("app"));e.ajax({url:i,dataType:"json"}).done(function(e){var n,i,s,o;n=v.page(t.model.application.get("root"),t.model.application.get("locale")||"",t.model.application.get("app")),i=v.appIcon(t.model.application.get("root"),t.model.application.get("locale")||"",t.model.application.get("owner"),r.get("app")),s=v.appLogo(t.model.application.get("root"),t.model.application.get("locale")||"",t.model.application.get("owner"),r.get("app")),o=v.page(t.model.application.get("root"),t.model.application.get("locale")||"",t.model.application.get("app"),"report"),t.model.appNav.set({nav:e.nav,color:e.color,label:e.label,icon:i,logo:s,link:n,defaultView:e.defaultView})}).fail(function(){n.createWithBackbone(t)})})},createWithBackbone:function(t){function o(){if(r.state()==="resolved"&&i.state()==="resolved"&&s.state()==="resolved"){var e=d.parseNavModel(t.model.splunkDappNav,t.collection.views,t.collection.savedSearches,t.model.application.get("root")),n,o,u,a;n=v.page(t.model.application.get("root"),t.model.application.get("locale")||"",t.model.application.get("app")),o=v.appIcon(t.model.application.get("root"),t.model.application.get("locale")||"",t.model.application.get("owner"),t.model.application.get("app")),a=v.appLogo(t.model.application.get("root"),t.model.application.get("locale")||"",t.model.application.get("owner"),t.model.application.get("app")),t.model.app&&t.model.app.entry&&t.model.app.entry.content&&t.model.app.entry.content.get("label")&&(u=t.model.app.entry.content.get("label")||""),t.model.appNav.set({nav:e.nav,color:e.color,label:u,icon:o,link:n,logo:a,searchView:e.searchView})}}var n=e.Deferred(),r=e.Deferred(),i=e.Deferred(),s=e.Deferred(),u=t.model.application.get("app"),a=t.model.application.get("owner");u&&a&&n.resolve(u,a),t.model.application.on("change",function(){var e=t.model.application.get("app"),r=t.model.application.get("owner");e&&r&&n.resolve(e,r)}),t.model.app||(t.model.app=new l,n.done(function(e,n){t.model.app.set({id:"apps/local/"+e}),t.model.app.fetch({data:{app:e,owner:n}})})),t.collection.views||(t.collection.views=new c,n.done(function(e,n){t.collection.views.fetch({data:{app:e,owner:n,count:-1,digest:1}})})),t.collection.savedSearches||(t.collection.savedSearches=new h,n.done(function(e,n){t.collection.savedSearches.fetch({data:{app:e,owner:"-",search:"is_visible=1 AND disabled=0",count:-1}})})),t.model.splunkDappNav||(t.model.splunkDappNav=new f,n.done(function(e,n){t.model.splunkDappNav.fetch({data:{app:e,owner:n}})})),t.collection.views.on("reset",function(){i.resolve(),o()}),t.collection.savedSearches.on("reset",function(){s.resolve(),o()}),t.model.splunkDappNav.on("change",function(){r.resolve(),o()})},create:function(e){return e=e||{},e.collection=e.collection||{},e.model=e.model||{},e.model.appNav=new(n.Model.extend()),e.appServerUrl?this.createWithAppNavUrl(e):this.createWithBackbone(e),new g(e)}});return g}),define("splunkjs/mvc/headerview",["require","exports","module","underscore","./mvc","./basesplunkview","views/shared/splunkbar/Master","views/shared/appbar/Master","models/Application","./utils","splunk.config"],function(e,t,n){var r=e("underscore"),i=e("./mvc"),s=e("./basesplunkview"),o=e("views/shared/splunkbar/Master"),u=e("views/shared/appbar/Master"),a=e("models/Application"),f=e("./utils"),l=e("splunk.config"),c=s.extend({moduleId:n.id,className:"splunk-header",options:{appbar:!0},initialize:function(){this.configure();var e=f.getPageInfo(),t=new a({owner:l.USERNAME});this.globalNav=o.create({model:{application:t}}),this.settings.get("appbar")&&(this.appNav=u.create({model:{application:t}})),t.set({root:e.root,locale:e.locale,app:e.app,page:e.page})},render:function(){return this.$el.empty().append(this.globalNav.render().el),this.settings.get("appbar")&&this.$el.append(this.appNav.render().el),this}});return c});