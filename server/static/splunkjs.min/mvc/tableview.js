define("views/shared/results_table/ResultsTableHeader",["jquery","underscore","module","views/Base"],function(e,t,n,r){return r.extend({moduleId:n.id,tagName:"thead",render:function(){var e={};t(this.options.columnTypes).each(function(t,n){e[n]=this.columnTypeToClassName(t)},this);var n=this.compiledTemplate({rowNumbers:this.options.rowNumbers,fields:this.options.fields,sortKeyAttribute:this.options.sortKeyAttribute,columnClasses:e});return this.$el.html(n),this},highlightColumn:function(e){this.options.rowNumbers&&e++,this.$("th").eq(e).addClass("highlighted")},unHighlightColumn:function(e){this.options.rowNumbers&&e++,this.$("th").eq(e).removeClass("highlighted")},columnTypeToClassName:function(e){return e==="number"?"numeric":e==="timestamp"?"timestamp":""},template:'            <tr class="">                <% if(rowNumbers) { %>                    <th class="row-number"></th>                <% } %>                <% _(fields).each(function(field) { %>                    <th class="sorts <%- columnClasses[field] %>" <%- sortKeyAttribute %>="<%- field %>">                    <a href="#"><%- field %><i class="icon-sorts "></i></a>                    </th>                <% }) %>            </tr>        '})}),define("views/shared/results_table/renderers/BaseCellRenderer",["require","exports","module","underscore","backbone"],function(e,t,n){var r=e("underscore"),i=e("backbone"),s=function(){this.initialize.apply(this,arguments)};return r.extend(s.prototype,i.Events,{initialize:function(){},canRender:function(e){throw new Error("Must implement method canRender.")},setup:function(e,t){},teardown:function(e,t){},render:function(e,t){}}),s.prototype.constructor=s,s.extend=i.Model.extend,s}),define("views/shared/results_table/ResultsTableRow",["jquery","underscore","module","views/Base","./renderers/BaseCellRenderer"],function(e,t,n,r,i){var s=r.extend({moduleId:n.id,tagName:"tr",render:function(){return this.$el.attr(s.ROW_INDEX_ATTR,this.options.rowIndex),this.options.hasOwnProperty("rowNumber")&&this.$el.append(e('<td class="row-number"></td>').text(this.options.rowNumber)),this.generateCells(),this},remove:function(){return this.disposeCells(),r.prototype.remove.call(this)},generateCells:function(){this.disposeCells();var n=this._renderedCells=[],r,o=this.getCellRenderers(),u;t(this.options.cells).each(function(t){var a=e("<td></td>");a.attr(s.CELL_INDEX_ATTR,t.index),r={$td:a};for(var f=0,l=o.length;f<l;f++){u=o[f];if(u instanceof i){if(u.canRender(t)){u.setup(a,t),u.render(a,t),r.cellData=t,r.cellRenderer=u;break}}else if(typeof u=="function"&&u(a,t))break}this.$el.append(a),n.push(r)},this)},disposeCells:function(){if(!this._renderedCells)return;t(this._renderedCells).each(function(e){e.cellRenderer&&e.cellRenderer.teardown(e.$td,e.cellData),e.$td.remove()},this),this._renderedCells=null},getCellRenderers:function(){return this.options.table?this.options.table.getCellRenderers():[]},highlightRow:function(){this.$el.addClass("highlighted")},unHighlightRow:function(){this.$el.removeClass("highlighted")},highlightCell:function(t,n){var r=this.options.hasOwnProperty("rowNumber"),i=this.$("td"),s=r?i.eq(1):i.eq(0);r&&i.eq(0).addClass("highlighted"),e.contains(s[0],t[0])||s.addClass("highlighted"),t.addClass("highlighted")},unHighlightCell:function(e,t){var n=this.options.hasOwnProperty("rowNumber"),r=this.$("td"),i=n?r.eq(1):r.eq(0);n&&r.eq(0).removeClass("highlighted"),i.removeClass("highlighted"),e.removeClass("highlighted")}},{ROW_INDEX_ATTR:"data-row-index",CELL_INDEX_ATTR:"data-cell-index",MV_SUBCELL_CLASSNAME:"multivalue-subcell",MV_INDEX_ATTR:"data-mv-index"});return s}),define("views/shared/delegates/ColumnSort",["jquery","underscore","backbone","views/shared/delegates/Base"],function(e,t,n,r){var i={SORTABLE_ROW:"sorts",NOT_SORTABLE_CLASS:"not-sortable",SORT_DISABLED_CLASS:"sort-disabled",SORTED_CLASS:"active",ASCENDING:"asc",DESCENDING:"desc",SORT_KEY_ATTR:"data-sort-key",SORT:"sort"},s="th."+i.SORTABLE_ROW,o="i.icon-sorts";return r.extend({events:function(){var e={};return e["click "+s]="onColumnHeaderClick",e}(),initialize:function(){this.model||(this.model=new n.Model);var r={sortKeyAttr:"sortKey",sortDirAttr:"sortDirection"};this.options=e.extend(!0,r,this.options),this.autoUpdate=!!this.options.autoUpdate,this.autoUpdate&&this.model.on("change:"+this.options.sortKeyAttr+" change:"+this.options.sortDirAttr,t.debounce(function(){this.update()},0),this)},update:function(e){e=e||this.$el;var t=e.find(s),n=this.model.get(this.options.sortKeyAttr),r=t.filter("["+i.SORT_KEY_ATTR+'="'+n+'"]'),u=this.model.get(this.options.sortDirAttr);t.removeClass(i.SORTED_CLASS).find(o).removeClass(i.ASCENDING+" "+i.DESCENDING),r.addClass(i.SORTED_CLASS).find(o).addClass(u==="asc"?i.ASCENDING:i.DESCENDING)},onColumnHeaderClick:function(t){t.preventDefault();var n=e(t.target).closest("th");if(n.hasClass(i.NOT_SORTABLE_CLASS)||n.hasClass(i.SORT_DISABLED_CLASS))return;var r=n.attr(i.SORT_KEY_ATTR),s=n.find(o).hasClass(i.DESCENDING)?"asc":"desc",u={};u[this.options.sortKeyAttr]=r,u[this.options.sortDirAttr]=s,this.model.set(u),this.trigger(i.SORT,r,s)}},i)}),define("views/shared/delegates/TableDock",["jquery","underscore","views/shared/delegates/Base"],function(e,t,n){return n.extend({awake:!0,touch:!1,initialize:function(e){var r={table:"> table",offset:0,dockScrollBar:!0,flexWidthColumn:-1,defaultLayout:"auto"};t.defaults(this.options,r),n.prototype.initialize.call(this,e),this.disabled=!1,this.eventNS="table-dock-"+this.cid,this.awake&&this.bindListeners()},bindListeners:function(){var n=t.debounce(this.handleWindowResize,50);e(window).on("resize."+this.eventNS,t(n).bind(this)),e(window).on("scroll."+this.eventNS,t(this.handleWindowScroll).bind(this)),this.options.dockScrollBar&&this.$el.on("scroll."+this.eventNS,t(this.handleContainerScroll).bind(this))},unbindListeners:function(){e(window).off("resize."+this.eventNS),e(window).off("scroll."+this.eventNS),this.options.dockScrollBar&&this.$el.off("."+this.eventNS)},destroy:function(){this.unbindListeners()},update:function(){if(!this.awake){this.touch=!0;return}this.$table=this.$(this.options.table).first(),this.updateHeaders(),this.options.dockScrollBar&&this.updateScroll();var e=t(function(){this.syncColumnWidths(),this.options.dockScrollBar&&this.syncScrollWidths(),this.handleWindowScroll(),this.options.dockScrollBar&&this.handleContainerScroll(),this.trigger("updated",this.$headerTable)}).bind(this);this.$table.is(":visible")?e():t.defer(e)},disable:function(){this.disabled=!0,this.$disable.show()},enable:function(){this.disabled=!1,this.$disable.hide()},updateHeaders:function(){this.$header&&this.$header.remove(),this.$header=e('<div class="header-table-docked" style="display:none"><table></table><div class="disable"></div></div>').css({top:this.options.offset,left:0,right:0}),this.$disable=this.$header.find("> .disable")[this.disabled?"show":"hide"](),this.$headerTable=this.$header.find("> table"),this.$headerTable.attr("class",this.$table.attr("class")),this.$table.find("> thead").clone().appendTo(this.$headerTable),this.$header.prependTo(this.el),this.$headerTable.on("click","th",function(t){t.preventDefault(),t.stopPropagation();var n=e(t.currentTarget).prevAll().length+1;this.$table.find("> thead > tr > th:nth-child("+n+")").click()}.bind(this)),this.$headerTable.on("click","th a",function(e){e.preventDefault()})},updateScroll:function(){this.$dockedScroll&&this.$dockedScroll.remove(),this.$dockedScroll=e("<div />").addClass("table-scroll-bar-docked").hide().appendTo(this.$el).css("left",this.$el.position().left),this.$dockedScroll.on("scroll",t(this.handleDockedScrollChange).bind(this))},handleWindowResize:function(){if(!this.$table)return;this.syncColumnWidths(),this.options.dockScrollBar&&(this.updateDockedScrollBar(),this.syncScrollWidths())},handleWindowScroll:function(t){if(!this.$table||!this.$table.is(":visible"))return;var n=e(window).scrollTop(),r=this.$table.offset().top;n>=r-this.options.offset?this.$header.is(":visible")||this.$header.css("top",this.options.offset).show():(this.$header.css("top","-1000px").width(),this.$header.hide()),this.options.dockScrollBar&&this.updateDockedScrollBar()},handleContainerScroll:function(){if(!this.$table)return;var e=this.$el.scrollLeft(),t=this.$dockedScroll.scrollLeft();e!==t&&(this.$headerTable.css("marginLeft",-e+"px"),this.$dockedScroll.scrollLeft(e))},handleDockedScrollChange:function(){var e=this.$el.scrollLeft(),t=this.$dockedScroll.scrollLeft();e!==t&&(this.$headerTable.css("marginLeft",-t+"px"),this.$el.scrollLeft(t))},_syncColumnWidths:function(){if(!this.$table)return;var n=this.$table.find("thead > tr"),r=n.find("th"),i=this.$header.find("thead > tr"),s=i.find("th"),o=!1,u=[];this.$table.css("table-layout",this.options.defaultLayout),o=r.eq(this.options.flexWidthColumn),r.not(o[0]).css("width",""),t(r).each(function(t,n){if(o&&t==o[0])return;var r=e(t),i={width:parseFloat(r.css("width")),index:n};u.push(i)},this),this.$headerTable.width(this.$table.outerWidth()),t.each(u,function(e){var t=r.eq(e.index),n=s.eq(e.index);t.width(e.width),n.width(e.width)}),this.$header.css({left:this.$el.position().left}),this.$table.css("table-layout","fixed")},syncColumnWidths:function(){this._syncColumnWidthsDebounced||(this._syncColumnWidthsDebounced=t.debounce(this._syncColumnWidths)),this._syncColumnWidthsDebounced()},syncScrollWidths:function(){if(!this.$table||!this.$table[0])return;var t=parseFloat(this.$table[0].scrollWidth),n=e("<div />").width(t).height(1);this.$dockedScroll.html(n)},updateDockedScrollBar:function(){var t=e(window).scrollTop(),n=this.$table.offset().top,r=e(window).height(),i=this.$el.outerHeight();n+i>t+r?this.$dockedScroll.show():this.$dockedScroll.hide()},wake:function(){return this.awake=!0,this.bindListeners(),this.touch?t.defer(this.update.bind(this)):(t.defer(this.handleWindowResize.bind(this)),t.defer(this.handleWindowScroll.bind(this)),this.options.dockScrollBar&&t.defer(this.handleContainerScroll.bind(this))),this},sleep:function(){return this.awake=!1,this.unbindListeners(),this},remove:function(){return n.prototype.remove.apply(this),e(window).off("resize."+this.eventNS),e(window).off("scroll."+this.eventNS),this}})}),define("views/shared/delegates/TableHeadStatic",["jquery","underscore","views/shared/delegates/Base"],function(e,t,n){return n.extend({awake:!0,touch:!1,initialize:function(e){var r={headerContainer:"> .header-table-static",scrollContainer:"> .scroll-table-wrapper",table:"> .scroll-table-wrapper > table",offset:0,flexWidthColumn:-1,defaultLayout:"auto"};t.defaults(this.options,r),n.prototype.initialize.call(this,e),this.awake&&this.bindListeners()},bindListeners:function(){var n=t.debounce(this.handleWindowResize,50);e(window).on("resize."+this.cid,t(n).bind(this)),e(this.$(this.options.scrollContainer)).on("scroll."+this.cid,t(this.handleContainerScroll).bind(this))},unbindListeners:function(){e(window).off("resize."+this.cid),e(this.$(this.options.scrollContainer)).off("scroll."+this.cid)},destroy:function(){this.unbindListeners()},remove:function(){return n.prototype.remove.apply(this),e(window).off("resize."+this.cid),this},update:function(){if(!this.awake){this.touch=!0;return}this.$scrollContainer=this.$(this.options.scrollContainer),this.$table=this.$(this.options.table).first(),this.$headerContainer=this.$(this.options.headerContainer),this.$headerContainer.empty();var n=e('<div class="header-table-wrapper"></div>').appendTo(this.$headerContainer);n.css({"margin-right":this.measureScrollBarWidth(this.$scrollContainer)}),this.$headerTable=e("<table>"),this.$headerTable.attr("class",this.$table.attr("class")).width(this.$table.outerWidth()).css("table-layout","fixed"),this.$table.find("> thead").clone().appendTo(this.$headerTable),n.prepend(this.$headerTable),this.$headerTable.on("click","th",function(t){t.preventDefault(),t.stopPropagation();var n=e(t.currentTarget).prevAll().length+1;this.$table.find("> thead > tr > th:nth-child("+n+")").click()}.bind(this)),this.$headerTable.on("click","th a",function(e){e.preventDefault()}),this.scrollLeft=0;var r=t(function(){this.syncColumnWidths(),this.handleContainerScroll(),this.trigger("updated",this.$headerTable)}).bind(this);this.$table.is(":visible")?r():t.defer(r)},handleContainerScroll:function(){if(!this.$table)return;var e=this.$scrollContainer.scrollLeft();e!==this.scrollLeft&&(this.$headerTable.css("marginLeft",-e+"px"),this.scrollLeft=e)},handleWindowResize:function(){if(!this.$table)return;this.syncColumnWidths()},syncColumnWidths:function(){if(!this.$table)return;var n=this.$table.find("thead > tr"),r=n.find("th"),i=this.$headerTable.find("thead > tr"),s=i.find("th"),o=!1,u=[];this.$table.css("table-layout",this.options.defaultLayout),this.options.flexWidthColumn!==!1&&(o=r.eq(this.options.flexWidthColumn)),r.not(o[0]).css("width",""),t(r).each(function(t,n){if(o&&t==o[0])return;var r=e(t),i={width:parseFloat(r.css("width")),index:n};u.push(i)},this),this.$headerTable.width(this.$table.outerWidth()),t.each(u,function(e){var t=r.eq(e.index),n=s.eq(e.index);t.width(e.width),n.width(e.width)}),this.$table.css("table-layout","fixed")},wake:function(){return this.awake=!0,this.bindListeners(),this.touch?t.defer(this.update.bind(this)):(t.defer(this.handleWindowResize.bind(this)),t.defer(this.handleContainerScroll.bind(this))),this},sleep:function(){return this.awake=!1,this.unbindListeners(),this},measureScrollBarWidth:function(t){var n=e("<div></div>").appendTo(t),r=t.width()-n.width();return n.remove(),r}})}),define("helpers/grid/RowIterator",["underscore","backbone"],function(e,t){var n=function(){return!1},r=function(t){t=t||{},this.offset=parseInt(t.offset,10)||0,this.expandedTest=t.expandedTest||n,this.eachRow=e(this.eachRow).bind(this)};return r.prototype={eachRow:function(n,r,i){i=i||null;var s=function(e,t){var n=t+this.offset+1,s=this.expandedTest(e,t,n);r.apply(i,[e,t,n,s])};n instanceof t.Collection?n.each(s,this):e(n).each(s,this)}},r}),define("helpers/Printer",["jquery","backbone","splunk.print"],function(e,t,n){var r=e.extend({},t.Events,{PRINT_START:n.prototype.START_EVENT,PRINT_END:n.prototype.END_EVENT,printPage:function(){e(document).trigger(n.prototype.PAGE_EVENT)},onDomReady:function(){var t=n.getInstance();e(document).on(n.prototype.START_EVENT,function(){r.trigger(r.PRINT_START)}),e(document).on(n.prototype.END_EVENT,function(){r.trigger(r.PRINT_END)})}});return e(function(){r.onDomReady()}),r}),function(e){typeof define=="function"&&define.amd?define("jquery.sparkline",["jquery"],e):e(jQuery)}(function(e){var t={},n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P=0;n=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:undefined,normalRangeMax:undefined,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:undefined,chartRangeMax:undefined,chartRangeMinX:undefined,chartRangeMaxX:undefined,tooltipFormat:new i('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:undefined,nullColor:undefined,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:undefined,chartRangeMin:undefined,chartRangeClip:!1,colorMap:undefined,tooltipFormat:new i('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new i('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:undefined,thresholdValue:0,chartRangeMax:undefined,chartRangeMin:undefined,chartRangeClip:!1,tooltipFormat:new i("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:undefined,tooltipFormat:new i("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new i('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:undefined,targetColor:"#4a2",chartRangeMax:undefined,chartRangeMin:undefined,tooltipFormat:new i("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},k='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',r=function(){var t,n;return t=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(t.prototype=e.extend(new arguments[0],arguments[arguments.length-1]),t._super=arguments[0].prototype):t.prototype=arguments[arguments.length-1],arguments.length>2&&(n=Array.prototype.slice.call(arguments,1,-1),n.unshift(t.prototype),e.extend.apply(e,n))):t.prototype=arguments[0],t.prototype.cls=t,t},e.SPFormatClass=i=r({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(e,t){this.format=e,this.fclass=t},render:function(e,t,n){var r=this,i=e,s,o,u,a,f;return this.format.replace(this.fre,function(){var e;return o=arguments[1],u=arguments[3],s=r.precre.exec(o),s?(f=s[2],o=s[1]):f=!1,a=i[o],a===undefined?"":u&&t&&t[u]?(e=t[u],e.get?t[u].get(a)||a:t[u][a]||a):(l(a)&&(n.get("numberFormatter")?a=n.get("numberFormatter")(a):a=v(a,f,n.get("numberDigitGroupCount"),n.get("numberDigitGroupSep"),n.get("numberDecimalMark"))),a)})}}),e.spformat=function(e,t){return new i(e,t)},s=function(e,t,n){return e<t?t:e>n?n:e},o=function(e,t){var n;return t===2?(n=Math.floor(e.length/2),e.length%2?e[n]:(e[n-1]+e[n])/2):e.length%2?(n=(e.length*t+t)/4,n%1?(e[Math.floor(n)]+e[Math.floor(n)-1])/2:e[n-1]):(n=(e.length*t+2)/4,n%1?(e[Math.floor(n)]+e[Math.floor(n)-1])/2:e[n-1])},u=function(e){var t;switch(e){case"undefined":e=undefined;break;case"null":e=null;break;case"true":e=!0;break;case"false":e=!1;break;default:t=parseFloat(e),e==t&&(e=t)}return e},a=function(e){var t,n=[];for(t=e.length;t--;)n[t]=u(e[t]);return n},f=function(e,t){var n,r,i=[];for(n=0,r=e.length;n<r;n++)e[n]!==t&&i.push(e[n]);return i},l=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},v=function(t,n,r,i,s){var o,u;t=(n===!1?parseFloat(t).toString():t.toFixed(n)).split(""),o=(o=e.inArray(".",t))<0?t.length:o,o<t.length&&(t[o]=s);for(u=o-r;u>0;u-=r)t.splice(u,0,i);return t.join("")},c=function(e,t,n){var r;for(r=t.length;r--;){if(n&&t[r]===null)continue;if(t[r]!==e)return!1}return!0},h=function(e){var t=0,n;for(n=e.length;n--;)t+=typeof e[n]=="number"?e[n]:0;return t},d=function(t){return e.isArray(t)?t:[t]},p=function(e){var t;document.createStyleSheet?document.createStyleSheet().cssText=e:(t=document.createElement("style"),t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t),t[typeof document.body.style.WebkitAppearance=="string"?"innerText":"innerHTML"]=e)},e.fn.simpledraw=function(t,n,r,i){var s,o;if(r&&(s=this.data("_jqs_vcanvas")))return s;t===undefined&&(t=e(this).innerWidth()),n===undefined&&(n=e(this).innerHeight());if(e.browser.hasCanvas)s=new M(t,n,this,i);else{if(!e.browser.msie)return!1;s=new _(t,n,this)}return o=e(this).data("_jqs_mhandler"),o&&o.registerCanvas(s),s},e.fn.cleardraw=function(){var e=this.data("_jqs_vcanvas");e&&e.reset()},e.RangeMapClass=m=r({init:function(e){var t,n,r=[];for(t in e)e.hasOwnProperty(t)&&typeof t=="string"&&t.indexOf(":")>-1&&(n=t.split(":"),n[0]=n[0].length===0?-Infinity:parseFloat(n[0]),n[1]=n[1].length===0?Infinity:parseFloat(n[1]),n[2]=e[t],r.push(n));this.map=e,this.rangelist=r||!1},get:function(e){var t=this.rangelist,n,r,i;if((i=this.map[e])!==undefined)return i;if(t)for(n=t.length;n--;){r=t[n];if(r[0]<=e&&r[1]>=e)return r[2]}return undefined}}),e.range_map=function(e){return new m(e)},g=r({init:function(t,n){var r=e(t);this.$el=r,this.options=n,this.currentPageX=0,this.currentPageY=0,this.el=t,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!n.get("disableTooltips"),this.highlightEnabled=!n.get("disableHighlight")},registerSparkline:function(e){this.splist.push(e),this.over&&this.updateDisplay()},registerCanvas:function(t){var n=e(t.canvas);this.canvas=t,this.$canvas=n,n.mouseenter(e.proxy(this.mouseenter,this)),n.mouseleave(e.proxy(this.mouseleave,this)),n.click(e.proxy(this.mouseclick,this))},reset:function(e){this.splist=[],this.tooltip&&e&&(this.tooltip.remove(),this.tooltip=undefined)},mouseclick:function(t){var n=e.Event("sparklineClick");n.originalEvent=t,n.sparklines=this.splist,this.$el.trigger(n)},mouseenter:function(t){e(document.body).unbind("mousemove.jqs"),e(document.body).bind("mousemove.jqs",e.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new y(this.options),this.tooltip.updatePosition(t.pageX,t.pageY)),this.updateDisplay()},mouseleave:function(){e(document.body).unbind("mousemove.jqs");var t=this.splist,n=t.length,r=!1,i,s;this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null);for(s=0;s<n;s++)i=t[s],i.clearRegionHighlight()&&(r=!0);r&&this.canvas.render()},mousemove:function(e){this.currentPageX=e.pageX,this.currentPageY=e.pageY,this.currentEl=e.target,this.tooltip&&this.tooltip.updatePosition(e.pageX,e.pageY),this.updateDisplay()},updateDisplay:function(){var t=this.splist,n=t.length,r=!1,i=this.$canvas.offset(),s=this.currentPageX-i.left,o=this.currentPageY-i.top,u,a,f,l,c;if(!this.over)return;for(f=0;f<n;f++)a=t[f],l=a.setRegionHighlight(this.currentEl,s,o),l&&(r=!0);if(r){c=e.Event("sparklineRegionChange"),c.sparklines=this.splist,this.$el.trigger(c);if(this.tooltip){u="";for(f=0;f<n;f++)a=t[f],u+=a.getCurrentRegionTooltip();this.tooltip.setContent(u)}this.disableHighlight||this.canvas.render()}l===null&&this.mouseleave()}}),y=r({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(t){var n=t.get("tooltipClassname","jqstooltip"),r=this.sizeStyle,i;this.container=t.get("tooltipContainer")||document.body,this.tooltipOffsetX=t.get("tooltipOffsetX",10),this.tooltipOffsetY=t.get("tooltipOffsetY",12),e("#jqssizetip").remove(),e("#jqstooltip").remove(),this.sizetip=e("<div/>",{id:"jqssizetip",style:r,"class":n}),this.tooltip=e("<div/>",{id:"jqstooltip","class":n}).appendTo(this.container),i=this.tooltip.offset(),this.offsetLeft=i.left,this.offsetTop=i.top,this.hidden=!0,e(window).unbind("resize.jqs scroll.jqs"),e(window).bind("resize.jqs scroll.jqs",e.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=e(window).scrollTop(),this.scrollLeft=e(window).scrollLeft(),this.scrollRight=this.scrollLeft+e(window).width(),this.updatePosition()},getSize:function(e){this.sizetip.html(e).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(e){if(!e){this.tooltip.css("visibility","hidden"),this.hidden=!0;return}this.getSize(e),this.tooltip.html(e).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(e,t){if(e===undefined){if(this.mousex===undefined)return;e=this.mousex-this.offsetLeft,t=this.mousey-this.offsetTop}else this.mousex=e-=this.offsetLeft,this.mousey=t-=this.offsetTop;if(!this.height||!this.width||this.hidden)return;t-=this.height+this.tooltipOffsetY,e+=this.tooltipOffsetX,t<this.scrollTop&&(t=this.scrollTop),e<this.scrollLeft?e=this.scrollLeft:e+this.width>this.scrollRight&&(e=this.scrollRight-this.width),this.tooltip.css({left:e,top:t})},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=undefined,e(window).unbind("resize.jqs scroll.jqs")}}),L=function(){p(k)},e(L),D=[],e.fn.sparkline=function(t,n){return this.each(function(){var r=new e.fn.sparkline.options(this,n),i=e(this),s,o;s=function(){var n,s,o,u,a,f,l;if(t==="html"||t===undefined){l=this.getAttribute(r.get("tagValuesAttribute"));if(l===undefined||l===null)l=i.html();n=l.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")}else n=t;s=r.get("width")==="auto"?n.length*r.get("defaultPixelsPerValue"):r.get("width");if(r.get("height")==="auto"){if(!r.get("composite")||!e.data(this,"_jqs_vcanvas"))u=document.createElement("span"),u.innerHTML="a",i.html(u),o=e(u).innerHeight()||e(u).height(),e(u).remove(),u=null}else o=r.get("height");r.get("disableInteraction")?a=!1:(a=e.data(this,"_jqs_mhandler"),a?r.get("composite")||a.reset():(a=new g(this,r),e.data(this,"_jqs_mhandler",a)));if(r.get("composite")&&!e.data(this,"_jqs_vcanvas")){e.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),e.data(this,"_jqs_errnotify",!0));return}f=new(e.fn.sparkline[r.get("type")])(this,n,r,s,o),f.render(),a&&a.registerSparkline(f)};if(e(this).html()&&!r.get("disableHiddenCheck")&&e(this).is(":hidden")||e.fn.jquery<"1.3.0"&&e(this).parents().is(":hidden")||!e(this).parents("body").length){if(!r.get("composite")&&e.data(this,"_jqs_pending"))for(o=D.length;o;o--)D[o-1][0]==this&&D.splice(o-1,1);D.push([this,s]),e.data(this,"_jqs_pending",!0)}else s.call(this)})},e.fn.sparkline.defaults=n(),e.sparkline_display_visible=function(){var t,n,r,i=[];for(n=0,r=D.length;n<r;n++)t=D[n][0],e(t).is(":visible")&&!e(t).parents().is(":hidden")?(D[n][1].call(t),e.data(D[n][0],"_jqs_pending",!1),i.push(n)):!e(t).closest("html").length&&!e.data(t,"_jqs_pending")&&(e.data(D[n][0],"_jqs_pending",!1),i.push(n));for(n=i.length;n;n--)D.splice(i[n-1],1)},e.fn.sparkline.options=r({init:function(n,r){var i,s,o,u;this.userOptions=r=r||{},this.tag=n,this.tagValCache={},s=e.fn.sparkline.defaults,o=s.common,this.tagOptionsPrefix=r.enableTagOptions&&(r.tagOptionsPrefix||o.tagOptionsPrefix),u=this.getTagSetting("type"),u===t?i=s[r.type||o.type]:i=s[u],this.mergedOptions=e.extend({},o,i,r)},getTagSetting:function(e){var n=this.tagOptionsPrefix,r,i,s,o;if(n===!1||n===undefined)return t;if(this.tagValCache.hasOwnProperty(e))r=this.tagValCache.key;else{r=this.tag.getAttribute(n+e);if(r===undefined||r===null)r=t;else if(r.substr(0,1)==="["){r=r.substr(1,r.length-2).split(",");for(i=r.length;i--;)r[i]=u(r[i].replace(/(^\s*)|(\s*$)/g,""))}else if(r.substr(0,1)==="{"){s=r.substr(1,r.length-2).split(","),r={};for(i=s.length;i--;)o=s[i].split(":",2),r[o[0].replace(/(^\s*)|(\s*$)/g,"")]=u(o[1].replace(/(^\s*)|(\s*$)/g,""))}else r=u(r);this.tagValCache.key=r}return r},get:function(e,n){var r=this.getTagSetting(e),i;return r!==t?r:(i=this.mergedOptions[e])===undefined?n:i}}),e.fn.sparkline._base=r({disabled:!1,init:function(t,n,r,i,s){this.el=t,this.$el=e(t),this.values=n,this.options=r,this.width=i,this.height=s,this.currentRegion=undefined},initTarget:function(){var e=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),e))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML="",!1):!0},getRegion:function(e,t){},setRegionHighlight:function(e,t,n){var r=this.currentRegion,i=!this.options.get("disableHighlight"),s;return t>this.canvasWidth||n>this.canvasHeight||t<0||n<0?null:(s=this.getRegion(e,t,n),r!==s?(r!==undefined&&i&&this.removeHighlight(),this.currentRegion=s,s!==undefined&&i&&this.renderHighlight(),!0):!1)},clearRegionHighlight:function(){return this.currentRegion!==undefined?(this.removeHighlight(),this.currentRegion=undefined,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(e){},getCurrentRegionTooltip:function(){var t=this.options,n="",r=[],s,o,u,a,f,l,c,h,p,d,v,m,g,y;if(this.currentRegion===undefined)return"";s=this.getCurrentRegionFields(),v=t.get("tooltipFormatter");if(v)return v(this,t,s);t.get("tooltipChartTitle")&&(n+='<div class="jqs jqstitle">'+t.get("tooltipChartTitle")+"</div>\n"),o=this.options.get("tooltipFormat");if(!o)return"";e.isArray(o)||(o=[o]),e.isArray(s)||(s=[s]),c=this.options.get("tooltipFormatFieldlist"),h=this.options.get("tooltipFormatFieldlistKey");if(c&&h){p=[];for(l=s.length;l--;)d=s[l][h],(y=e.inArray(d,c))!=-1&&(p[y]=s[l]);s=p}u=o.length,g=s.length;for(l=0;l<u;l++){m=o[l],typeof m=="string"&&(m=new i(m)),a=m.fclass||"jqsfield";for(y=0;y<g;y++)if(!s[y].isNull||!t.get("tooltipSkipNull"))e.extend(s[y],{prefix:t.get("tooltipPrefix"),suffix:t.get("tooltipSuffix")}),f=m.render(s[y],t.get("tooltipValueLookups"),t),r.push('<div class="'+a+'">'+f+"</div>")}return r.length?n+r.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(e,t){var n=t.get("highlightColor"),r=t.get("highlightLighten"),i,o,u,a;if(n)return n;if(r){i=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(e);if(i){u=[],o=e.length===4?16:1;for(a=0;a<3;a++)u[a]=s(Math.round(parseInt(i[a+1],16)*o*r),0,255);return"rgb("+u.join(",")+")"}}return e}}),b={changeHighlight:function(t){var n=this.currentRegion,r=this.target,i=this.regionShapes[n],s;i&&(s=this.renderRegion(n,t),e.isArray(s)||e.isArray(i)?(r.replaceWithShapes(i,s),this.regionShapes[n]=e.map(s,function(e){return e.id})):(r.replaceWithShape(i,s),this.regionShapes[n]=s.id))},render:function(){var t=this.values,n=this.target,r=this.regionShapes,i,s,o,u;if(!this.cls._super.render.call(this))return;for(o=t.length;o--;){i=this.renderRegion(o);if(i)if(e.isArray(i)){s=[];for(u=i.length;u--;)i[u].append(),s.push(i[u].id);r[o]=s}else i.append(),r[o]=i.id;else r[o]=null}n.render()}},e.fn.sparkline.line=w=r(e.fn.sparkline._base,{type:"line",init:function(e,t,n,r,i){w._super.init.call(this,e,t,n,r,i),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(e,t,n){var r,i=this.regionMap;for(r=i.length;r--;)if(i[r]!==null&&t>=i[r][0]&&t<=i[r][1])return i[r][2];return undefined},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.yvalues[e]===null,x:this.xvalues[e],y:this.yvalues[e],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:e}},renderHighlight:function(){var e=this.currentRegion,t=this.target,n=this.vertices[e],r=this.options,i=r.get("spotRadius"),s=r.get("highlightSpotColor"),o=r.get("highlightLineColor"),u,a;if(!n)return;i&&s&&(u=t.drawCircle(n[0],n[1],i,undefined,s),this.highlightSpotId=u.id,t.insertAfterShape(this.lastShapeId,u)),o&&(a=t.drawLine(n[0],this.canvasTop,n[0],this.canvasTop+this.canvasHeight,o),this.highlightLineId=a.id,t.insertAfterShape(this.lastShapeId,a))},removeHighlight:function(){var e=this.target;this.highlightSpotId&&(e.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(e.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var e=this.values,t=e.length,n=this.xvalues,r=this.yvalues,i=this.yminmax,s,o,u,a,f;for(s=0;s<t;s++)o=e[s],u=typeof e[s]=="string",a=typeof e[s]=="object"&&e[s]instanceof Array,f=u&&e[s].split(":"),u&&f.length===2?(n.push(Number(f[0])),r.push(Number(f[1])),i.push(Number(f[1]))):a?(n.push(o[0]),r.push(o[1]),i.push(o[1])):(n.push(s),e[s]===null||e[s]==="null"?r.push(null):(r.push(Number(o)),i.push(Number(o))));this.options.get("xvalues")&&(n=this.options.get("xvalues")),this.maxy=this.maxyorg=Math.max.apply(Math,i),this.miny=this.minyorg=Math.min.apply(Math,i),this.maxx=Math.max.apply(Math,n),this.minx=Math.min.apply(Math,n),this.xvalues=n,this.yvalues=r,this.yminmax=i},processRangeOptions:function(){var e=this.options,t=e.get("normalRangeMin"),n=e.get("normalRangeMax");t!==undefined&&(t<this.miny&&(this.miny=t),n>this.maxy&&(this.maxy=n)),e.get("chartRangeMin")!==undefined&&(e.get("chartRangeClip")||e.get("chartRangeMin")<this.miny)&&(this.miny=e.get("chartRangeMin")),e.get("chartRangeMax")!==undefined&&(e.get("chartRangeClip")||e.get("chartRangeMax")>this.maxy)&&(this.maxy=e.get("chartRangeMax")),e.get("chartRangeMinX")!==undefined&&(e.get("chartRangeClipX")||e.get("chartRangeMinX")<this.minx)&&(this.minx=e.get("chartRangeMinX")),e.get("chartRangeMaxX")!==undefined&&(e.get("chartRangeClipX")||e.get("chartRangeMaxX")>this.maxx)&&(this.maxx=e.get("chartRangeMaxX"))},drawNormalRange:function(e,t,n,r,i){var s=this.options.get("normalRangeMin"),o=this.options.get("normalRangeMax"),u=t+Math.round(n-n*((o-this.miny)/i)),a=Math.round(n*(o-s)/i);this.target.drawRect(e,u,r,a,undefined,this.options.get("normalRangeColor")).append()},render:function(){var t=this.options,n=this.target,r=this.canvasWidth,i=this.canvasHeight,s=this.vertices,o=t.get("spotRadius"),u=this.regionMap,a,f,l,c,h,p,d,v,g,y,b,E,S,x,T,N,C,k,L,A,O,M,_,D,P;if(!w._super.render.call(this))return;this.scanValues(),this.processRangeOptions(),_=this.xvalues,D=this.yvalues;if(!this.yminmax.length||this.yvalues.length<2)return;c=h=0,a=this.maxx-this.minx===0?1:this.maxx-this.minx,f=this.maxy-this.miny===0?1:this.maxy-this.miny,l=this.yvalues.length-1,o&&(r<o*4||i<o*4)&&(o=0);if(o){O=t.get("highlightSpotColor")&&!t.get("disableInteraction");if(O||t.get("minSpotColor")||t.get("spotColor")&&D[l]===this.miny)i-=Math.ceil(o);if(O||t.get("maxSpotColor")||t.get("spotColor")&&D[l]===this.maxy)i-=Math.ceil(o),c+=Math.ceil(o);if(O||(t.get("minSpotColor")||t.get("maxSpotColor"))&&(D[0]===this.miny||D[0]===this.maxy))h+=Math.ceil(o),r-=Math.ceil(o);if(O||t.get("spotColor")||t.get("minSpotColor")||t.get("maxSpotColor")&&(D[l]===this.miny||D[l]===this.maxy))r-=Math.ceil(o)}i--,t.get("normalRangeMin")!==undefined&&!t.get("drawNormalOnTop")&&this.drawNormalRange(h,c,i,r,f),d=[],v=[d],x=T=null,N=D.length;for(P=0;P<N;P++)g=_[P],b=_[P+1],y=D[P],E=h+Math.round((g-this.minx)*(r/a)),S=P<N-1?h+Math.round((b-this.minx)*(r/a)):r,T=E+(S-E)/2,u[P]=[x||0,T,P],x=T,y===null?P&&(D[P-1]!==null&&(d=[],v.push(d)),s.push(null)):(y<this.miny&&(y=this.miny),y>this.maxy&&(y=this.maxy),d.length||d.push([E,c+i]),p=[E,c+Math.round(i-i*((y-this.miny)/f))],d.push(p),s.push(p));C=[],k=[],L=v.length;for(P=0;P<L;P++)d=v[P],d.length&&(t.get("fillColor")&&(d.push([d[d.length-1][0],c+i]),k.push(d.slice(0)),d.pop()),d.length>2&&(d[0]=[d[0][0],d[1][1]]),C.push(d));L=k.length;for(P=0;P<L;P++)n.drawShape(k[P],t.get("fillColor"),t.get("fillColor")).append();t.get("normalRangeMin")!==undefined&&t.get("drawNormalOnTop")&&this.drawNormalRange(h,c,i,r,f),L=C.length;for(P=0;P<L;P++)n.drawShape(C[P],t.get("lineColor"),undefined,t.get("lineWidth")).append();if(o&&t.get("valueSpots")){A=t.get("valueSpots"),A.get===undefined&&(A=new m(A));for(P=0;P<N;P++)M=A.get(D[P]),M&&n.drawCircle(h+Math.round((_[P]-this.minx)*(r/a)),c+Math.round(i-i*((D[P]-this.miny)/f)),o,undefined,M).append()}o&&t.get("spotColor")&&n.drawCircle(h+Math.round((_[_.length-1]-this.minx)*(r/a)),c+Math.round(i-i*((D[l]-this.miny)/f)),o,undefined,t.get("spotColor")).append(),this.maxy!==this.minyorg&&(o&&t.get("minSpotColor")&&(g=_[e.inArray(this.minyorg,D)],n.drawCircle(h+Math.round((g-this.minx)*(r/a)),c+Math.round(i-i*((this.minyorg-this.miny)/f)),o,undefined,t.get("minSpotColor")).append()),o&&t.get("maxSpotColor")&&(g=_[e.inArray(this.maxyorg,D)],n.drawCircle(h+Math.round((g-this.minx)*(r/a)),c+Math.round(i-i*((this.maxyorg-this.miny)/f)),o,undefined,t.get("maxSpotColor")).append())),this.lastShapeId=n.getLastShapeId(),this.canvasTop=c,n.render()}}),e.fn.sparkline.bar=E=r(e.fn.sparkline._base,b,{type:"bar",init:function(t,n,r,i,o){var l=parseInt(r.get("barWidth"),10),c=parseInt(r.get("barSpacing"),10),h=r.get("chartRangeMin"),p=r.get("chartRangeMax"),d=r.get("chartRangeClip"),v=Infinity,g=-Infinity,y,b,w,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R;E._super.init.call(this,t,n,r,i,o);for(T=0,N=n.length;T<N;T++){F=n[T],y=typeof F=="string"&&F.indexOf(":")>-1;if(y||e.isArray(F))D=!0,y&&(F=n[T]=a(F.split(":"))),F=f(F,null),b=Math.min.apply(Math,F),w=Math.max.apply(Math,F),b<v&&(v=b),w>g&&(g=w)}this.stacked=D,this.regionShapes={},this.barWidth=l,this.barSpacing=c,this.totalBarWidth=l+c,this.width=i=n.length*l+(n.length-1)*c,this.initTarget(),d&&(M=h===undefined?-Infinity:h,_=p===undefined?Infinity:p),x=[],S=D?[]:x;var U=[],z=[];for(T=0,N=n.length;T<N;T++)if(D){P=n[T],n[T]=j=[],U[T]=0,S[T]=z[T]=0;for(H=0,B=P.length;H<B;H++)F=j[H]=d?s(P[H],M,_):P[H],F!==null&&(F>0&&(U[T]+=F),v<0&&g>0?F<0?z[T]+=Math.abs(F):S[T]+=F:S[T]+=Math.abs(F-(F<0?g:v)),x.push(F))}else F=d?s(n[T],M,_):n[T],F=n[T]=u(F),F!==null&&x.push(F);this.max=O=Math.max.apply(Math,x),this.min=A=Math.min.apply(Math,x),this.stackMax=g=D?Math.max.apply(Math,U):O,this.stackMin=v=D?Math.min.apply(Math,x):A,r.get("chartRangeMin")!==undefined&&(r.get("chartRangeClip")||r.get("chartRangeMin")<A)&&(A=r.get("chartRangeMin")),r.get("chartRangeMax")!==undefined&&(r.get("chartRangeClip")||r.get("chartRangeMax")>O)&&(O=r.get("chartRangeMax")),this.zeroAxis=k=r.get("zeroAxis",!0),A<=0&&O>=0&&k?L=0:k==0?L=A:A>0?L=A:L=O,this.xaxisOffset=L,C=D?Math.max.apply(Math,S)+Math.max.apply(Math,z):O-A,this.canvasHeightEf=k&&A<0?this.canvasHeight-2:this.canvasHeight-1,A<L?(q=D&&O>=0?g:O,I=(q-L)/C*this.canvasHeight,I!==Math.ceil(I)&&(this.canvasHeightEf-=2,I=Math.ceil(I))):I=this.canvasHeight,this.yoffset=I,e.isArray(r.get("colorMap"))?(this.colorMapByIndex=r.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=r.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===undefined&&(this.colorMapByValue=new m(this.colorMapByValue))),this.range=C},getRegion:function(e,t,n){var r=Math.floor(t/this.totalBarWidth);return r<0||r>=this.values.length?undefined:r},getCurrentRegionFields:function(){var e=this.currentRegion,t=d(this.values[e]),n=[],r,i;for(i=t.length;i--;)r=t[i],n.push({isNull:r===null,value:r,color:this.calcColor(i,r,e),offset:e});return n},calcColor:function(t,n,r){var i=this.colorMapByIndex,s=this.colorMapByValue,o=this.options,u,a;return this.stacked?u=o.get("stackedBarColor"):u=n<0?o.get("negBarColor"):o.get("barColor"),n===0&&o.get("zeroColor")!==undefined&&(u=o.get("zeroColor")),s&&(a=s.get(n))?u=a:i&&i.length>r&&(u=i[r]),e.isArray(u)?u[t%u.length]:u},renderRegion:function(t,n){var r=this.values[t],i=this.options,s=this.xaxisOffset,o=[],u=this.range,a=this.stacked,f=this.target,l=t*this.totalBarWidth,h=this.canvasHeightEf,p=this.yoffset,d,v,m,g,y,b,w,E,S,x;r=e.isArray(r)?r:[r],w=r.length,E=r[0],g=c(null,r),x=c(s,r,!0);if(g)return i.get("nullColor")?(m=n?i.get("nullColor"):this.calcHighlightColor(i.get("nullColor"),i),d=p>0?p-1:p,f.drawRect(l,d,this.barWidth-1,0,m,m)):undefined;y=p;for(b=0;b<w;b++){E=r[b];if(a&&E===s){if(!x||S)continue;S=!0}u>0?v=Math.floor(h*(Math.abs(E-s)/u))+1:v=1,E<s||E===s&&p===0?(d=y,y+=v):(d=p-v,p-=v),m=this.calcColor(b,E,t),n&&(m=this.calcHighlightColor(m,i)),o.push(f.drawRect(l,d,this.barWidth-1,v-1,m,m))}return o.length===1?o[0]:o}}),e.fn.sparkline.tristate=S=r(e.fn.sparkline._base,b,{type:"tristate",init:function(t,n,r,i,s){var o=parseInt(r.get("barWidth"),10),u=parseInt(r.get("barSpacing"),10);S._super.init.call(this,t,n,r,i,s),this.regionShapes={},this.barWidth=o,this.barSpacing=u,this.totalBarWidth=o+u,this.values=e.map(n,Number),this.width=i=n.length*o+(n.length-1)*u,e.isArray(r.get("colorMap"))?(this.colorMapByIndex=r.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=r.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===undefined&&(this.colorMapByValue=new m(this.colorMapByValue))),this.initTarget()},getRegion:function(e,t,n){return Math.floor(t/this.totalBarWidth)},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===undefined,value:this.values[e],color:this.calcColor(this.values[e],e),offset:e}},calcColor:function(e,t){var n=this.values,r=this.options,i=this.colorMapByIndex,s=this.colorMapByValue,o,u;return s&&(u=s.get(e))?o=u:i&&i.length>t?o=i[t]:n[t]<0?o=r.get("negBarColor"):n[t]>0?o=r.get("posBarColor"):o=r.get("zeroBarColor"),o},renderRegion:function(e,t){var n=this.values,r=this.options,i=this.target,s,o,u,a,f,l;s=i.pixelHeight,u=Math.round(s/2),a=e*this.totalBarWidth,n[e]<0?(f=u,o=u-1):n[e]>0?(f=0,o=u-1):(f=u-1,o=2),l=this.calcColor(n[e],e);if(l===null)return;return t&&(l=this.calcHighlightColor(l,r)),i.drawRect(a,f,this.barWidth-1,o-1,l,l)}}),e.fn.sparkline.discrete=x=r(e.fn.sparkline._base,b,{type:"discrete",init:function(t,n,r,i,s){x._super.init.call(this,t,n,r,i,s),this.regionShapes={},this.values=n=e.map(n,Number),this.min=Math.min.apply(Math,n),this.max=Math.max.apply(Math,n),this.range=this.max-this.min,this.width=i=r.get("width")==="auto"?n.length*2:this.width,this.interval=Math.floor(i/n.length),this.itemWidth=i/n.length,r.get("chartRangeMin")!==undefined&&(r.get("chartRangeClip")||r.get("chartRangeMin")<this.min)&&(this.min=r.get("chartRangeMin")),r.get("chartRangeMax")!==undefined&&(r.get("chartRangeClip")||r.get("chartRangeMax")>this.max)&&(this.max=r.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight=r.get("lineHeight")==="auto"?Math.round(this.canvasHeight*.3):r.get("lineHeight"))},getRegion:function(e,t,n){return Math.floor(t/this.itemWidth)},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===undefined,value:this.values[e],offset:e}},renderRegion:function(e,t){var n=this.values,r=this.options,i=this.min,o=this.max,u=this.range,a=this.interval,f=this.target,l=this.canvasHeight,c=this.lineHeight,h=l-c,p,d,v,m;return d=s(n[e],i,o),m=e*a,p=Math.round(h-h*((d-i)/u)),v=r.get("thresholdColor")&&d<r.get("thresholdValue")?r.get("thresholdColor"):r.get("lineColor"),t&&(v=this.calcHighlightColor(v,r)),f.drawLine(m,p,m,p+c,v)}}),e.fn.sparkline.bullet=T=r(e.fn.sparkline._base,{type:"bullet",init:function(e,t,n,r,i){var s,o,u;T._super.init.call(this,e,t,n,r,i),this.values=t=a(t),u=t.slice(),u[0]=u[0]===null?u[2]:u[0],u[1]=t[1]===null?u[2]:u[1],s=Math.min.apply(Math,t),o=Math.max.apply(Math,t),n.get("base")===undefined?s=s<0?s:0:s=n.get("base"),this.min=s,this.max=o,this.range=o-s,this.shapes={},this.valueShapes={},this.regiondata={},this.width=r=n.get("width")==="auto"?"4.0em":r,this.target=this.$el.simpledraw(r,i,n.get("composite")),t.length||(this.disabled=!0),this.initTarget()},getRegion:function(e,t,n){var r=this.target.getShapeAt(e,t,n);return r!==undefined&&this.shapes[r]!==undefined?this.shapes[r]:undefined},getCurrentRegionFields:function(){var e=this.currentRegion;return{fieldkey:e.substr(0,1),value:this.values[e.substr(1)],region:e}},changeHighlight:function(e){var t=this.currentRegion,n=this.valueShapes[t],r;delete this.shapes[n];switch(t.substr(0,1)){case"r":r=this.renderRange(t.substr(1),e);break;case"p":r=this.renderPerformance(e);break;case"t":r=this.renderTarget(e)}this.valueShapes[t]=r.id,this.shapes[r.id]=t,this.target.replaceWithShape(n,r)},renderRange:function(e,t){var n=this.values[e],r=Math.round(this.canvasWidth*((n-this.min)/this.range)),i=this.options.get("rangeColors")[e-2];return t&&(i=this.calcHighlightColor(i,this.options)),this.target.drawRect(0,0,r-1,this.canvasHeight-1,i,i)},renderPerformance:function(e){var t=this.values[1],n=Math.round(this.canvasWidth*((t-this.min)/this.range)),r=this.options.get("performanceColor");return e&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(0,Math.round(this.canvasHeight*.3),n-1,Math.round(this.canvasHeight*.4)-1,r,r)},renderTarget:function(e){var t=this.values[0],n=Math.round(this.canvasWidth*((t-this.min)/this.range)-this.options.get("targetWidth")/2),r=Math.round(this.canvasHeight*.1),i=this.canvasHeight-r*2,s=this.options.get("targetColor");return e&&(s=this.calcHighlightColor(s,this.options)),this.target.drawRect(n,r,this.options.get("targetWidth")-1,i-1,s,s)},render:function(){var e=this.values.length,t=this.target,n,r;if(!T._super.render.call(this))return;for(n=2;n<e;n++)r=this.renderRange(n).append(),this.shapes[r.id]="r"+n,this.valueShapes["r"+n]=r.id;this.values[1]!==null&&(r=this.renderPerformance().append(),this.shapes[r.id]="p1",this.valueShapes.p1=r.id),this.values[0]!==null&&(r=this.renderTarget().append(),this.shapes[r.id]="t0",this.valueShapes.t0=r.id),t.render()}}),e.fn.sparkline.pie=N=r(e.fn.sparkline._base,{type:"pie",init:function(t,n,r,i,s){var o=0,u;N._super.init.call(this,t,n,r,i,s),this.shapes={},this.valueShapes={},this.values=n=e.map(n,Number),r.get("width")==="auto"&&(this.width=this.height);if(n.length>0)for(u=n.length;u--;)o+=n[u];this.total=o,this.initTarget(),this.radius=Math.floor(Math.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(e,t,n){var r=this.target.getShapeAt(e,t,n);return r!==undefined&&this.shapes[r]!==undefined?this.shapes[r]:undefined},getCurrentRegionFields:function(){var e=this.currentRegion;return{isNull:this.values[e]===undefined,value:this.values[e],percent:this.values[e]/this.total*100,color:this.options.get("sliceColors")[e%this.options.get("sliceColors").length],offset:e}},changeHighlight:function(e){var t=this.currentRegion,n=this.renderSlice(t,e),r=this.valueShapes[t];delete this.shapes[r],this.target.replaceWithShape(r,n),this.valueShapes[t]=n.id,this.shapes[n.id]=t},renderSlice:function(e,t){var n=this.target,r=this.options,i=this.radius,s=r.get("borderWidth"),o=r.get("offset"),u=2*Math.PI,a=this.values,f=this.total,l=o?2*Math.PI*(o/360):0,c,h,p,d,v;d=a.length;for(p=0;p<d;p++){c=l,h=l,f>0&&(h=l+u*(a[p]/f));if(e===p)return v=r.get("sliceColors")[p%r.get("sliceColors").length],t&&(v=this.calcHighlightColor(v,r)),n.drawPieSlice(i,i,i-s,c,h,undefined,v);l=h}},render:function(){var e=this.target,t=this.values,n=this.options,r=this.radius,i=n.get("borderWidth"),s,o;if(!N._super.render.call(this))return;i&&e.drawCircle(r,r,Math.floor(r-i/2),n.get("borderColor"),undefined,i).append();for(o=t.length;o--;)t[o]&&(s=this.renderSlice(o).append(),this.valueShapes[o]=s.id,this.shapes[s.id]=o);e.render()}}),e.fn.sparkline.box=C=r(e.fn.sparkline._base,{type:"box",init:function(t,n,r,i,s){C._super.init.call(this,t,n,r,i,s),this.values=e.map(n,Number),this.width=r.get("width")==="auto"?"4.0em":i,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var e=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==undefined&&e.push({field:"lo",value:this.loutlier}),this.routlier!==undefined&&e.push({field:"ro",value:this.routlier}),this.lwhisker!==undefined&&e.push({field:"lw",value:this.lwhisker}),this.rwhisker!==undefined&&e.push({field:"rw",value:this.rwhisker}),e},render:function(){var e=this.target,t=this.values,n=t.length,r=this.options,i=this.canvasWidth,s=this.canvasHeight,u=r.get("chartRangeMin")===undefined?Math.min.apply(Math,t):r.get("chartRangeMin"),a=r.get("chartRangeMax")===undefined?Math.max.apply(Math,t):r.get("chartRangeMax"),f=0,l,c,h,p,d,v,m,g,y,b,w;if(!C._super.render.call(this))return;if(r.get("raw"))r.get("showOutliers")&&t.length>5?(c=t[0],l=t[1],p=t[2],d=t[3],v=t[4],m=t[5],g=t[6]):(l=t[0],p=t[1],d=t[2],v=t[3],m=t[4]);else{t.sort(function(e,t){return e-t}),p=o(t,1),d=o(t,2),v=o(t,3),h=v-p;if(r.get("showOutliers")){l=m=undefined;for(y=0;y<n;y++)l===undefined&&t[y]>p-h*r.get("outlierIQR")&&(l=t[y]),t[y]<v+h*r.get("outlierIQR")&&(m=t[y]);c=t[0],g=t[n-1]}else l=t[0],m=t[n-1]}this.quartiles=[p,d,v],this.lwhisker=l,this.rwhisker=m,this.loutlier=c,this.routlier=g,w=i/(a-u+1),r.get("showOutliers")&&(f=Math.ceil(r.get("spotRadius")),i-=2*Math.ceil(r.get("spotRadius")),w=i/(a-u+1),c<l&&e.drawCircle((c-u)*w+f,s/2,r.get("spotRadius"),r.get("outlierLineColor"),r.get("outlierFillColor")).append(),g>m&&e.drawCircle((g-u)*w+f,s/2,r.get("spotRadius"),r.get("outlierLineColor"),r.get("outlierFillColor")).append()),e.drawRect(Math.round((p-u)*w+f),Math.round(s*.1),Math.round((v-p)*w),Math.round(s*.8),r.get("boxLineColor"),r.get("boxFillColor")).append(),e.drawLine(Math.round((l-u)*w+f),Math.round(s/2),Math.round((p-u)*w+f),Math.round(s/2),r.get("lineColor")).append(),e.drawLine(Math.round((l-u)*w+f),Math.round(s/4),Math.round((l-u)*w+f),Math.round(s-s/4),r.get("whiskerColor")).append(),e.drawLine(Math.round((m-u)*w+f),Math.round(s/2),Math.round((v-u)*w+f),Math.round(s/2),r.get("lineColor")).append(),e.drawLine(Math.round((m-u)*w+f),Math.round(s/4),Math.round((m-u)*w+f),Math.round(s-s/4),r.get("whiskerColor")).append(),e.drawLine(Math.round((d-u)*w+f),Math.round(s*.1),Math.round((d-u)*w+f),Math.round(s*.9),r.get("medianColor")).append(),r.get("target")&&(b=Math.ceil(r.get("spotRadius")),e.drawLine(Math.round((r.get("target")-u)*w+f),Math.round(s/2-b),Math.round((r.get("target")-u)*w+f),Math.round(s/2+b),r.get("targetColor")).append(),e.drawLine(Math.round((r.get("target")-u)*w+f-b),Math.round(s/2),Math.round((r.get("target")-u)*w+f+b),Math.round(s/2),r.get("targetColor")).append()),e.render()}}),e.browser.msie&&document.namespaces&&!document.namespaces.v&&document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),e.browser.hasCanvas===undefined&&(e.browser.hasCanvas=document.createElement("canvas").getContext!==undefined),A=r({init:function(e,t,n,r){this.target=e,this.id=t,this.type=n,this.args=r},append:function(){return this.target.appendShape(this),this}}),O=r({_pxregex:/(\d+)(px)?\s*$/i,init:function(t,n,r){if(!t)return;this.width=t,this.height=n,this.target=r,this.lastShapeId=null,r[0]&&(r=r[0]),e.data(r,"_jqs_vcanvas",this)},drawLine:function(e,t,n,r,i,s){return this.drawShape([[e,t],[n,r]],i,s)},drawShape:function(e,t,n,r){return this._genShape("Shape",[e,t,n,r])},drawCircle:function(e,t,n,r,i,s){return this._genShape("Circle",[e,t,n,r,i,s])},drawPieSlice:function(e,t,n,r,i,s,o){return this._genShape("PieSlice",[e,t,n,r,i,s,o])},drawRect:function(e,t,n,r,i,s){return this._genShape("Rect",[e,t,n,r,i,s])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(t,n){e(n).html(t)},_calculatePixelDims:function(t,n,r){var i;i=this._pxregex.exec(n),i?this.pixelHeight=i[1]:this.pixelHeight=e(r).height(),i=this._pxregex.exec(t),i?this.pixelWidth=i[1]:this.pixelWidth=e(r).width()},_genShape:function(e,t){var n=P++;return t.unshift(n),new A(this,n,e,t)},appendShape:function(e){alert("appendShape not implemented")},replaceWithShape:function(e,t){alert("replaceWithShape not implemented")},insertAfterShape:function(e,t){alert("insertAfterShape not implemented")},removeShapeId:function(e){alert("removeShapeId not implemented")},getShapeAt:function(e,t,n){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),M=r(O,{init:function(t,n,r,i){M._super.init.call(this,t,n,r),this.canvas=document.createElement("canvas"),r[0]&&(r=r[0]),e.data(r,"_jqs_vcanvas",this),e(this.canvas).css({display:"inline-block",width:t,height:n,verticalAlign:"top"}),this._insert(this.canvas,r),this._calculatePixelDims(t,n,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=i,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=undefined,e(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(e,t,n){var r=this.canvas.getContext("2d");return e!==undefined&&(r.strokeStyle=e),r.lineWidth=n===undefined?1:n,t!==undefined&&(r.fillStyle=t),r},reset:function(){var e=this._getContext();e.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=undefined},_drawShape:function(e,t,n,r,i){var s=this._getContext(n,r,i),o,u;s.beginPath(),s.moveTo(t[0][0]+.5,t[0][1]+.5);for(o=1,u=t.length;o<u;o++)s.lineTo(t[o][0]+.5,t[o][1]+.5);n!==undefined&&s.stroke(),r!==undefined&&s.fill(),this.targetX!==undefined&&this.targetY!==undefined&&s.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e)},_drawCircle:function(e,t,n,r,i,s,o){var u=this._getContext(i,s,o);u.beginPath(),u.arc(t,n,r,0,2*Math.PI,!1),this.targetX!==undefined&&this.targetY!==undefined&&u.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e),i!==undefined&&u.stroke(),s!==undefined&&u.fill()},_drawPieSlice:function(e,t,n,r,i,s,o,u){var a=this._getContext(o,u);a.beginPath(),a.moveTo(t,n),a.arc(t,n,r,i,s,!1),a.lineTo(t,n),a.closePath(),o!==undefined&&a.stroke(),u&&a.fill(),this.targetX!==undefined&&this.targetY!==undefined&&a.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=e)},_drawRect:function(e,t,n,r,i,s,o){return this._drawShape(e,[[t,n],[t+r,n],[t+r,n+i],[t,n+i],[t,n]],s,o)},appendShape:function(e){return this.shapes[e.id]=e,this.shapeseq.push(e.id),this.lastShapeId=e.id,e.id},replaceWithShape:function(e,t){var n=this.shapeseq,r;this.shapes[t.id]=t;for(r=n.length;r--;)n[r]==e&&(n[r]=t.id);delete this.shapes[e]},replaceWithShapes:function(e,t){var n=this.shapeseq,r={},i,s,o;for(s=e.length;s--;)r[e[s]]=!0;for(s=n.length;s--;)i=n[s],r[i]&&(n.splice(s,1),delete this.shapes[i],o=s);for(s=t.length;s--;)n.splice(o,0,t[s].id),this.shapes[t[s].id]=t[s]},insertAfterShape:function(e,t){var n=this.shapeseq,r;for(r=n.length;r--;)if(n[r]===e){n.splice(r+1,0,t.id),this.shapes[t.id]=t;return}},removeShapeId:function(e){var t=this.shapeseq,n;for(n=t.length;n--;)if(t[n]===e){t.splice(n,1);break}delete this.shapes[e]},getShapeAt:function(e,t,n){return this.targetX=t,this.targetY=n,this.render(),this.currentTargetShapeId},render:function(){var e=this.shapeseq,t=this.shapes,n=e.length,r=this._getContext(),i,s,o;r.clearRect(0,0,this.pixelWidth,this.pixelHeight);for(o=0;o<n;o++)i=e[o],s=t[i],this["_draw"+s.type].apply(this,s.args);this.interact||(this.shapes={},this.shapeseq=[])}}),_=r(O,{init:function(t,n,r){var i;_._super.init.call(this,t,n,r),r[0]&&(r=r[0]),e.data(r,"_jqs_vcanvas",this),this.canvas=document.createElement("span"),e(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:t,height:n,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,r),this._calculatePixelDims(t,n,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,i='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"'+' style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",i),this.group=e(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(e,t,n,r,i){var s=[],o,u,a,f,l,c,h;for(h=0,c=t.length;h<c;h++)s[h]=""+t[h][0]+","+t[h][1];return o=s.splice(0,1),i=i===undefined?1:i,u=n===undefined?' stroked="false" ':' strokeWeight="'+i+'px" strokeColor="'+n+'" ',a=r===undefined?' filled="false"':' fillColor="'+r+'" filled="true" ',f=s[0]===s[s.length-1]?"x ":"",l='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+e+'" '+u+a+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+o+" l "+s.join(", ")+" "+f+'e">'+" </v:shape>",l},_drawCircle:function(e,t,n,r,i,s,o){var u,a,f;return t-=r,n-=r,u=i===undefined?' stroked="false" ':' strokeWeight="'+o+'px" strokeColor="'+i+'" ',a=s===undefined?' filled="false"':' fillColor="'+s+'" filled="true" ',f='<v:oval  id="jqsshape'+e+'" '+u+a+' style="position:absolute;top:'+n+"px; left:"+t+"px; width:"+r*2+"px; height:"+r*2+'px"></v:oval>',f},_drawPieSlice:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v;if(i===s)return;s-i===2*Math.PI&&(i=0,s=2*Math.PI),f=t+Math.round(Math.cos(i)*r),l=n+Math.round(Math.sin(i)*r),c=t+Math.round(Math.cos(s)*r),h=n+Math.round(Math.sin(s)*r);if(f===c&&l===h&&s-i<Math.PI)return;return a=[t-r,n-r,t+r,n+r,f,l,c,h],p=o===undefined?' stroked="false" ':' strokeWeight="1px" strokeColor="'+o+'" ',d=u===undefined?' filled="false"':' fillColor="'+u+'" filled="true" ',v='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+e+'" '+p+d+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+t+","+n+" wa "+a.join(", ")+' x e">'+" </v:shape>",v},_drawRect:function(e,t,n,r,i,s,o){return this._drawShape(e,[[t,n],[t,n+i],[t+r,n+i],[t+r,n],[t,n]],s,o)},reset:function(){this.group.innerHTML=""},appendShape:function(e){var t=this["_draw"+e.type].apply(this,e.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",t):this.prerender+=t,this.lastShapeId=e.id,e.id},replaceWithShape:function(t,n){var r=e("#jqsshape"+t),i=this["_draw"+n.type].apply(this,n.args);r[0].outerHTML=i},replaceWithShapes:function(t,n){var r=e("#jqsshape"+t[0]),i="",s=n.length,o;for(o=0;o<s;o++)i+=this["_draw"+n[o].type].apply(this,n[o].args);r[0].outerHTML=i;for(o=1;o<t.length;o++)e("#jqsshape"+t[o]).remove()},insertAfterShape:function(t,n){var r=e("#jqsshape"+t),i=this["_draw"+n.type].apply(this,n.args);r[0].insertAdjacentHTML("afterEnd",i)},removeShapeId:function(t){var n=e("#jqsshape"+t);this.group.removeChild(n[0])},getShapeAt:function(e,t,n){var r=e.id.substr(8);return r},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})}),define("views/shared/results_table/renderers/NullCellRenderer",["require","exports","module","underscore","./BaseCellRenderer"],function(e,t,n){var r=e("underscore"),i=e("./BaseCellRenderer");return i.extend({canRender:function(e){return r.isNull(e.value)||r.isEqual(e.value,[])},render:function(e,t){e.html("&nbsp;")}})}),define("views/shared/results_table/renderers/NumberCellRenderer",["require","exports","module","underscore","../ResultsTableRow","./BaseCellRenderer"],function(e,t,n){var r=e("underscore"),i=e("../ResultsTableRow"),s=e("./BaseCellRenderer");return s.extend({canRender:function(e){return e.columnType==="number"},setup:function(e,t){e.addClass("numeric")},teardown:function(e,t){e.removeClass("numeric with-overlay")},render:function(e,t){t=r.extend({floatValue:parseFloat(t.value),heatValue:t.dataOverlay==="heatmap"?Math.min(Math.max(Math.ceil(t.value/t.heatDelta*1e3)/1e3,-1),1):null,MV_SUBCELL_CLASSNAME:i.MV_SUBCELL_CLASSNAME,MV_INDEX_ATTR:i.MV_INDEX_ATTR},t),t.dataOverlay==="highlow"||t.dataOverlay==="heatmap"?e.addClass("with-overlay"):e.removeClass("with-overlay"),e.html(r.template(this.template,t))},template:'            <% if (dataOverlay === "heatmap") { %>                <div class="overlay-cell">                    <div class="overlay-cell-value heat-value" style="opacity: <%- heatValue %>; filter: alpha(opacity=<%- heatValue * 100 %>);"></div>                </div>            <% } else if (dataOverlay === "highlow") { %>                <% if (floatValue === extremes.min) { %>                    <div class="overlay-cell">                        <div class="overlay-cell-value min-value"></div>                    </div>                <% } else if (floatValue === extremes.max) { %>                    <div class="overlay-cell">                        <div class="overlay-cell-value max-value"></div>                    </div>                <% } else { %>                    <div class="overlay-cell">                        <div class="overlay-cell-value no-value"></div>                    </div>                <% } %>            <% } %>            <% if (_.isArray(value)) { %>                <% _(value).each(function(subValue, i) { %>                    <div class="<%- MV_SUBCELL_CLASSNAME %>" <%- MV_INDEX_ATTR %>="<%- i %>">                        <%- subValue %>                    </div>                <% }) %>            <% } else { %>                <%- value %>            <% } %>        '})}),define("views/shared/results_table/renderers/SparklineCellRenderer",["require","exports","module","jquery","underscore","jquery.sparkline","./BaseCellRenderer"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("jquery.sparkline"),o=e("./BaseCellRenderer"),u={type:"bar",barColor:"#008000",highlightSpotColor:null,minSpotColor:null,maxSpotColor:null,spotColor:null,fillColor:null};return o.extend({canRender:function(e){return i.isArray(e.value)&&e.value[0]==="##__SPARKLINE__##"},render:function(e,t){var n=i.extend({},u,t.sparklineFormat);e.sparkline(i.isArray(t.value)?i.map(t.value.slice(1),parseFloat):[],n)}})}),define("views/shared/results_table/renderers/StringCellRenderer",["require","exports","module","underscore","../ResultsTableRow","./BaseCellRenderer"],function(e,t,n){var r=e("underscore"),i=e("../ResultsTableRow"),s=e("./BaseCellRenderer");return s.extend({canRender:function(e){return!0},render:function(e,t){t=r.extend({MV_SUBCELL_CLASSNAME:i.MV_SUBCELL_CLASSNAME,MV_INDEX_ATTR:i.MV_INDEX_ATTR},t),e.html(r.template(this.template,t))},template:'            <% if (_.isArray(value)) { %>                <% _(value).each(function(subValue, i) { %>                    <div class="<%- MV_SUBCELL_CLASSNAME %>" <%- MV_INDEX_ATTR %>="<%- i %>">                        <%- subValue %>                    </div>                <% }) %>            <% } else { %>                <%- value %>            <% } %>        '})}),define("views/shared/results_table/renderers/TimeCellRenderer",["require","exports","module","underscore","splunk.i18n","util/time_utils","./BaseCellRenderer"],function(e,t,n){var r=e("underscore"),i=e("splunk.i18n"),s=e("util/time_utils"),o=e("./BaseCellRenderer");return o.extend({canRender:function(e){return e.columnType==="timestamp"},setup:function(e,t){e.addClass("timestamp")},teardown:function(e,t){e.removeClass("timestamp")},render:function(e,t){t=r.extend({formattedValue:t.value!=="ALL"?i.format_date(s.isoToDateObject(t.value),t.timestampFormat):t.value},t),e.html(r.template(this.template,t))},template:"            <%- formattedValue %>        "})}),define("views/shared/results_table/ResultsTableMaster",["jquery","underscore","module","views/Base","./ResultsTableHeader","./ResultsTableRow","views/shared/delegates/ColumnSort","views/shared/delegates/TableDock","views/shared/delegates/TableHeadStatic","helpers/grid/RowIterator","helpers/Printer","splunk.util","util/general_utils","util/time_utils","jquery.sparkline","./renderers/BaseCellRenderer","./renderers/NullCellRenderer","./renderers/NumberCellRenderer","./renderers/SparklineCellRenderer","./renderers/StringCellRenderer","./renderers/TimeCellRenderer"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){var E=/^[^_]|^_time/,S={year:"YYYY",month:"YYYY-MM",day:"YYYY-MM-dd",hour:"YYYY-MM-dd HH:00",minute:"YYYY-MM-dd HH:mm:00",second:"YYYY-MM-dd HH:mm:ss"},x=["display.statistics.wrap","display.statistics.rowNumbers","display.statistics.overlay","display.statistics.sparkline.format"],T="."+s.MV_SUBCELL_CLASSNAME;return r.extend({moduleId:n.id,events:{"mouseover tbody td":function(t){this.handleCellMouseover(e(t.target))},"mouseout tbody td":function(t){this.handleCellMouseout(e(t.target))},"click tbody td":function(t){t.preventDefault(),this.handleCellClick(e(t.target),t)}},initialize:function(n){r.prototype.initialize.call(this,n);if(this.options.enableStaticHeader&&this.options.enableTableDock!==!1)throw new Error("Static header and docking header cannot be enabled at the same time");var i={sortKeyAttr:"sortKey",sortDirAttr:"sortDirection",countAttr:"count",offsetAttr:"offset"};this.options=e.extend(!0,i,this.options),this.rawFields=[],this.rawRows=[],this.dataFields=[],this.dataRows=[],this.columnTypes={},this.fieldHeatDeltas={},this.fieldExtremes={},this.fieldTimestampFormats={},this.sparklineFormatSettings={},this._cellRenderers=[],this.children.columnSort=new o({el:this.el,model:this.model.metadata,autoUpdate:!0,sortKeyAttr:this.options.sortKeyAttr,sortDirAttr:this.options.sortDirAttr}),this.options.enableTableDock!==!1&&(this.children.tableDock=new u({el:this.el,offset:this.options.tableDockOffset})),this.model.results.on("change",t.debounce(this.handleResultsChange,0),this),this.model.format.on("change",this.handleFormatChange,this),this.updateFormatSettings(),this.readResults(),this.options.disable&&this.$el.addClass("table-disabled"),this.options.enableStaticHeader&&l.on(l.PRINT_END,function(){this.children.staticHead.update()},this),this.addCellRenderer(new b),this.addCellRenderer(new w),this.addCellRenderer(new g),this.addCellRenderer(new y),this.addCellRenderer(new m)},addCellRenderer:function(e){if(!(typeof e=="function"||e instanceof v))throw new Error("Parameter cellRenderer must be a function or an instance of views/shared/results_table/renderers/BaseCellRenderer.");this._cellRenderers.unshift(e)},removeCellRenderer:function(e){if(!(typeof e=="function"||e instanceof v))throw new Error("Parameter cellRenderer must be a function or an instance of views/shared/results_table/renderers/BaseCellRenderer.");var t=this._cellRenderers;for(var n=0,r=t.length;n<r;n++)if(t[n]===e){t.splice(n,1);break}},getCellRenderers:function(){return this._cellRenderers.concat()},remove:function(){return l.off(null,null,this),r.prototype.remove.apply(this,arguments)},handleResultsChange:function(){this.readResults(),this.render()},readResults:function(){this.rawFields=this.getFieldList(),this.rawRows=this.model.results.get("rows")||[],this.dataFields=t(this.rawFields).filter(this.isDataField,this),this.dataRows=t(this.rawRows).map(function(e){return t(e).filter(function(e,t){return this.isDataField(this.rawFields[t])},this)},this)},handleFormatChange:function(){var e=t(this.model.format.changedAttributes()).pick(x);if(t(e).isEmpty())return;this.updateFormatSettings(),this.debouncedRender()},render:function(){this.options.enableStaticHeader&&!this.el.innerHTML&&(this.$el.html(this.staticHeaderTemplate),this.children.staticHead=new a({el:this.el,flexWidthColumn:!1}));var t=this.compiledTemplate({wrapResults:c.normalizeBoolean(this.model.format.get("display.statistics.wrap")),numDataColumns:this.dataFields.length}),n=e(t);this.disposeOfChildren();if(this.dataFields.length>0&&this.dataRows.length>0){var r=this.resultsAsColumns();this.updateColumnTypes(r),this.insertHeader(n,this.dataFields),this.insertRows(n,this.dataFields,this.dataRows,r),this.children.columnSort.update(n)}return this.options.enableStaticHeader?(this.$(".scroll-table-wrapper").html(n),this.children.staticHead.update()):this.$el.html(n),e.sparkline_display_visible(),this.children.tableDock&&this.children.tableDock.update(),this.options.disable&&this.$el.append(e('<div class="table-disabled-screen"></div>')),this.trigger("rendered"),this},handleCellMouseover:function(e){var t=this.model.format.get("display.statistics.drilldown"),n=c.normalizeBoolean(this.model.format.get("display.statistics.rowNumbers"));if(t==="off")return;var r=e.closest("td"),i=this.getCellInfo(r),s=this.children["row_"+i.rowIndex];if(!s)return;if(t==="cell"){if(r.find(T).length>0&&!e.is(T))return;this.children.header.highlightColumn(i.cellIndex),this.children.tableDock&&this.children.tableDock.$headerTable.find("th").eq(parseInt(i.cellIndex,10)+(n?1:0)).addClass("highlighted"),this.children.staticHead&&this.children.staticHead.$headerTable.find("th").eq(parseInt(i.cellIndex,10)+(n?1:0)).addClass("highlighted"),s.highlightCell(e,i.cellIndex)}else s.highlightRow()},handleCellMouseout:function(e){var t=this.model.format.get("display.statistics.drilldown"),n=c.normalizeBoolean(this.model.format.get("display.statistics.rowNumbers"));if(t==="off")return;var r=e.closest("td"),i=this.getCellInfo(r),s=this.children["row_"+i.rowIndex];if(!s)return;if(t==="cell"){if(r.find(T).length>0&&!e.is(T))return;this.children.header.unHighlightColumn(i.cellIndex),this.children.tableDock&&this.children.tableDock.$headerTable.find("th").eq(parseInt(i.cellIndex,10)+(n?1:0)).removeClass("highlighted"),this.children.staticHead&&this.children.staticHead.$headerTable.find("th").eq(parseInt(i.cellIndex,10)+(n?1:0)).removeClass("highlighted"),s.unHighlightCell(e,i.cellIndex)}else s.unHighlightRow()},handleCellClick:function(e,t){var n=this.model.format.get("display.statistics.drilldown");if(n==="off")return;var r=e.closest("td"),i=r.find(T).length>0;if(n==="cell"&&i&&!e.is(T))return;var s=this.getCellInfo(r),o=!!t.ctrlKey||!!t.metaKey;i&&(s.mvIndex=this.getMultiValueIndex(e)),this.emitDrilldownEvent(s,o,t)},emitDrilldownEvent:function(e,n,r){var i=e.rowIndex,s=e.cellIndex,o=this.dataFields[0],u=this.isTimeField(o),a=this.dataRows[i][0],f={modifierKey:n,name:o,value:u?c.getEpochTimeFromISO(a):a};if(u){var l=this.getSpanSeriesForTimeField(o);l&&(f._span=parseInt(l[s],10))}var h=t.isArray(this.dataRows[i][s]);if(s>0||h)f.name2=this.dataFields[s],f.value2=h?this.dataRows[i][s][e.mvIndex||0]:this.dataRows[i][s];var p={};t(this.dataRows[i]).each(function(e,t){p["row."+this.dataFields[t]]=e},this),f.rowContext=p,f.rowIndex=parseInt(i,10),f.cellIndex=parseInt(s,10),f.originalEvent=r,this.trigger("cellClick",f)},insertHeader:function(e,t){this.children.header=new i({rowNumbers:c.normalizeBoolean(this.model.format.get("display.statistics.rowNumbers")),fields:t,columnTypes:this.columnTypes,sortKeyAttribute:o.SORT_KEY_ATTR}),e.find("thead").replaceWith(this.children.header.render().$el)},insertRows:function(e,n,r,i){var o=this.model.format.get("display.statistics.overlay"),u=c.normalizeBoolean(this.model.format.get("display.statistics.rowNumbers"));o==="heatmap"?this.updateHeatDeltas(i):o==="highlow"&&this.updateExtremes(i),t(this.columnTypes).contains("timestamp")&&this.updateFieldTimestampFormats(n,r,i);var a=new f({offset:this.model.metadata.get(this.options.offsetAttr)}),l=e.find("tbody");a.eachRow(r,function(e,t,r){var i={table:this,cells:this.generateCellObjects(e,n,o),dataOverlay:o,rowIndex:t};u&&(i.rowNumber=r);var a=this.children["row_"+t]=new s(i);l.append(a.render().$el)},this)},generateCellObjects:function(e,n,r){return t(e).map(function(e,t){var i=n[t];return{value:e,field:i,dataOverlay:r,columnType:this.columnTypes[i]||"string",heatDelta:this.fieldHeatDeltas[i],extremes:this.fieldExtremes[i],timestampFormat:this.fieldTimestampFormats[i],sparklineFormat:this.sparklineFormatSettings[i],index:t}},this)},disposeOfChildren:function(){t(this.children).each(function(e,t){if(t==="header"||t.substr(0,4)==="row_")e.dispose(),delete this.children[t]},this)},resultsAsColumns:function(){var e={},n=this.model.results.get("rows")||[];return t(this.getFieldList()).each(function(r,i){e[r]=t(n).pluck(i)}),e},updateFormatSettings:function(){var e=this.sparklineFormatSettings={};this.model.format.has("display.statistics.sparkline.format")&&t.extend(e,this.model.format.get("display.statistics.sparkline.format"))},updateColumnTypes:function(e){this.columnTypes={},t(e).each(function(e,t){this.isTimeField(t)?this.columnTypes[t]="timestamp":this.columnTypes[t]=h.valuesAreNumeric(e)?"number":"string"},this)},updateHeatDeltas:function(e){this.fieldHeatDeltas={},t(e).each(function(e,n){if(this.columnTypes[n]==="number"){e=t(e).map(function(e){return t.isArray(e)&&(e=e.length>0?e[0]:null),parseFloat(e)||null}),e.sort(function(e,t){return e-t});var r=h.getPercentiles(e,.05,.95);this.fieldHeatDeltas[n]=Math.max(Math.abs(r.lower),Math.abs(r.upper))}},this)},updateExtremes:function(e){this.fieldExtremes={},t(e).each(function(e,n){this.columnTypes[n]==="number"&&(e=t(e).map(function(e){return t.isArray(e)&&(e=e.length>0?e[0]:null),parseFloat(e)||null}),this.fieldExtremes[n]={min:t(e).chain().without(null).min().value(),max:t(e).max()})},this)},updateFieldTimestampFormats:function(e,n,r){this.fieldTimestampFormats={},t(e).each(function(e,t){if(this.isTimeField(e))if(this.isBucketedTimeField(e)){var n=p.determineLabelGranularity(r[e]);this.fieldTimestampFormats[e]=S[n]}else this.fieldTimestampFormats[e]=S.second},this)},getFieldList:function(){return t(this.model.results.get("fields")||[]).map(function(e){return t(e).isString()?e:e.name})},isDataField:function(e){return E.test(e)},isTimeField:function(e){return e in{_time:!0,earliest_time:!0,latest_time:!0}},isBucketedTimeField:function(e){return e==="_time"},getSpanSeriesForTimeField:function(e){var t="_span";return this.resultsAsColumns()[t]},getCellInfo:function(e){return{cellIndex:e.attr(s.CELL_INDEX_ATTR),rowIndex:e.closest("tr").attr(s.ROW_INDEX_ATTR)}},getMultiValueIndex:function(e){return e.attr(s.MV_INDEX_ATTR)},template:'            <table class="table table-chrome table-striped <%= wrapResults ? "wrapped-results" : "not-wrapped-results" %> <%= numDataColumns === 1 ? \'single-column-table\' : \'\' %>">                <thead></thead>                <tbody></tbody>            </table>        ',staticHeaderTemplate:'            <div class="header-table-static"></div>            <div class="scroll-table-wrapper"></div>        '},{TIMESTAMP_FORMATS:S})}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/paginator.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/paginatorview",["require","exports","module","underscore","./mvc","./basesplunkview","./settings","css!../css/paginator.css"],function(e,t,n){var r=e("underscore"),i=e("./mvc"),s=e("./basesplunkview"),o=e("./settings"),u=0,a=10;e("css!../css/paginator.css");var f=s.extend({moduleId:n.id,className:"splunk-paginator",events:{"click a":"onPageClick"},options:{itemCount:-1,page:u,pageSize:a},initialize:function(){this.configure(),this.settings.on("change",this.render,this)},hide:function(){this.$el.css("display","none")},render:function(e){this.$el.empty();var t=this.settings.get("pageSize"),n=this.settings.get("itemCount");if(n<=t)return this;var i=this.settings.get("page"),s=Math.ceil(n/t),o=Math.min(10,s),u,a;u=Math.max(0,i-o/2),a=Math.min(s,u+o)-1,u=Math.max(0,a-o+1);var f=function(e){return"<a href='#' data-page='"+e+"'/>"},l='<a href="#" class="disabled"/>',c='<a href="#" class="selected"/>',h=this.$el,p=$(i==0?l:f("prev"),h);p.html("&laquo; "+r("prev").t()).appendTo(h);var d;for(d=u;d<=a;++d)p=$(d==i?c:f(d)),p.text(d+1).appendTo(h);return p=$(i==a?l:f("next"),h),p.html(r("next").t()+" &raquo;").appendTo(h),this},show:function(){this.$el.css("display","")},onPageClick:function(e){e.stopPropagation(),e.preventDefault();if($(e.currentTarget).is(".selected,.disabled"))return;var t=$(e.currentTarget).attr("data-page"),n=this.settings.get("page");switch(t){case"prev":e.shiftKey?n=0:n-=1;break;case"next":if(e.shiftKey){var r=this.settings.get("itemCount"),i=this.settings.get("pageSize");n=parseInt(r/i,10)-(r%i==0?1:0)}else n+=1;break;default:n=parseInt(t,10)}this.settings.set({page:n})}});return f}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/results-table.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/tableview",["require","exports","module","jquery","underscore","./mvc","./utils","splunk.util","backbone","./basesplunkview","views/shared/results_table/ResultsTableMaster","./messages","./drilldown","./paginatorview","util/console","css!../css/results-table"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("./mvc"),o=e("./utils"),u=e("splunk.util"),a=e("backbone"),f=e("./basesplunkview"),l=e("views/shared/results_table/ResultsTableMaster"),c=e("./messages"),h=e("./drilldown"),p=e("./paginatorview"),d=e("util/console");e("css!../css/results-table");var v=/(["'].*?["']|[^"',\s]+)(?=\s*|\s*,|\s*$)/g,m=/^["']|["|']$/g,g=f.extend({moduleId:n.id,className:"splunk-table",options:{data:"preview",drilldown:"row",pagerPosition:"bottom",stripedRows:!0,fields:[],pageSize:10},populateSettings:function(e){e.hasOwnProperty("count")&&this.settings.set("count",parseInt(this.options.count,10)),e.hasOwnProperty("wrap")&&this.settings.set("wrap",u.normalizeBoolean(e.wrap)?"1":"0"),e.hasOwnProperty("displayRowNumbers")&&this.settings.set("displayRowNumbers",u.normalizeBoolean(e.displayRowNumbers)?"1":"0");if(e.format){var t={};i.each(e.format,function(e,n){i.each(e,function(e){e.type==="sparkline"&&(t[n]=e.options)})}),i(t).isEmpty()||this.settings.set({"sparkline.format":t})}},initialize:function(e){this.configure(),s.enableDynamicTokens(this.settings),this.model=this.options.reportModel||new a.Model,this.populateSettings(e),this.settings._sync=o.syncModels(this.settings,this.model,{auto:!0,alias:{displayRowNumbers:"display.statistics.rowNumbers",dataOverlayMode:"display.statistics.overlay",pageSize:"display.statistics.count"},prefix:"display.statistics.",include:["displayRowNumbers","dataOverlayMode","pageSize","stripedRows","drilldown","sortKey","sortDirection","overlay","count","sparkline.format","wrap"]});var t=this.results=new a.Model({rows:[],fields:[]}),n=this.metadata=new a.Model({count:this.settings.get("pageSize")||10,offset:0}),u=this.table=new l({enableTableDock:!1,el:r("<div></div>").appendTo(this.el),model:{results:t,metadata:n,format:this.model}});this.listenTo(this.table,"rendered",function(){this.trigger("rendered",this)},this),this.settings._syncMeta=o.syncModels(this.settings,this.metadata,{include:["sortKey","sortDirection","pageSize"],auto:"push"}),n.on("change",this.applyFetchOptions,this);if(this.options.showPager!==!1){var f=r("<div></div>")[this.options.pagerPosition==="bottom"?"appendTo":"prependTo"](this.el),c=this.paginator=new p({id:i.uniqueId(this.id+"-paginator"),el:f,pageSize:n.get("count")});c.settings.on("change:page",function(){var e=n.get("count"),t=c.settings.get("page");this.metadata.set("offset",e*t)},this)}this.transformFieldsToArray(),this.listenTo(this.settings,"change:fields",this.onFieldsChanged),u.on("cellClick",this.emitDrilldownEvent,this),this.bindToComponent(this.options.managerid,this.onManagerChange,this)},emitDrilldownEvent:function(e){var t=s.Global.toJSON(),n=this.manager;i.extend(t,{"click.name":e.name,"click.value":e.value}),e.hasOwnProperty("name2")?i.extend(t,{"click.name2":e.name2,"click.value2":e.value2}):i.extend(t,{"click.name2":e.name,"click.value2":e.value}),i.extend(t,e.rowContext);var r=this.resultsModel?this.resultsModel.data().rows:null;if(r&&e.rowIndex<r.length){var o=r[e.rowIndex],u=this.resultsModel.data().fields;i(u).each(function(e,n){e="row."+e,e in t||(t[e]=o[n])})}n.job&&i.extend(t,{earliest:n.job.properties().searchEarliestTime,latest:n.job.properties().searchLatestTime}),this.trigger("drilldown",{field:e.name2||e.name,data:t,event:e,defaultDrilldown:i(this.drilldown).bind(this,e)});var a=e.rowIndex,f=e.cellIndex,l=this.collection.at(a);if(l){var c=e.hasOwnProperty("name2")?e.name2:e.name,h=e.hasOwnProperty("value2")?e.value2:e.value,p=e.originalEvent;this.trigger("clicked:row",{model:l,index:a,originalEvent:p,component:this},this),this.trigger("clicked:cell",{model:l,index:a,column:f,key:c,value:h,originalEvent:p,component:this},this)}},drilldown:function(e,t){h.handleDrilldown(e,this.settings.get("drilldown"),this.manager,t)},onManagerChange:function(e,t){this.manager&&this.manager.off(null,null,this),this.resultsModel&&this.resultsModel.off(null,null,this),this.manager=t,this.resultsModel=this.manager.data(this.settings.get("data"),{autofetch:!0,output_mode:"json_rows",show_empty_fields:"True",count:this.metadata.get("count"),offset:this.metadata.get("offset")}),this.manager.on("search:start",this.onSearchStart,this),this.manager.on("search:progress",this.onSearchProgress,this),this.manager.on("search:cancelled",this.onSearchCancelled,this),this.manager.on("search:fail",this.onSearchFailed,this),this.manager.on("search:error",this.onSearchError,this),this.manager.on("search:done",this.onSearchDone,this),this.resultsModel.on("data",this.renderResults,this),this.manager.isPostProcess&&(this.countData=this.manager.data("results",{autofetch:!1,output_mode:"json",search:"stats count"}),this.countData.on("data",function(e,t){if(!t.results)return;var n=parseInt(t.results[0].count,10);this.updateCount(n)},this));var n=t.get("data");n&&(this.onSearchStart(n),this.onSearchProgress({content:n}),n.isDone&&this.onSearchDone({content:n})),this.manager.replayLastSearchEvent(this)},renderMessage:function(e){var t=this.$(".msg");t.length||(t=r('<div class="msg"></div>').appendTo(this.table.$el)),c.render(e,t),this.trigger("rendered",this)},onSearchStart:function(){this._searchRunning=!0,this.clearResults(),this.renderMessage("waiting")},onSearchDone:function(e){this._searchRunning=!1;if(this.countData)this.countData.fetch();else{var t=((e||{}).content||{}).resultPreviewCount||0;this.updateCount(t)}},onSearchProgress:function(e){e=e||{};var t=e.content||{},n=t.resultPreviewCount||0;n>0&&(this.countData?this.countData.fetch():this.updateCount(n))},onSearchCancelled:function(){this.renderMessage("cancelled")},onSearchError:function(e,t,n){var r=e;t&&t.data&&t.data.messages&&t.data.messages.length&&(r=i(t.data.messages).pluck("text").join("; ")),this.renderMessage({level:"warning",icon:"warning-sign",message:r})},onSearchFailed:function(e,t){var n=i("The search failed.").t();e&&e.content&&e.content.messages&&(n=i(e.content.messages).pluck("text").join("; ")),this.renderMessage({level:"warning",icon:"warning-sign",message:n})},applyFetchOptions:function(){if(!this.resultsModel)return;var e={count:this.metadata.get("count"),offset:this.metadata.get("offset")};this.metadata.has("sortKey")&&(e.search=["|","sort",this.metadata.get("sortDirection")==="desc"?"-":"",JSON.stringify(this.metadata.get("sortKey"))].join(" ")),this.resultsModel.set(e)},updateCount:function(e){e===0&&(this.clearResults(),this._searchRunning?this.renderMessage("waiting"):this.renderMessage("no-results")),this.paginator&&this.paginator.settings.set("itemCount",e)},onFieldsChanged:function(){this.transformFieldsToArray(),this.renderResults()},transformFieldsToArray:function(){var e=this.settings.get("fields");i.isString(e)&&(e=i.map(e.match(v),function(e){return e.replace(m,"")}),this.settings.set("fields",e,{silent:!0}))},renderResults:function(){var e,t;if(!this.resultsModel)return;this.collection=this.resultsModel.collection();if(this.settings.has("fields")&&!i.isEmpty(this.settings.get("fields"))){t=this.settings.get("fields");var n={};i(this.resultsModel.data().fields).each(function(e,t){n[e]=t}),e=i(this.resultsModel.data().rows).map(function(e){return i(t).map(function(t){return n.hasOwnProperty(t)?e[n[t]]:null})})}else e=this.resultsModel.data().rows,t=this.resultsModel.data().fields;this.results.set({rows:e,fields:t})},clearResults:function(){this.paginator&&this.paginator.settings.set("itemCount",0),this.results.set({rows:[],fields:[]})},render:function(){return this.table.render(),this.paginator&&this.paginator.render(),this},remove:function(){this.table&&this.table.remove(),this.paginator&&this.paginator.remove(),this.settings&&(this.settings.off(),this.settings._sync&&this.settings._sync.destroy(),this.settings._syncMeta&&this.settings._syncMeta.destroy()),f.prototype.remove.call(this)}});return g}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.setBuffer('/*  */\n\n.splunk-paginator {\n    user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    margin-bottom: 5px;\n    padding-left: 15px;\n}\n.splunk-paginator .disabled, .splunk-paginator .selected {\n    color: #999;\n    cursor: default;\n}\n.splunk-paginator a {\n    border: 1px solid transparent;\n    border-radius: 3px;\n    padding-left: 5px;\n    padding-right: 5px;\n    text-decoration: none;\n    min-width: 20px;\n    line-height: 20px;\n    display: inline-block;\n    text-align: center;\n}\n.splunk-paginator a.selected, .splunk-paginator a:hover {\n    background: #eee;\n}\n.splunk-paginator span {\n    padding-left: 5px;\n    padding-right: 5px;\n}\n/*!\n * Splunk shoestrap\n * import and override bootstrap vars & mixins\n */\n.clearfix {\n  *zoom: 1;\n}\n.clearfix:before,\n.clearfix:after {\n  display: table;\n  content: "";\n  line-height: 0;\n}\n.clearfix:after {\n  clear: both;\n}\n.hide-text {\n  font: 0/0 a;\n  color: transparent;\n  text-shadow: none;\n  background-color: transparent;\n  border: 0;\n}\n.input-block-level {\n  display: block;\n  width: 100%;\n  min-height: 26px;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.ie7-force-layout {\n  *min-width: 0;\n}\n/* results table view\n    Sub-components: table-chrome, table-sorts, etc.\n\n    <div class="views-shared-resultstable" style="display: block;">\n        <div class="simpleResultsTableWrapper">\n            <table class="simpleResultsTable splTable table table-striped table-chrome enableMouseover">\n                <tbody>\n                    <tr class="">\n                        <th class="None sorts">\n                            <a><span class="sortLabel">count</span> </a>\n                        </th>\n                        <th class="None">\n                            <a><span class="sortLabel">host</span> </a>\n                        </th>\n                        <th class="None">\n                            <a><span class="sortLabel">percent</span> </a>\n                        </th>\n                    </tr>\n                    <tr>\n                        <td field="count" class="d" ismin="1" ismax="1" heat="1.0">\n                            100\n                        </td>\n                        <td field="host" class="d">\n                            pkhalil-mbp15.sv.splunk.com\n                        </td>\n                        <td field="percent" class="d" ismin="1" ismax="1" heat="1.0">\n                            100.000000\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n\n*/\n.shared-resultstable .simpleResultsTableWrapper {\n  width: 100%;\n  overflow: auto;\n}\n.shared-resultstable table .pos {\n  color: #888;\n  text-align: right;\n  font-size: 11px;\n  width: 50px;\n}\n.shared-resultstable table tr > th:first-child,\n.shared-resultstable table tr > td:first-child {\n  padding-left: 20px;\n}\n.shared-resultstable table tr > th:last-child,\n.shared-resultstable table tr > td:last-child {\n  padding-right: 20px;\n}\n.shared-resultstable .table-chrome th a {\n  color: #333333;\n  text-decoration: none;\n}\n.shared-resultstable .table-chrome th.pos:after {\n  content: "";\n}\n.shared-resultstable-resultstablemaster {\n  overflow-x: auto;\n}\n.shared-resultstable-resultstablemaster table tr > th:first-child,\n.shared-resultstable-resultstablemaster table tr > td:first-child {\n  padding-left: 20px;\n}\n.shared-resultstable-resultstablemaster table tr > th:last-child,\n.shared-resultstable-resultstablemaster table tr > td:last-child {\n  padding-right: 20px;\n}\n.shared-resultstable-resultstablemaster td.numeric .multivalue-subcell {\n  text-align: right;\n}\n.shared-resultstable-resultstablemaster td.timestamp,\n.shared-resultstable-resultstablemaster th.timestamp {\n  min-width: 150px;\n}\n.shared-resultstable-resultstablemaster table.single-column-table th.numeric {\n  text-align: left;\n}\n.shared-resultstable-resultstablemaster table.single-column-table td.numeric {\n  text-align: left;\n}\n.shared-resultstable-resultstablemaster table.single-column-table td.numeric .multivalue-subcell {\n  text-align: left;\n}\n.shared-resultstable-resultstablemaster td.with-overlay {\n  padding-right: 20px;\n}\n.shared-resultstable-resultstablemaster .overlay-cell {\n  height: 24px;\n  width: 15px;\n  float: right;\n  margin: -4px -20px -24px 0;\n}\n.shared-resultstable-resultstablemaster .overlay-cell-value {\n  height: 24px;\n  width: 0;\n  border-left: 15px solid #f5f5f5;\n}\n.shared-resultstable-resultstablemaster .heat-value {\n  border-left-color: #d85d3c;\n}\n.shared-resultstable-resultstablemaster .max-value {\n  border-left-color: #d85d3c;\n}\n.shared-resultstable-resultstablemaster .min-value {\n  border-left-color: #6ab7c7;\n}\n.shared-resultstable-resultstablemaster .no-value {\n  border-left-color: transparent;\n}\n.shared-resultstable-resultstablemaster .tbody tr.even td {\n  background-color: transparent;\n}\n.shared-resultstable-resultstablemaster .tbody tr.odd td {\n  background-color: #f5f5f5;\n}\n.shared-resultstable-resultstablemaster .wrapped-results th,\n.shared-resultstable-resultstablemaster .wrapped-results td {\n  white-space: normal;\n}\n.shared-resultstable-resultstablemaster .not-wrapped-results th,\n.shared-resultstable-resultstablemaster .not-wrapped-results td {\n  white-space: nowrap;\n}\n.shared-resultstable-resultstablemaster thead tr.sorts th.highlighted {\n  background-color: #eeeeee;\n  background-color: #f5f5f5;\n  background-image: -moz-linear-gradient(top, #ffffff, #e5e5e5);\n  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e5e5e5));\n  background-image: -webkit-linear-gradient(top, #ffffff, #e5e5e5);\n  background-image: -o-linear-gradient(top, #ffffff, #e5e5e5);\n  background-image: linear-gradient(to bottom, #ffffff, #e5e5e5);\n  background-repeat: repeat-x;\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#ffffffff\', endColorstr=\'#ffe5e5e5\', GradientType=0);\n  border-color: #aeaeae;\n  border-top-color: #b7b7b7;\n  border-bottom-color: #989898;\n  background-position: 0 0;\n}\n.shared-resultstable-resultstablemaster tbody td.highlighted,\n.shared-resultstable-resultstablemaster tbody tr.highlighted > td {\n  background-color: #e4e4e4 !important;\n  cursor: pointer;\n}\n.shared-resultstable-resultstablemaster .multivalue-subcell.highlighted {\n  background-color: #e4e4e4 !important;\n  cursor: pointer;\n}\n.shared-resultstable-resultstablemaster .scroll-table-wrapper {\n  height: 100%;\n}\n')}),requirejs.s.contexts._.nextTick=requirejs.nextTick;