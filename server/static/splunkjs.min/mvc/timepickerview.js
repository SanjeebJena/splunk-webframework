define("views/shared/timerangepicker/dialog/Presets",["jquery","underscore","backbone","module","views/Base","util/time_utils"],function(e,t,n,r,i,s){return i.extend({moduleId:r.id,className:"accordion-inner",initialize:function(){this.label=t("Presets").t();var e={showRealTime:!0,showRealTimeOnly:!1,showRelative:!0,showAllTime:!0};t.defaults(this.options,e),i.prototype.initialize.call(this,arguments),this.collection&&this.collection.on("reset",this.render,this)},supportsRange:function(){var e=this.model.get("earliest"),t=this.model.get("latest");return s.generateAllTimeLabel(e,t)||s.findPresetLabel(this.collection,e,t)},events:{"click a":function(t){t.preventDefault();var n=e(t.currentTarget);this.model.save({earliest:n.data("earliest"),latest:n.data("latest")}),this.model.trigger("applied")}},render:function(){var e=this.options.showRelative&&!this.options.showRealTimeOnly?this.collection.filterToPeriod():!1,n=e&&e.length,r=this.options.showRelative&&!this.options.showRealTimeOnly?this.collection.filterToLast():!1,i=r&&r.length,s=t.template(this.template,{_:t,realTimePresets:this.options.showRealTime?this.collection.filterToRealTime():!1,periodPresets:e,hasPeriodPresets:n,lastPresets:r,hasLastPresets:i,otherPresets:this.options.showRealTimeOnly?!1:this.collection.filterToOther(),options:this.options,isAllTime:this.isAllTime,listElementPartial:this.listElementPartial});return this.$el.html(s),this},isAllTime:function(e){var t=!e.entry.content.get("earliest_time")||e.entry.content.get("earliest_time")=="0",n=!e.entry.content.get("latest_time")||e.entry.content.get("latest_time")=="now";return t&&n},listElementPartial:t.template('            <li><a href="#" data-earliest="<%- model.entry.content.get("earliest_time") || "" %>" data-latest="<%- model.entry.content.get("latest_time") || "" %>"><%- _(model.entry.content.get("label")).t() %></a></li>        '),template:'            <% if (realTimePresets && realTimePresets.length) { %>                <ul class="unstyled presets-group">                    <li><%- _("Real-time").t() %></li>                    <% _.each(realTimePresets, function(model) { %>                        <%= listElementPartial({model: model}) %>                    <% }); %>                </ul>                <div class="presets-divider-wrap"><div class="presets-divider"></div></div>            <% } %>            <% if (hasPeriodPresets && hasLastPresets) { %>                    <ul class="unstyled presets-group">                        <li><%- _("Relative").t() %></li>                        <% _.each(periodPresets, function(model) { %>                            <%= listElementPartial({model: model}) %>                        <% }); %>                    </ul>                    <ul class="unstyled presets-group">                        <li>&nbsp;</li>                        <% _.each(lastPresets, function(model) { %>                             <%= listElementPartial({model: model}) %>                        <% }); %>                    </ul>                    <div class="presets-divider-wrap"><div class="presets-divider"></div></div>            <% } else if (hasPeriodPresets) { %>                <ul class="unstyled presets-group">                    <li><%- _("Relative").t() %></li>                    <% _.each(periodPresets, function(model) { %>                        <%= listElementPartial({model: model}) %>                    <% }); %>                </ul>                <div class="presets-divider-wrap"><div class="presets-divider"></div></div>            <% } else if (hasLastPresets) { %>                <ul class="unstyled presets-group">                    <li><%- _("Relative").t() %></li>                    <% _.each(lastPresets, function(model) { %>                        <%= listElementPartial({model: model}) %>                   <% }); %>                </ul>                <div class="presets-divider-wrap"><div class="presets-divider"></div></div>            <% } %>            <% if (otherPresets && otherPresets.length) { %>                <ul class="unstyled presets-group">                    <li><%- _("Other").t() %></li>                    <% _.each(otherPresets, function(model) { %>                        <% if (!(isAllTime(model) && !options.showAllTime)) { %>                            <%= listElementPartial({model: model}) %>                        <% } %>                    <% }); %>                </ul>            <% } %>        '})}),define("views/shared/timerangepicker/dialog/Relative",["jquery","underscore","backbone","module","models/services/search/TimeParser","models/TimeRange","views/Base","views/shared/controls/SyntheticSelectControl","views/shared/FlashMessages","util/time_utils","util/splunkd_utils","splunk.i18n"],function(e,t,n,r,i,s,o,u,a,f,l,c){return o.extend({moduleId:r.id,className:"accordion-inner",initialize:function(n){o.prototype.initialize.call(this,arguments),this.label=t("Relative").t(),this.model={range:this.model,workingRange:new s(e.extend(!0,{},this.model.toJSON())),earliestTimeParser:new i({key:f.stripRTSafe(this.model.get("earliest"),!1),value:this.model.get("earliest_iso")}),latestTimeParser:new i({key:f.stripRTSafe(this.model.get("latest"),!0),value:this.model.get("latest_iso")})},this.rangeMap={s:{earliest:t("Beginning of second").t(),latest:t("Beginning of current second").t()},m:{earliest:t("Beginning of minute").t(),latest:t("Beginning of current minute").t()},h:{earliest:t("Beginning of hour").t(),latest:t("Beginning of current hour").t()},d:{earliest:t("Beginning of day").t(),latest:t("Beginning of today").t()},w:{earliest:t("First day of week").t(),latest:t("First day of this week").t()},mon:{earliest:t("First day of month").t(),latest:t("First day of this month").t()},q:{earliest:t("First day of quarter").t(),latest:t("First day of this quarter").t()},y:{earliest:t("First day of year").t(),latest:t("First day of this year").t()}},this.model.workingRange.set("relative_range_unit","s"),this.children.rangeTypeSelect=new u({model:this.model.workingRange,items:[{value:"s",label:t("Seconds Ago").t()},{value:"m",label:t("Minutes Ago").t()},{value:"h",label:t("Hours Ago").t()},{value:"d",label:t("Days Ago").t()},{value:"w",label:t("Weeks Ago").t()},{value:"mon",label:t("Months Ago").t()},{value:"q",label:t("Quarters Ago").t()},{value:"y",label:t("Years Ago").t()}],modelAttribute:"relative_range_unit",className:"btn-group timerangepicker-relative_range_unit",toggleClassName:"btn",menuWidth:"narrow",popdownOptions:{attachDialogTo:"body"},save:!1}),this.children.flashMessages=new a({model:{workingRange:this.model.workingRange,earliestTimeParser:this.model.earliestTimeParser,latestTimeParser:this.model.latestTimeParser}}),this.model.workingRange.on("change:relative_range_unit",function(){var e=this.model.workingRange.get("relative_range_unit");this.$(".earliest_snap_label .text").html(this.rangeMap[e].earliest),this.$(".latest_snap_label .text").html(this.rangeMap[e].latest),this.fetchEarliestTime(),this.fetchLatestTime()},this),this.model.workingRange.on("change:relative_earliest_snap_to change:relative_earliest_value",t.debounce(this.fetchEarliestTime,0),this),this.model.workingRange.on("change:relative_latest_snap_to",t.debounce(this.fetchLatestTime,0),this),this.model.earliestTimeParser.on("change",this.updateEarliestHint,this),this.model.earliestTimeParser.on("error",function(){this.$("#earliest_hint_"+this.cid).html(this.model.earliestTimeParser.error.get("messages")[0].message),this.disableApply()},this),this.model.latestTimeParser.on("change",this.updateLatestHint,this),this.model.latestTimeParser.on("error",function(){this.$("#latest_hint_"+this.cid).html(this.model.latestTimeParser.error.get("messages")[0].message),this.disableApply()},this),this.model.range.on("change:earliest change:latest prepopulate",t.debounce(this.prepopulate,0),this)},updateEarliestHint:function(){var e=f.isoToDateObject(this.model.earliestTimeParser.get("value"));this.$("#earliest_hint_"+this.cid).html(c.format_datetime_microseconds(f.jsDateToSplunkDateTimeWithMicroseconds(e),"short","full")),this.enableApply()},updateLatestHint:function(){var e=f.isoToDateObject(this.model.latestTimeParser.get("value"));this.$("#latest_hint_"+this.cid).html(c.format_datetime_microseconds(f.jsDateToSplunkDateTimeWithMicroseconds(e),"short","full")),this.enableApply()},prepopulate:function(){var e=this.model.range.getTimeParse("earliest"),t=this.model.range.getTimeParse("latest"),n={};if(!e)return;n.relative_earliest_value=e.amount,n.relative_earliest_snap_to=e.hasSnap?1:0,n.relative_latest_snap_to=t&&t.hasSnap?1:0,this.rangeMap.hasOwnProperty(e.unit)&&(n.relative_range_unit=e.unit),this.model.workingRange.set(n),this.$(".earliest_input").val(e.amount),this.$("[name=earliest_snap][value="+this.model.workingRange.get("relative_earliest_snap_to")+"]").prop("checked",!0),this.$("[name=latest_snap][value="+this.model.workingRange.get("relative_latest_snap_to")+"]").prop("checked",!0)},supportsRange:function(){return f.generateRelativeTimeLabel(this.model.range.get("earliest"),this.model.range.get("latest"))},getEarliestTime:function(){var e=this.model.workingRange.get("relative_earliest_value"),t=this.model.workingRange.get("relative_range_unit")||"s",n=this.model.workingRange.get("relative_earliest_snap_to");return e?"-"+e+t+(n?"@"+t:""):null},fetchEarliestTime:function(){var e=this.getEarliestTime(),t=f.stripRTSafe(this.model.earliestTimeParser.id,!1);e&&e!==t?this.model.earliestTimeParser.fetch({data:{time:e}}):this.model.earliestTimeParser.get("value")?this.updateEarliestHint():(this.$("#earliest_hint_"+this.cid).html(""),this.enableApply())},getLatestTime:function(){var e=this.model.workingRange.get("relative_range_unit")||"mon",t=this.model.workingRange.get("relative_latest_snap_to"),n="now";return t&&(n="@"+e),n},fetchLatestTime:function(){var e=this.getLatestTime(),t=this.model.latestTimeParser.id;e&&e!==t?this.model.latestTimeParser.fetch({data:{time:e}}):this.model.latestTimeParser.get("value")?this.updateLatestHint():this.$("#latest_hint_"+this.cid).html("")},events:{"keyup .earliest_input":function(e){this.model.workingRange.set("relative_earliest_value",this.$("#earliest_"+this.cid).val())},"change .earliest_snap":function(e){var t=parseInt(this.$("input:radio[name=earliest_snap]:checked").val(),10);this.model.workingRange.set("relative_earliest_snap_to",t)},"change .latest_snap":function(e){var t=parseInt(this.$("input:radio[name=latest_snap]:checked").val(),10);this.model.workingRange.set("relative_latest_snap_to",t)},"click .apply":function(t){if(e(t.currentTarget).hasClass("disabled")){t.preventDefault();return}var n=this,r=this.getEarliestTime(),i=this.getLatestTime();if(!r){var s=l.createSplunkDMessage(l.ERROR,"Earliest cannot be blank.");return this.model.earliestTimeParser.trigger("error",this.model.earliestTimeParser,s),!1}this.disableApply(),this.model.workingRange.save({earliest:r,latest:i},{success:function(e){n.enableApply(),n.model.range.set({earliest:r,latest:i,earliest_epoch:e.get("earliest_epoch"),latest_epoch:e.get("latest_epoch"),earliest_iso:e.get("earliest_iso"),latest_iso:e.get("latest_iso"),earliest_date:new Date(e.get("earliest_date").getTime()),latest_date:new Date(e.get("latest_date").getTime())}),n.model.range.trigger("applied")},error:function(e,t){n.disableApply()}}),t.preventDefault()}},generateLabel:function(){return"Custom Time"},enableApply:function(){this.$("#apply_"+this.cid).removeClass("disabled")},disableApply:function(){this.$("#apply_"+this.cid).addClass("disabled")},render:function(){var e=t.template(this.template,{cid:this.cid,time:this.model.workingRange.get("relative_earliest_value")||"",rangeMap:this.rangeMap,selectedRange:this.model.workingRange.get("relative_range_unit")||"mon",_:t});return this.$el.html(e),this.$el.prepend(this.children.flashMessages.render().el),this.children.rangeTypeSelect.render().$el.insertAfter(this.$(".earliest_input")),this.model.latestTimeParser.isNew()&&this.fetchLatestTime(),this},template:'                <table class="form form-inline">                    <tbody class="relative-time-container" style="white-space:nowrap;">                        <tr>                            <td class="earliest_time">                                <table>                                    <tbody>                                        <tr>                                            <td>                                                <label class="control-label" for="earliest_<%- cid %>">                                                    <%- _("Earliest:").t() %>                                                </label>                                            </td>                                            <td>                                                <div class="input-append">                                                <input type="text" size="5" value="<%- time %>" class="earliest_input timerangepicker-relative-earliest-time" id="earliest_<%- cid %>"/>                                                </div>                                                <label for="earliest_no_snap_to_<%- cid %>" class="radio"><input type="radio" name="earliest_snap" class="earliest_snap" id="earliest_no_snap_to_<%- cid %>" value="0" checked="checked"/>                                                     <%- _("No Snap-to").t() %>                                                </label>                                                <label class="earliest_snap_label radio" for="earliest_snap_to_<%- cid %>"><input type="radio" name="earliest_snap" class="earliest_snap" id="earliest_snap_to_<%- cid %>" value="1"/>                                                <span class="text"><%= rangeMap[selectedRange].earliest %></span></label>                                            </td>                                        </tr>                                        <tr>                                            <td></td>                                            <td>                                                <span id="earliest_hint_<%- cid %>" class="help-block help-block-timestamp"></span>                                            </td>                                        </tr>                                    </tbody>                                </table>                            </td>                            <td class="latest_time">                                <table>                                    <tbody>                                        <tr>                                            <td>                                                <label class="control-label" for="<%- cid %>">                                                    <%- _("Latest:").t() %>                                                </label>                                            </td>                                            <td>                                                <label for="latest_no_snap_to_<%- cid %>" class="radio"><input type="radio" name="latest_snap" class="latest_snap" id="latest_no_snap_to_<%- cid %>" value="0" checked="checked"/>                                                   <%- _("now").t() %>                                                </label>                                                <label class="latest_snap_label radio" for="latest_snap_to_<%- cid %>"><input type="radio" name="latest_snap" class="latest_snap" id="latest_snap_to_<%- cid %>" value="1"/>                                                <span class="text"><%= rangeMap[selectedRange].latest %></span></label>                                            </td>                                        </tr>                                        <tr>                                            <td></td>                                            <td>                                                <span id="latest_hint_<%- cid %>" class="help-block help-block-timestamp"></span>                                            </td>                                        </tr>                                    </tbody>                                </table>                            </td>                            <td><button class="apply btn" id="apply_<%- cid %>">                                <%- _("Apply").t() %>                            </button></td>                        </tr>                    </tbody>                </table>            '})}),define("views/shared/timerangepicker/dialog/RealTime",["jquery","underscore","backbone","module","models/services/search/TimeParser","models/TimeRange","views/Base","views/shared/controls/SyntheticSelectControl","views/shared/FlashMessages","util/time_utils","splunk.i18n"],function(e,t,n,r,i,s,o,u,a,f,l){return o.extend({moduleId:r.id,className:"accordion-inner",initialize:function(n){o.prototype.initialize.call(this,arguments),this.label=t("Real-time").t(),this.model={range:this.model,workingRange:new s(e.extend(!0,{},this.model.toJSON())),earliestTimeParser:new i({key:f.stripRTSafe(this.model.get("earliest"),!1),value:this.model.get("earliest_iso")})},this.model.workingRange.set("realtime_range_type","s"),this.children.rangeTypeSelect=new u({model:this.model.workingRange,items:[{value:"s",label:t("Seconds Ago").t()},{value:"m",label:t("Minutes Ago").t()},{value:"h",label:t("Hours Ago").t()},{value:"d",label:t("Days Ago").t()},{value:"w",label:t("Weeks Ago").t()},{value:"mon",label:t("Months Ago").t()},{value:"q",label:t("Quarters Ago").t()},{value:"y",label:t("Years Ago").t()}],modelAttribute:"realtime_range_type",className:"btn-group timerangepicker-realtime_range_type",toggleClassName:"btn",menuWidth:"narrow",popdownOptions:{attachDialogTo:"body"},save:!1}),this.children.flashMessages=new a({model:{workingRange:this.model.workingRange,earliestTimeParser:this.model.earliestTimeParser}}),this.model.workingRange.on("change:realtime_range_type change:realtime_earliest_value",t.debounce(function(){this.fetchEarliestTime()}.bind(this),0),this),this.model.earliestTimeParser.on("change",this.updateEarliestHint,this),this.model.earliestTimeParser.on("error",function(){this.$("#hint_"+this.cid).html(this.model.earliestTimeParser.error.get("messages")[0].message),this.disableApply()},this),this.model.range.on("change:earliest change:latest prepopulate",t.debounce(this.prepopulate,0),this)},updateEarliestHint:function(){var e=f.isoToDateObject(this.model.earliestTimeParser.get("value"));this.$("#hint_"+this.cid).html(l.format_datetime_microseconds(f.jsDateToSplunkDateTimeWithMicroseconds(e),"short","full")),this.enableApply()},prepopulate:function(){var e=this.model.range.getTimeParse("earliest"),t={};if(!e)return;this.$(".earliest_input").val(e.amount),t.realtime_earliest_value=e.amount,t.realtime_range_type=e.unit,this.model.workingRange.set(t)},supportsRange:function(){var e=this.model.range.getTimeParse("earliest"),t=this.model.range.getTimeParse("latest");return e?e.isRealTime&&e.amount&&!e.snapUnit&&t.isRealTime&&t.isNow&&!t.snapUnit:!1},getEarliestTime:function(e){var t=this.model.workingRange.get("realtime_earliest_value"),n=this.model.workingRange.get("realtime_range_type")||"mon";return t?(e?"":"rt")+"-"+t+n:null},fetchEarliestTime:function(){var e=this.getEarliestTime(!0),t=f.stripRTSafe(this.model.earliestTimeParser.id,!1);e&&e!==t?this.model.earliestTimeParser.fetch({data:{time:e}}):this.model.earliestTimeParser.get("value")?this.updateEarliestHint():(this.$("#hint_"+this.cid).html(""),this.enableApply())},events:{"keyup .earliest_input":function(e){this.model.workingRange.set("realtime_earliest_value",this.$("#earliest_"+this.cid).val())},"click .apply":function(t){if(e(t.currentTarget).hasClass("disabled")){t.preventDefault();return}var n=this,r=this.getEarliestTime();this.disableApply(),this.model.workingRange.save({earliest:r,latest:"rtnow"},{success:function(e){n.enableApply(),n.model.range.set({earliest:r,latest:"rtnow",earliest_epoch:e.get("earliest_epoch"),latest_epoch:e.get("latest_epoch"),earliest_iso:e.get("earliest_iso"),latest_iso:e.get("latest_iso"),earliest_date:new Date(e.get("earliest_date").getTime()),latest_date:new Date(e.get("latest_date").getTime())}),n.model.range.trigger("applied")},error:function(e,t){n.enableApply()}}),t.preventDefault()}},enableApply:function(){this.$("#apply_"+this.cid).removeClass("disabled")},disableApply:function(){this.$("#apply_"+this.cid).addClass("disabled")},render:function(){var e=t.template(this.template,{_:t,cid:this.cid,time:this.model.workingRange.get("realtime_earliest_value")||""});return this.$el.html(e),this.$el.prepend(this.children.flashMessages.render().el),this.children.rangeTypeSelect.render().$el.insertAfter(this.$(".earliest_input")),this},template:'                <table class="form form-inline">                    <tbody>                        <tr>                            <td>                                <label class="control-label" for="earliest_<%- cid %>"><%- _("Earliest:").t() %></label>                            </td>                            <td>                                <div class="input-append"><input type="text" size="5" value="<%- time %>" class="earliest_input timerangepicker-real-time-earliest-time" id="earliest_<%- cid %>"/></div>                            </td>                            <td>                                <label class="control-label"><%- _("Latest:").t() %></label>                            </td>                            <td>                                <span class="form-value">now</span>                            </td>                            <td><button class="apply btn" id="apply_<%- cid %>"><%- _("Apply").t() %></button></td>                        </tr>                        <tr>                            <td></td>                            <td>                                <span id="hint_<%- cid %>" class="help-block help-block-timestamp"></span>                            </td>                        </tr>                    </tbody>                </table>            '})}),define("views/shared/timerangepicker/dialog/daterange/BetweenDates",["jquery","underscore","backbone","module","models/DateInput","models/TimeRange","views/Base","views/shared/controls/DateControl","views/shared/FlashMessages"],function(e,t,n,r,i,s,o,u,a){return o.extend({tagName:"tbody",moduleId:r.id,initialize:function(){o.prototype.initialize.call(this,arguments),this.model={range:this.model,workingRange:new s},this.today=new Date,this.today.setHours(0,0,0,0),this.model.latestDateInput=new i,this.model.latestDateInput.setFromJSDate(this.today,{silent:!0}),this.yesterday=new Date,this.yesterday.setDate(this.yesterday.getDate()-1),this.yesterday.setHours(0,0,0,0),this.model.earliestDateInput=new i,this.model.earliestDateInput.setFromJSDate(this.yesterday,{silent:!0}),this.children.earliestTimeInput=new u({model:this.model.earliestDateInput,inputClassName:"timerangepicker-earliest-date",validate:!0}),this.children.latestTimeInput=new u({model:this.model.latestDateInput,inputClassName:"timerangepicker-latest-date",validate:!0}),this.children.flashMessages=new a({model:{workingRange:this.model.workingRange,earliestDateInput:this.model.earliestDateInput,latestDateInput:this.model.latestDateInput}}),this.model.range.on("change:earliest_date change:latest_date prepopulate",t.debounce(this.prepopulate,0),this),this.model.earliestDateInput.on("validated:invalid",this.disableApply,this),this.model.earliestDateInput.on("validated:valid",this.enableApply,this),this.model.earliestDateInput.on("change",function(){this.model.workingRange.trigger("validated",!0,this.model.workingRange,{}),this.model.workingRange.trigger("serverValidated",!0,this.model.workingRange,[])},this),this.model.latestDateInput.on("validated:invalid",this.disableApply,this),this.model.latestDateInput.on("validated:valid",this.enableApply,this),this.model.latestDateInput.on("change",function(){this.model.workingRange.trigger("validated",!0,this.model.workingRange,{}),this.model.workingRange.trigger("serverValidated",!0,this.model.workingRange,[])},this)},prepopulate:function(){var e=this.model.range.get("earliest_date"),t=this.model.range.get("latest_date");!this.model.range.hasNoEarliest()&&e&&this.model.earliestDateInput.setFromJSDate(e,{validate:!0});if(t){var n=new Date(t.getTime());n.getHours()==0&&n.setDate(n.getDate()-1,{validate:!0}),this.model.latestDateInput.setFromJSDate(n,{validate:!0})}},events:{"click .apply":function(t){if(e(t.currentTarget).hasClass("disabled")){t.preventDefault();return}this.model.earliestDateInput.setHoursMinSecFromStr("00:00:00.000",{silent:!0,validate:!0}),this.model.latestDateInput.setHoursMinSecFromStr("24:00:00.000",{silent:!0,validate:!0});var n=this,r=this.model.earliestDateInput.isoWithoutTZ(),i=this.model.latestDateInput.isoWithoutTZ();this.disableApply(),this.model.workingRange.save({earliest:r,latest:i},{success:function(e){n.enableApply(),n.model.range.set({earliest:e.get("earliest_epoch"),latest:e.get("latest_epoch"),earliest_epoch:e.get("earliest_epoch"),latest_epoch:e.get("latest_epoch"),earliest_iso:e.get("earliest_iso"),latest_iso:e.get("latest_iso"),earliest_date:new Date(e.get("earliest_date").getTime()),latest_date:new Date(e.get("latest_date").getTime())}),n.model.range.trigger("applied")},error:function(e,t){n.enableApply()}}),t.preventDefault()}},generateLabel:function(){var e=this.model.earliestDateInput.jsDate(),t=this.model.latestDateInput.jsDate();return t.setDate(t.getDate()-1),e.toDateString().slice(4,-5)+" - "+t.toDateString().slice(4,-5)},enableApply:function(){this.$("#apply_"+this.cid).removeClass("disabled")},disableApply:function(){this.$("#apply_"+this.cid).addClass("disabled")},render:function(){var n=t.template(this.template,{_:t,cid:this.cid});return this.$el.html(n),this.$(".flash_messages").append(this.children.flashMessages.render().el),e(this.children.earliestTimeInput.render().el).prependTo(this.$(".earliest-date")),e(this.children.latestTimeInput.render().el).prependTo(this.$(".latest")),this},template:'                <tr><td class="flash_messages" colspan="4"></td></tr>                <tr>                    <td class="earliest-date"><span class="help-block"><%- _("00:00:00").t() %></span></td>                    <td><label class="control-label"><%- _("and").t() %></label></td>                    <td class="latest"><span class="help-block"><%- _("24:00:00").t() %></span></td>                    <td><button class="apply btn" id="apply_<%- cid %>"><%- _("Apply").t() %></button></td>                </tr>            '})}),define("views/shared/timerangepicker/dialog/daterange/BeforeDate",["jquery","underscore","backbone","module","models/DateInput","models/TimeRange","views/Base","views/shared/controls/DateControl","views/shared/FlashMessages"],function(e,t,n,r,i,s,o,u,a){return o.extend({tagName:"tbody",moduleId:r.id,initialize:function(){o.prototype.initialize.call(this,arguments),this.model={range:this.model,workingRange:new s,latestDateInput:new i},this.today=new Date,this.today.setHours(0,0,0,0),this.model.latestDateInput.setFromJSDate(this.today,{silent:!0}),this.children.latestTimeInput=new u({model:this.model.latestDateInput,validate:!0}),this.children.flashMessages=new a({model:{workingRange:this.model.workingRange,latestDateInput:this.model.latestDateInput}}),this.model.range.on("change:latest_date prepopulate",t.debounce(this.prepopulate,0),this),this.model.latestDateInput.on("validated:invalid",this.disableApply,this),this.model.latestDateInput.on("validated:valid",this.enableApply,this),this.model.latestDateInput.on("change",function(){this.model.workingRange.trigger("validated",!0,this.model.workingRange,{}),this.model.workingRange.trigger("serverValidated",!0,this.model.workingRange,[])},this)},prepopulate:function(){var e=this.model.range.get("latest_date");e&&(this.model.latestDateInput.setFromJSDate(e,{validate:!0}),this.model.latestDateInput.setHoursMinSecFromStr("00:00:00.000",{silent:!0}))},events:{"click .apply":function(t){if(e(t.currentTarget).hasClass("disabled")){t.preventDefault();return}this.model.latestDateInput.setHoursMinSecFromStr("00:00:00.000",{silent:!0,validate:!0});var n=this,r=this.model.latestDateInput.isoWithoutTZ();this.disableApply(),this.model.workingRange.save({earliest:"",latest:r},{success:function(e){n.enableApply(),n.model.range.set({earliest:"",latest:e.get("latest_epoch"),earliest_epoch:e.get("earliest_epoch"),latest_epoch:e.get("latest_epoch"),earliest_iso:e.get("earliest_iso"),latest_iso:e.get("latest_iso"),earliest_date:new Date(0),latest_date:new Date(e.get("latest_date").getTime())}),n.model.range.trigger("applied")},error:function(e,t){n.enableApply()}}),t.preventDefault()}},enableApply:function(){this.$("#apply_"+this.cid).removeClass("disabled")},disableApply:function(){this.$("#apply_"+this.cid).addClass("disabled")},render:function(){var e=t.template(this.template,{_:t,cid:this.cid});return this.$el.html(e),this.$(".flash_messages").append(this.children.flashMessages.render().el),this.$(".latest_time").prepend(this.children.latestTimeInput.render().el),this},template:'                <tr>                <td class="flash_messages"></td>                <td class="latest_time"><span class="help-block"><%- _("00:00:00").t() %></span></td>                <td><button class="apply btn" id="apply_<%- cid %>"><%- _("Apply").t() %></button></td>                </tr>            '})}),define("views/shared/timerangepicker/dialog/daterange/AfterDate",["jquery","underscore","backbone","module","models/DateInput","models/TimeRange","views/Base","views/shared/controls/DateControl","views/shared/FlashMessages"],function(e,t,n,r,i,s,o,u,a){return o.extend({tagName:"tbody",moduleId:r.id,initialize:function(){o.prototype.initialize.call(this,arguments),this.model={range:this.model,workingRange:new s,earliestDateInput:new i},this.yesterday=new Date,this.yesterday.setDate(this.yesterday.getDate()-1),this.yesterday.setHours(0,0,0,0),this.model.earliestDateInput.setFromJSDate(this.yesterday,{silent:!0}),this.children.earliestTimeInput=new u({model:this.model.earliestDateInput,validate:!0}),this.children.flashMessages=new a({model:{workingRange:this.model.workingRange,earliestDateInput:this.model.earliestDateInput}}),this.model.range.on("change:earliest_date prepopulate",t.debounce(this.prepopulate,0),this),this.model.earliestDateInput.on("validated:invalid",this.disableApply,this),this.model.earliestDateInput.on("validated:valid",this.enableApply,this),this.model.earliestDateInput.on("change",function(){this.model.workingRange.trigger("validated",!0,this.model.workingRange,{}),this.model.workingRange.trigger("serverValidated",!0,this.model.workingRange,[])},this)},prepopulate:function(){var e=this.model.range.get("earliest_date");e&&!this.model.range.hasNoEarliest()&&(this.model.earliestDateInput.setFromJSDate(e,{validate:!0}),this.model.earliestDateInput.setHoursMinSecFromStr("00:00:00.000",{silent:!0}))},events:{"click .apply":function(t){if(e(t.currentTarget).hasClass("disabled")){t.preventDefault();return}var n=this,r=this.model.earliestDateInput.isoWithoutTZ();this.disableApply(),this.model.workingRange.save({earliest:r,latest:"now"},{success:function(e){n.enableApply(),n.model.range.set({earliest:e.get("earliest_epoch"),latest:"now",earliest_epoch:e.get("earliest_epoch"),latest_epoch:e.get("latest_epoch"),earliest_iso:e.get("earliest_iso"),latest_iso:e.get("latest_iso"),earliest_date:new Date(e.get("earliest_date").getTime()),latest_date:new Date(e.get("latest_date").getTime())}),n.model.range.trigger("applied")},error:function(e,t){n.enableApply()}}),t.preventDefault()}},enableApply:function(){this.$("#apply_"+this.cid).removeClass("disabled")},disableApply:function(){this.$("#apply_"+this.cid).addClass("disabled")},render:function(){var e=t.template(this.template,{_:t,cid:this.cid});return this.$el.html(e),this.$(".flash_messages").append(this.children.flashMessages.render().el),this.$(".earliest_time").prepend(this.children.earliestTimeInput.render().el),this},template:'                <tr>                <td class="earliest_time"><span class="help-block"><%- _("00:00:00").t() %></span></td>                <td><button class="apply btn" id="apply_<%- cid %>"><%- _("Apply").t() %></button></td>                </tr>            '})}),define("views/shared/timerangepicker/dialog/daterange/Master",["jquery","underscore","backbone","module","views/Base","views/shared/controls/SyntheticSelectControl","views/shared/timerangepicker/dialog/daterange/BetweenDates","views/shared/timerangepicker/dialog/daterange/BeforeDate","views/shared/timerangepicker/dialog/daterange/AfterDate","views/shared/FlashMessages"],function(e,t,n,r,i,s,o,u,a,f){return i.extend({className:"accordion-inner",moduleId:r.id,initialize:function(e){i.prototype.initialize.call(this,arguments),this.label=t("Date Range").t(),this.children.rangeTypeSelect=new s({model:this.model,items:[{value:"between_dates",label:t("Between").t()},{value:"before_date",label:t("Before").t()},{value:"after_date",label:t("Since").t()}],modelAttribute:"range_type",className:"timerangepicker-range-type",toggleClassName:"btn",menuWidth:"narrow",popdownOptions:{attachDialogTo:"body"},save:!1});var n={model:this.model,parentCid:this.cid};this.children.betweenDates=new o(n),this.children.beforeDate=new u(n),this.children.afterDate=new a(n),this.model.on("change:range_type",function(){var e=this.model.get("range_type")||"";this.children.betweenDates.$el.hide(),this.children.beforeDate.$el.hide(),this.children.afterDate.$el.hide();switch(e){case"before_date":this.children.beforeDate.$el.show();break;case"after_date":this.children.afterDate.$el.show();break;default:this.children.betweenDates.$el.show()}},this),this.model.on("change:earliest change:latest prepopulate",t.debounce(this.prepopulate,0),this)},prepopulate:function(){var e=this.model.isAbsolute("earliest"),t=this.model.hasNoEarliest(),n=this.model.isAbsolute("latest");!t&&e&&n?this.model.set("range_type","between_dates"):t&&n?this.model.set("range_type","before_date"):e&&this.model.latestIsNow()&&this.model.set("range_type","after_date")},supportsRange:function(){var e=!1,t=!1,n=this.model.hasNoEarliest(),r=this.model.latestIsNow(),i=this.model.isWholeDay("earliest"),s=this.model.isWholeDay("latest");return n&&r?!1:i&&s||i&&r||n&&s},render:function(){this.$el.append(this.children.rangeTypeSelect.render().el);var e=t.template(this.template,{cid:this.cid});return this.$el.append(e),this.$(".date-range-container").append(this.children.betweenDates.render().el),this.$(".date-range-container").append(this.children.beforeDate.render().el),this.children.beforeDate.$el.hide(),this.$(".date-range-container").append(this.children.afterDate.render().el),this.children.afterDate.$el.hide(),this},template:'                    <table class="form form-inline date-range-container">                    </table>                '})}),define("views/shared/timerangepicker/dialog/dateandtimerange/timeinput/HoursMinutesSeconds",["jquery","underscore","backbone","module","views/Base"],function(e,t,n,r,i){return i.extend({tagName:"div",className:"view-time-range-picker-time-and-date-range-hours-minutes-seconds pull-left",moduleId:r.id,initialize:function(){i.prototype.initialize.call(this,arguments),this.model.on("attributeValidated:second",function(e,t,n){e?this.$("input").removeClass("error"):this.$("input").addClass("error")},this),this.model.on("change",this.updateTime,this)},events:{'keyup input[type="text"]':function(){this.model.off("change",this.updateTime,this),this.model.setHoursMinSecFromStr(this.$("input").val(),{validate:!0}),this.model.on("change",this.updateTime,this)}},updateTime:function(){var e=this.model.time();this.$("input").val(e).removeClass("error")},render:function(){var e=this.model.time(),n=t.template(this.template,{time:e});return this.$el.html(n),this},template:'            <input type="text" size="10" value="<%- time %>"/>            <span class="help-block"><%- _("HH:MM:SS.SSS").t() %></span>            '})}),define("views/shared/timerangepicker/dialog/dateandtimerange/timeinput/Master",["jquery","underscore","backbone","module","views/Base","views/shared/controls/DateControl","views/shared/timerangepicker/dialog/dateandtimerange/timeinput/HoursMinutesSeconds"],function(e,t,n,r,i,s,o){return i.extend({tagName:"table",className:"form form-inline pull-left",moduleId:r.id,initialize:function(){i.prototype.initialize.call(this,arguments),this.children.monthDayYear=new s({parentCid:this.cid,model:this.model.dateTime,className:"control pull-left",inputClassName:this.options.inputClassName||"date",validate:!0}),this.children.hoursMinutesSeconds=new o({model:this.model.dateTime})},render:function(){if(!this.el.innerHTML){var e=t.template(this.template,{_:t,cid:this.cid,label:this.options.label});this.$el.html(e),this.$("td").last().append(this.children.monthDayYear.render().el),this.$("td").last().append(this.children.hoursMinutesSeconds.render().el)}else this.children.monthDayYear.render(),this.children.hoursMinutesSeconds.render();return this},template:'                <tbody>                    <tr>                        <td>                            <label class="control-label" for="monthdayyear_<%- cid %>"><%- label %><%- _(":").t() %></label>                        </td>                        <td>                        </td>                    </tr>                </tbody>            '})}),define("views/shared/timerangepicker/dialog/dateandtimerange/Master",["jquery","underscore","backbone","module","models/DateInput","models/TimeRange","views/Base","views/shared/timerangepicker/dialog/dateandtimerange/timeinput/Master","views/shared/FlashMessages","util/time_utils"],function(e,t,n,r,i,s,o,u,a,f){return o.extend({className:"accordion-inner",moduleId:r.id,initialize:function(){o.prototype.initialize.call(this,arguments),this.model={range:this.model,workingRange:new s,earliestDateInput:new i,latestDateInput:new i},this.label=t("Date & Time Range").t(),this.earliest_errored=!1,this.latest_errored=!1,this.today=new Date,this.today.setHours(12,0,0,0),this.model.latestDateInput.setFromJSDate(this.today,{silent:!0}),this.yesterday=new Date,this.yesterday.setDate(this.yesterday.getDate()-1),this.yesterday.setHours(12,0,0,0),this.model.earliestDateInput.setFromJSDate(this.yesterday,{silent:!0}),this.children.flashMessages=new a({model:{workingRange:this.model.workingRange,earliestDateInput:this.model.earliestDateInput,latestDateInput:this.model.latestDateInput}}),this.children.earliestTimeInput=new u({label:t("Earliest").t(),inputClassName:"date-earliest",model:{dateTime:this.model.earliestDateInput}}),this.children.latestTimeInput=new u({label:t("Latest").t(),inputClassName:"date-latest",model:{dateTime:this.model.latestDateInput}}),this.model.workingRange.on("sync error",this.enableApply,this),this.model.earliestDateInput.on("validated:invalid",function(){this.earliest_errored=!0,this.disableApply()},this),this.model.earliestDateInput.on("validated:valid",function(){this.earliest_errored=!1,this.enableApply()},this),this.model.latestDateInput.on("validated:invalid",function(){this.latest_errored=!0,this.disableApply()},this),this.model.latestDateInput.on("validated:valid",function(){this.latest_errored=!1,this.enableApply()},this),this.model.earliestDateInput.on("change",function(){this.model.workingRange.trigger("validated",!0,this.model.workingRange,{})},this),this.model.latestDateInput.on("change",function(){this.model.workingRange.trigger("validated",!0,this.model.workingRange,{})},this),this.model.range.on("change:earliest_iso change:latest_iso prepopulate",t.debounce(this.prepopulate,0),this)},remove:function(){o.prototype.remove.apply(this,arguments),this.model.workingRange.deepOff(),this.model.workingRange.fetchAbort()},prepopulate:function(){var e=this.model.range.get("earliest_iso"),t=this.model.range.get("latest_iso"),n=this.model.range.get("earliest_date"),r=this.model.range.get("latest_date");n&&this.model.earliestDateInput.setFromJSDate(n,{validate:!0}),r&&this.model.latestDateInput.setFromJSDate(r,{validate:!0})},supportsRange:function(){return f.generateDateTimeRangeLabel(this.model.range.get("earliest"),this.model.range.get("latest"))},events:{"click .apply":function(t){if(e(t.currentTarget).hasClass("disabled")){t.preventDefault();return}if(!this.earliest_errored&&!this.latest_errored){var n=this,r=this.model.earliestDateInput.isoWithoutTZ(),i=this.model.latestDateInput.isoWithoutTZ();this.disableApply(),this.model.workingRange.save({earliest:r,latest:i},{success:function(e){n.enableApply(),n.model.range.set({earliest:e.get("earliest_epoch"),latest:e.get("latest_epoch"),earliest_epoch:e.get("earliest_epoch"),latest_epoch:e.get("latest_epoch"),earliest_iso:e.get("earliest_iso"),latest_iso:e.get("latest_iso"),earliest_date:new Date(e.get("earliest_date").getTime()),latest_date:new Date(e.get("latest_date").getTime())}),n.model.range.trigger("applied")},error:function(e,t){n.enableApply()}})}t.preventDefault()}},enableApply:function(){this.$("#apply_"+this.cid).removeClass("disabled")},disableApply:function(){this.$("#apply_"+this.cid).addClass("disabled")},render:function(){var e=t.template(this.template,{_:t,cid:this.cid});return this.$el.html(e),this.children.flashMessages.render().$el.insertBefore(this.$(".apply")),this.children.earliestTimeInput.render().$el.insertBefore(this.$(".apply")),this.children.latestTimeInput.render().$el.insertBefore(this.$(".apply")),this},template:'                    <button class="apply btn pull-left" id="apply_<%- cid %>"><%- _("Apply").t() %></button>                '})}),define("views/shared/timerangepicker/dialog/advanced/timeinput/Hint",["jquery","underscore","backbone","module","views/Base","util/time_utils","splunk.i18n"],function(e,t,n,r,i,s,o){return i.extend({moduleId:r.id,initialize:function(){i.prototype.initialize.call(this,arguments),this.model.timeParser.on("error sync",this.render,this)},render:function(){var e=this.model.timeParser.error.get("messages"),n=s.isoToDateObject(this.model.timeParser.get("value")),r=e||isNaN(n.getTime()),i=t.template(this.template,{_:t,timeParser:this.model.timeParser,error:r,value:r||o.format_datetime_microseconds(s.jsDateToSplunkDateTimeWithMicroseconds(n),"short","full")});return this.$el.html(i),this},template:'            <% if (error) { %>                <%- _("Invalid time").t() %>            <% } else if (timeParser.get("value")) { %>                <%- value %>            <% } %>            '})}),define("views/shared/timerangepicker/dialog/advanced/timeinput/Master",["jquery","underscore","backbone","module","views/Base","views/shared/timerangepicker/dialog/advanced/timeinput/Hint","util/time_utils"],function(e,t,n,r,i,s,o){return i.extend({tagName:"table",className:"form form-inline pull-left",moduleId:r.id,initialize:function(){i.prototype.initialize.call(this,arguments),this.children.hint=new s({model:{timeParser:this.model.timeParser}}),this.model.working.on("change:"+this.options.modelAttribute,function(){this.update_value(),this.update_hint()},this)},events:{'keyup input[type="text"]':"update_hint",'focusout input[type="text"]':"update_hint"},update_hint:function(e){var t=o.stripRTSafe(this.$("input").val()||this.options.blankValue,this.options.isLatest)||"now";this.model.timeParser.fetch({data:{time:t}})},update_value:function(){var e=this.model.working.get(this.options.modelAttribute)||"";e!==this.options.blankValue&&this.$("input").val(e)},render:function(){var e=t.template(this.template,{_:t,cid:this.cid,label:this.options.label,time:this.model.working.get(this.options.modelAttribute)||""});return this.$el.html(e),this.$("#hint_"+this.cid).html(this.children.hint.render().el),this.update_hint(),this},template:'                <tbody>                    <tr>                        <td>                            <label class="control-label" for="<%- cid %>"><%- label %><%- _(":").t() %></label>                        </td>                        <td>                            <input type="text" size="20" value="<%- time %>" id="<%- cid %>"/>                            <span id="hint_<%- cid %>" class="help-block help-block-timestamp"></span>                        </td>                    </tr>                </tbody>            '})}),define("views/shared/timerangepicker/dialog/advanced/Master",["jquery","underscore","backbone","module","views/Base","models/services/search/TimeParser","models/TimeRange","views/shared/timerangepicker/dialog/advanced/timeinput/Master","views/shared/FlashMessages","uri/route","util/console","util/time_utils"],function(e,t,n,r,i,s,o,u,a,f,l,c){return i.extend({moduleId:r.id,className:"accordion-inner",initialize:function(){i.prototype.initialize.call(this,arguments),this.label=t("Advanced").t();var n=e.extend(!0,{enableRealTime:this.options.enableCustomAdvancedRealTime},this.model.timeRange.toJSON());this.model={appLocal:this.model.appLocal,application:this.model.application,range:this.model.timeRange,workingRange:new o(n),earliestTimeParser:new s({key:c.stripRTSafe(this.model.timeRange.get("earliest"),!1),value:this.model.timeRange.get("earliest_iso")}),latestTimeParser:new s({key:c.stripRTSafe(this.model.timeRange.get("latest"),!0),value:this.model.timeRange.get("latest_iso")})},this.children.earliestTimeInput=new u({model:{working:this.model.workingRange,timeParser:this.model.earliestTimeParser},label:t("Earliest").t(),blankValue:"0",modelAttribute:"earliest",isLatest:!1}),this.children.latestTimeInput=new u({model:{working:this.model.workingRange,timeParser:this.model.latestTimeParser},label:t("Latest").t(),blankValue:"",modelAttribute:"latest",isLatest:!0}),this.children.flashMessages=new a({model:{workingRange:this.model.workingRange,earliestTimeParser:this.model.earliestTimeParser,latestTimeParser:this.model.latestTimeParser}}),this.model.range.on("change:earliest change:latest prepopulate",t.debounce(function(){this.model.workingRange.set({earliest:this.model.range.get("earliest"),latest:this.model.range.get("latest")})},0),this),this.model.workingRange.on("validated",function(e,t,n){e||this.enableApply()},this)},remove:function(){i.prototype.remove.apply(this,arguments),t.chain(this.model).omit(["appLocal","application","range"]).each(function(e){e.deepOff(),e.fetchAbort()})},supportsRange:function(){return!0},events:{"click .apply":function(t){if(e(t.currentTarget).hasClass("disabled")){t.preventDefault();return}var n=this,r=this.children.earliestTimeInput.$("input").val()||"0",i=this.children.latestTimeInput.$("input").val()||"";this.disableApply(),this.model.workingRange.save({earliest:r,latest:i},{success:function(e){n.enableApply();var t=e.get("latest_date"),r=t?Date(t.getTime()):t;n.model.range.set({earliest:e.get("earliest"),latest:e.get("latest"),earliest_epoch:e.get("earliest_epoch"),latest_epoch:e.get("latest_epoch"),earliest_iso:e.get("earliest_iso"),latest_iso:e.get("latest_iso"),earliest_date:new Date(e.get("earliest_date").getTime()),latest_date:r}),n.model.range.trigger("applied")},error:function(e,t){n.enableApply()}}),t.preventDefault()}},enableApply:function(){this.$("#apply_"+this.cid).removeClass("disabled")},disableApply:function(){this.$("#apply_"+this.cid).addClass("disabled")},render:function(){var e="http://docs.splunk.com/";this.model.appLocal&&this.model.application?e=f.docHelp(this.model.application.get("root"),this.model.application.get("locale"),"learnmore.timerange.picker"):l.warn("The timerangepicker advanced view needs the AppLocal and Application model passed to it");var n=t.template(this.template,{_:t,cid:this.cid,docRoute:e});return this.$el.html(n),this.children.flashMessages.render().$el.insertBefore(this.$(".apply")),this.children.earliestTimeInput.render().$el.insertBefore(this.$(".apply")),this.children.latestTimeInput.render().$el.insertBefore(this.$(".apply")),this},template:'                    <button class="apply btn" id="apply_<%- cid %>"><%- _("Apply").t() %></button>                    <a href="<%- docRoute %>" target="_blank" title="<%- _("Splunk help").t() %>" class="btn-documentation" style="line-height:22px;"><%- _("Documentation").t() %> <i class="icon-external"></i></a>            '})}),define("views/shared/timerangepicker/dialog/Master",["jquery","underscore","backbone","module","models/services/authentication/User","views/Base","views/shared/timerangepicker/dialog/Presets","views/shared/timerangepicker/dialog/Relative","views/shared/timerangepicker/dialog/RealTime","views/shared/timerangepicker/dialog/daterange/Master","views/shared/timerangepicker/dialog/dateandtimerange/Master","views/shared/timerangepicker/dialog/advanced/Master","views/shared/delegates/Accordion"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){return s.extend({moduleId:r.id,className:"accordion view-new-time-range-picker-dialog",initialize:function(){this.model.user=this.model.user||new i;var n=this.model.user.canRTSearch(),r={showPresets:!0,showPresetsRealTime:n,showPresetsRealTimeOnly:!1,showPresetsRelative:!0,showPresetsAllTime:!0,showCustom:!0,showCustomRealTime:n,showCustomRelative:!0,showCustomDate:!0,showCustomDateTime:!0,showCustomAdvanced:!0,enableCustomAdvancedRealTime:n};t.defaults(this.options,r),s.prototype.initialize.call(this,arguments),this.renderedDfd=e.Deferred(),this.options.showPresets&&this.collection&&(this.children.presets=new o({collection:this.collection,model:this.model.timeRange,showRealTime:this.options.showPresetsRealTime,showRealTimeOnly:this.options.showPresetsRealTimeOnly,showRelative:this.options.showPresetsRelative,showAllTime:this.options.showPresetsAllTime})),this.options.showCustom&&(this.options.showCustomRelative&&(this.children.relative=new u({model:this.model.timeRange})),this.options.showCustomRealTime&&(this.children.realtime=new a({model:this.model.timeRange})),this.options.showCustomDate&&(this.children.daterange=new f({model:this.model.timeRange})),this.options.showCustomDateTime&&(this.children.dateandtimerange=new l({model:this.model.timeRange})),this.options.showCustomAdvanced&&(this.children.advanced=new c({model:{timeRange:this.model.timeRange,appLocal:this.model.appLocal,application:this.model.application},enableCustomAdvancedRealTime:this.options.enableCustomAdvancedRealTime}))),this.model.timeRange.on("change:earliest_epoch change:latest_epoch",t.debounce(this.onChange,0),this),this.collection.on("reset",this.onChange,this)},onChange:function(){e.when(this.renderedDfd).then(function(){return this.$el.is(":visible")?!1:this.children.accordion.show(this.getBestGroup(),!1)}.bind(this))},getBestGroup:function(){var e=!1;return t.each(this.children,function(t,n){if(e)return!1;e=t.supportsRange()?t:e},this),e=e||this.children.presets||this.children.advanced||this.children.daterange||this.children.dateandtimerange||this.children.relative||this.children.realtime,e.$el.closest(".accordion-group")},render:function(){var e=t.template(this.template,{cid:this.cid,panels:this.children});return this.$el.html(e),t.each(this.children,function(e,t){this.$("#"+t+"_"+this.cid+" .accordion-body").append(e.render().el)},this),this.children.accordion=new h({el:this.el,defaultGroup:this.getBestGroup()}),this.renderedDfd.resolve(),this},onShown:function(){this.$(".accordion-group.active a.accordion-toggle").focus()},template:'                <% _.each(panels, function(panel, key) { %>                 <div class="accordion-group" id="<%- key + "_" + cid %>">                    <div class="accordion-heading">                      <a class="accordion-toggle" href="#">                        <i class="icon-accordion-toggle"></i><%- panel.label %>                      </a>                    </div>                    <div class="accordion-body">                    </div>                </div>                <% }); %>             '})}),define("views/shared/timerangepicker/Master",["jquery","underscore","module","views/Base","views/shared/timerangepicker/dialog/Master","views/shared/delegates/Popdown","collections/SplunkDsBase","splunk.util","util/console"],function(e,t,n,r,i,s,o,u,a){return r.extend({moduleId:n.id,className:"btn-group",initialize:function(n){var s={timerangeClassName:"btn"};t.defaults(this.options,s),r.prototype.initialize.call(this,n),this.children.dialog=new i(e.extend({model:{timeRange:this.model.timeRange,user:this.model.user,appLocal:this.model.appLocal,application:this.model.application},collection:this.collection},this.options.dialogOptions||{})),this.collection&&this.collection.on("reset",function(){a.log("timerangepicker setting label because of collection reset"),this.setLabel()},this),this.listenToModels(),this.model.timeRange.trigger("prepopulate")},listenToModels:function(){this.model.timeRange.on("change:earliest change:latest",t.debounce(this.timeRangeChange,0),this),this.model.timeRange.on("applied",this.timeRangeApplied,this),this.model.timeRange.on("change:earliest_epoch change:latest_epoch change:earliest change:latest",t.debounce(this.setLabel,0),this),this.model.state.on("change:dispatch.earliest_time change:dispatch.latest_time",t.debounce(this.stateChange,0),this)},stopListeningToModels:function(){this.model.timeRange.off(null,null,this),this.model.state.off(null,null,this)},stateChange:function(){this.stopListeningToModels();var e=this.model.timeRange.get("enableRealTime");this.model.timeRange.clear({silent:!0}),this.model.timeRange.set({enableRealTime:e}),this.model.timeRange.save({earliest:this.model.state.get("dispatch.earliest_time"),latest:this.model.state.get("dispatch.latest_time")},{wait:!0,success:function(e,t){this.listenToModels(),this.setLabel()}.bind(this),error:function(e,t){this.listenToModels(),this.setLabel()}.bind(this)})},timeRangeChange:function(){this.stopListeningToModels(),this.model.state.set({"dispatch.earliest_time":this.model.timeRange.get("earliest"),"dispatch.latest_time":this.model.timeRange.get("latest")}),this.listenToModels()},timeRangeApplied:function(){this.children.popdown.hide(),this.model.state.trigger("applied",{silent:u.normalizeBoolean(this.model.state.get("disable_timerange_trigger"))})},setLabel:function(){var e=this.model.timeRange.generateLabel(this.collection||new o);this.$el.children("a").find(".time-label").text(t(e).t())},render:function(){return this.$el.html(this.compiledTemplate({options:this.options})),this.$(".popdown-dialog").append(this.children.dialog.render().el),this.children.popdown=new s({el:this.el,toggle:"> a",mode:"dialog",attachDialogTo:"body",ignoreClasses:["ui-datepicker","ui-datepicker-header","dropdown-menu"]}),this.children.popdown.on("shown",function(){if(this.children.dialog.$(".accordion-group.active").length){this.children.dialog.onShown();return}var e="presets";this.children.dialog.children[e].$el.closest(".accordion-group").find(".accordion-toggle").first().click(),this.children.dialog.onShown()},this),this.setLabel(),this},template:'                <a class=" splBorder splBorder-nsew splBackground-primary <%- options.timerangeClassName %>" href="#"><span class="time-label"></span><span class="caret"></span></a>                <div class="popdown-dialog">                    <div class="arrow"></div>                </div>                '})}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("splunkjs/css/timerange-picker.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("splunkjs/mvc/timerangeview",["require","exports","module","underscore","./mvc","backbone","./basesplunkview","util/console","views/shared/timerangepicker/Master","models/TimeRange","./tokenutils","./utils","splunk.config","./sharedmodels","css!../css/timerange-picker"],function(e,t,n){var r=e("underscore"),i=e("./mvc"),s=e("backbone"),o=e("./basesplunkview"),u=e("util/console"),a=e("views/shared/timerangepicker/Master"),f=e("models/TimeRange"),l=e("./tokenutils"),c=e("./utils"),h=e("splunk.config"),p=e("./sharedmodels");e("css!../css/timerange-picker");var d=o.extend({moduleId:n.id,className:"splunk-timerange",options:{"default":undefined,managerid:null,earliest_time:undefined,latest_time:undefined,preset:undefined,value:undefined},initialize:function(){var e=this;this.configure(),this.settings.enablePush("value"),this.settings.enablePush("earliest_time"),this.settings.enablePush("latest_time"),this._initializeValue();var t=this.settings.get("value");this._state=new s.Model({"dispatch.earliest_time":t!==undefined?t.earliest_time:"","dispatch.latest_time":t!==undefined?t.latest_time:""});var n=p.get("app"),i=p.get("user"),o=p.get("appLocal"),u=this._timesCollection=p.get("times");this._pickerDfd=$.when(u.dfd,i.dfd,o.dfd).done(function(){if(e.settings.get("timepicker"))e.timepicker=e.settings.get("timepicker"),e._state=e.timepicker.model.state,e.settings.unset("timepicker");else{var t=new f;t.save({earliest:e._state.get("dispatch.earliest_time"),latest:e._state.get("dispatch.latest_time")}),e.timepicker=new a({className:"controls",model:{state:e._state,timeRange:t,user:i,appLocal:o,application:n},collection:u})}e._state.on("change:dispatch.earliest_time change:dispatch.latest_time",r.debounce(e._onTimeRangeChange),e)}),this._timesCollection.on("change reset",this._onTimePresetUpdate,this),this.settings.on("change:preset",this._onTimePresetUpdate,this),this.settings.on("change:value",function(t,n,r){e.val(n||{earliest_time:"",latest_time:""})}),this.on("change",function(){e.settings.set("value",e._getTimeRange())}),this.settings.on("change:default",this._onDefaultChange,this),this.bindToComponentSetting("managerid",this._onManagerChange,this),this.settings.get("value")===undefined&&e._onTimePresetUpdate()},_initializeValue:function(){var e=this,t=this.settings.get("value");t!==undefined?this.settings.set({earliest_time:t.earliest_time,latest_time:t.latest_time}):this.settings.get("earliest_time")!==undefined||this.settings.get("latest_time")!==undefined?this.settings.set("value",{earliest_time:this.settings.get("earliest_time"),latest_time:this.settings.get("latest_time")}):this.settings.set({value:undefined,earliest_time:undefined,latest_time:undefined}),this.settings.on("change:value",function(t,n,r){n&&e.settings.set({earliest_time:n.earliest_time,latest_time:n.latest_time})}),this.settings.on("change:earliest_time change:latest_time",r.debounce(function(){var t=r.clone(e.settings.get("value"));t.earliest_time=e.settings.get("earliest_time"),t.latest_time=e.settings.get("latest_time"),e.settings.set("value",t)}),this);if(l.isToken(this.settings.get("value",{tokens:!0}))){var n=l.getTokens(this.settings.get("value",{tokens:!0}))[0],i=function(t){return e.settings.get(t,{tokens:!0})===e.settings.get(t,{tokens:!1})};i("earliest_time")&&this.settings.set("earliest_time","$"+n.namespace+":"+n.name+".earliest_time$",{tokens:!0}),i("latest_time")&&this.settings.set("latest_time","$"+n.namespace+":"+n.name+".latest_time$",{tokens:!0})}this.settings.get("value")===undefined&&this.settings.set("value",this.settings.get("default"))},_onDefaultChange:function(e,t,n){var i=this.settings.previous("default"),s=this.settings.get("default"),o=this.settings.get("value");s!==undefined&&(r.isEqual(o,i)||o===undefined)&&this.settings.set("value",s)},_onTimePresetUpdate:function(){var e=this.settings.get("preset");if(!e)return;this._presetInFlightCancelled=!1;var t=this;$.when(this._pickerDfd).done(function(){var n=t._timesCollection.find(function(t){return t.entry.content.get("label")===e});n?t._presetInFlightCancelled||t.val({earliest_time:n.entry.content.get("earliest_time"),latest_time:n.entry.content.get("latest_time")}):(u.warn('Could not find matching preset "'+e+'" for time range view.'),t.val({earliest_time:"0",latest_time:"now"}))})},_onManagerChange:function(e,t){this.manager&&(this.manager.off(null,null,this),this.manager=null),this.manager=t,t.search&&(this.listenTo(t.search,"change:earliest_time change:latest_time",r.debounce(this._onManagerTimeRangeChange)),this._onManagerTimeRangeChange())},_onManagerTimeRangeChange:function(){var e=this.val();e.earliest_time=this.manager.search.get("earliest_time")||e.earliest_time,e.latest_time=this.manager.search.get("latest_time")||e.latest_time,this._setTimeRange(e)},_onTimeRangeChange:function(e,t,n){(!n||n&&!n._self)&&this.trigger("change",this._getTimeRange(),this)},render:function(){var e=this;return $.when(this._pickerDfd).done(function(){e.timepicker.render(),e.$el.append(e.timepicker.el)}),this},val:function(e){if(arguments.length===0)return this._getTimeRange();e=e||{earliest_time:undefined,latest_time:undefined};var t=this.val();this._setTimeRange(e);var n=this.val();return r.isEqual(n,t)||this.trigger("change",n,this),this._presetInFlightCancelled=!0,this._getTimeRange()},_setTimeRange:function(e){this._state.set({"dispatch.earliest_time":e.earliest_time,"dispatch.latest_time":e.latest_time},{_self:!0})},_getTimeRange:function(){return{earliest_time:this._state.get("dispatch.earliest_time"),latest_time:this._state.get("dispatch.latest_time")}},remove:function(){var e=this;$.when(this._pickerDfd).done(function(){e.timepicker.remove()}),i.Components.revokeInstance(this.id),o.prototype.remove.apply(this,arguments)}});return d}),define("splunkjs/mvc/timepickerview",["require","util/console","./timerangeview"],function(e){var t=e("util/console");return t.warn("%s is deprecated. Please require %s instead.","splunkjs/mvc/simpleform/timepickerview","splunkjs/mvc/simpleform/timerangeview"),e("./timerangeview")}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.setBuffer('.clearfix{*zoom:1;}.clearfix:before,.clearfix:after{display:table;content:"";line-height:0;}\n.clearfix:after{clear:both;}\n.hide-text{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;}\n.input-block-level{display:block;width:100%;min-height:26px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}\n.ie7-force-layout{*min-width:0;}\n.shared-timerangepicker-dialog{width:640px;}.shared-timerangepicker-dialog td{vertical-align:top;}\n.timeRangeMenu,.trpCustomDateTime{display:none;}\n.help-block-timestamp{min-height:1em;line-height:1em;padding:3px;margin-top:5px;margin-right:15px;border-radius:3px;background-color:#eeeeee;}\n.timerangepicker-range-type{margin-right:25px;float:left;}\n.timerangepicker-range-type .btn{min-width:65px;}\n.btn.timerange-control>.icon-triangle-right-small{padding-left:5px;}\ninput.timerangepicker-earliest-date{margin-right:0;}\ninput.timerangepicker-real-time-earliest-time,input.timerangepicker-relative-earliest-time{margin-right:0;}\n.timerangepicker-realtime_range_type,.timerangepicker-relative_range_type{display:inline-block;vertical-align:middle;margin-right:25px;}\n.shared-timerangepicker-dialog-daterange-betweendates>tr:first-child>td{padding-bottom:0;}.shared-timerangepicker-dialog-daterange-betweendates>tr:first-child>td>.alerts{margin-top:0;}\n.form-inline .radio{line-height:18px;padding-top:5px;padding-bottom:5px;display:block;}\n.form-inline .radio+.radio{padding-top:0;}\ninput.date-before-time{margin-right:5px;}\n.advanced-time-documentation{clear:left;margin:10px 0 0 55px;display:block;float:left;}\n.presets-group{float:left;width:130px;}\n.presets-group+.presets-group{margin-left:10px;}\n.presets-divider-wrap{float:left;margin:10px;}\n.presets-divider{position:absolute;top:10px;bottom:10px;border-right:1px solid #cccccc;}\n.presets-group li{color:#999999;padding-left:20px;text-indent:-20px;overflow:hidden;text-overflow:ellipsis;}\n.vis-area{*zoom:1;}.vis-area:before,.vis-area:after{display:table;content:"";line-height:0;}\n.vis-area:after{clear:both;}\n.slide-area{width:1090px;}\n.content-wrapper{width:450px;float:left;}\n.modal .timerange-picker-wrapper{float:left;}.modal .timerange-picker-wrapper .shared-timerangepicker-dialog{width:640px;}\n.modal .timerange-picker-wrapper .accordion .accordion-heading .accordion-toggle{border-left:none;border-right:none;}\n.modal .timerange-picker-wrapper .accordion .accordion-body{border:none;}\n.modal .timerange-picker-wrapper .accordion .accordion-group.active:last-child .accordion-body{border:none;}\n.modal .timerange-picker-wrapper .accordion .accordion-group:last-child .accordion-toggle{border-bottom:none;border-radius:0px;}\n.modal .timerange-picker-wrapper .accordion .accordion-group:first-child .accordion-toggle{border-top:none;border-radius:0px;}\n.popdown-dialog .accordion-body .shared-timerangepicker-dialog-dateandtimerange{padding-left:18px;padding-right:18px;}\n.shared-timerangepicker .btn{max-width:99%;}.shared-timerangepicker .btn .time-label{display:inline-block;*display:inline;vertical-align:middle;max-width:99%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}\n')}),requirejs.s.contexts._.nextTick=requirejs.nextTick;